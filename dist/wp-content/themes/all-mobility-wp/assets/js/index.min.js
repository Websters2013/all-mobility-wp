!function(){var e=!0;$(function(){$(".site__menu").each(function(){new n($(this)),new t($(this))}),$(".not-found").each(function(){new i($(this))}),$(".confirmation").each(function(){new i($(this))}),$("#wpsl-stores").each(function(){$(this).perfectScrollbar({wheelPropagation:!0})}),$(".checkout").each(function(){new s($(this))}),$(".product__items").each(function(){new o($(this))})});var n=function(e){var n=e,t=n.find(".site__menu-item"),i=n.find(".site__menu-icon"),s=$(window),o=null,a=s.width(),d=function(){s.on({resize:function(){a>s.width()&&(a=s.width(),s.find(".opened").removeClass("opened"))}}),$("body").on("click",".site__menu-icon",function(){if(jQuery(window).width()<1e3){var e=jQuery(this),n=e.parent("li");n.hasClass("opened")?n.removeClass("opened"):n.addClass("opened")}return!1}),i.on({click:function(){var e=jQuery(this),n=e.parents("li"),t=n.find(".site__menu-sub");return s.width()<1024&&(n.hasClass("opened")?(n.removeClass("opened"),t.slideUp()):(n.addClass("opened"),t.slideDown())),!1}}),t.on({mouseenter:function(){if(s.width()>=1024){var e=$(this);e.parent("ul");if(e.hasClass("site__menu-item_sub")){e.addClass("opened");var n=e.find(".site__menu-sub");s.width()-(n.innerWidth()+e.offset().left)<0?e.offset().left+e.innerWidth()-n.innerWidth()<0?n.css({left:"50%","-webkit-transform":"translateX(-50%)",transform:"translateX(-50%)"}):n.css({left:e.position().left-n.innerWidth()+e.innerWidth()}):n.css({left:e.position().left})}}}}),$("[data-product]").on({mouseenter:function(){if(s.width()>=1024){$(".featured-product__loading").addClass("visible"),o&&(clearTimeout(o),o=null);var e=$(this),t=e.data("product");o=setTimeout(function(){console.log(t),n.find(".featured-product").find(".featured-product__title").text(t.name),n.find(".featured-product").find(".featured-product__pic img").attr("src",t.src),n.find(".featured-product").find(".btn").attr("href",t.href),n.find(".featured-product").find(".featured-product__price span").text(t.price),t.onSale?n.find(".featured-product").find(".featured-product__remark").addClass("visible"):n.find(".featured-product").find(".featured-product__remark").removeClass("visible"),t.oldPrice?n.find(".featured-product").find(".featured-product__price del").text(t.oldPrice):n.find(".featured-product").find(".featured-product__price del").addClass("hidden")},160),o=setTimeout(function(){$(".featured-product__loading").removeClass("visible")},200)}}}),n.on("mouseleave",function(){s.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("ul").on("mouseleave",function(){s.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("li").on("mouseleave",function(){s.width()>=1024&&$(this).removeClass("opened")})},r=function(){d()};r()},t=function(n){var t,i,s=this,o=n,a=$(window),d=!1,r=$(".site__header"),c=$(".site__hidden-items"),u=r.innerHeight(),f=$(".site__header-btn"),l=$(".site__hidden-close"),h=$(".search"),p=$(".search-btn"),_=$(".search__cancel"),v=$(".site__hidden-btn"),m=$(".site"),w=$("html"),C=($(".site__content"),function(){$(document).on("click",".search",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click","body",function(){x()}),f.on({click:function(){k($(this))}}),l.on({click:function(){return T(),!1}}),p.on({click:function(){return y($(this)),!1}}),_.on({click:function(){return x(),!1}}),a.on({scroll:function(e){g(),d=a.scrollTop()>=u,0==a.scrollTop()&&r.removeClass("site__header_hidden")},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var t=n>0?1:-1;b(t)}},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var t=n>0?-1:1;b(t)}},touchmove:function(e){var n=e.originalEvent.touches[0].clientY;n>t?b(-1):n<t&&b(1),t=n},keydown:function(e){switch(e.which){case 32:b(1);break;case 33:b(-1);break;case 34:b(1);break;case 35:b(1);break;case 36:b(-1);break;case 38:b(-1);break;case 40:b(1);break;default:return}},resize:function(){a.width()>=1024&&(m.css({height:""}),setTimeout(function(){m.height()>a.height()&&w.css({"overflow-y":""})},10))}})}),b=function(n){n>0&&!r.hasClass("site__header_hidden")&&!f.hasClass("opened")&&d&&r.addClass("site__header_hidden"),n<0&&r.hasClass("site__header_hidden")&&!f.hasClass("opened")&&d&&e&&r.removeClass("site__header_hidden")},g=function(){a.scrollTop()>u+150?r.addClass("fixed"):r.removeClass("fixed")},k=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),c.removeClass("opened")):(n.addClass("opened"),c.addClass("opened")),i=a.scrollTop(),setTimeout(function(){m.height()>a.height()&&w.css({"overflow-y":"scroll"}),setTimeout(function(){m.css({height:"100%"})},10)},300)},y=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),h.removeClass("active"),v.removeClass("hidden")):(n.addClass("opened"),h.addClass("active"),v.addClass("hidden"))},T=function(){f.removeClass("opened"),c.removeClass("opened"),h.find("input").focusout(),m.css({height:""}),setTimeout(function(){m.height()>a.height()&&w.css({"overflow-y":""}),a.scrollTop(i)},10)},x=function(){p.removeClass("opened"),h.removeClass("active"),v.removeClass("hidden")},H=function(){o[0].obj=s,C(),g()};H()},i=function(e){var n=e,t=$(window),i=t.width(),s=function(){t.on({resize:function(){i!=t.width()&&(i=t.width(),o())}})},o=function(){n.css({minHeight:""}),n.css({minHeight:t.height()-$(".site__header").innerHeight()-$(".site__footer").innerHeight()-$(".breadcrumbs").innerHeight()})},a=function(){s(),o()};a()},s=function(e){var n=e,t=n.find(".total-order"),i=function(){},s=function(){n.css({minHeight:t.innerHeight()})},o=function(){i(),s()};o()},o=function(e){Number.prototype.formatMoney=function(e,n,t){var i=this,e=isNaN(e=Math.abs(e))?2:e,n=void 0==n?".":n,t=void 0==t?",":t,s=i<0?"-":"",o=String(parseInt(i=Math.abs(Number(i)||0).toFixed(e))),a=(a=o.length)>3?a%3:0;return s+(a?o.substr(0,a)+t:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+t)+(e?n+Math.abs(i-o).toFixed(e).slice(2):"")},$(".variations_form").on("change",function(){var e=$(".variations").find("select"),n=0;if(e.each(function(e){$(this).val()&&n++}),n===e.length){var t=$(".price>span").text(),i=$(".price>span>span").text();t=parseFloat(t.slice(1).split(",").join("")),$upsells=$(".variations_form>.websters-select").find("select"),$upsells.each(function(){var e=$(this).val();e>0&&$(this).find("option").each(function(){$(this).val()===e&&(t+=$(this).data("price"))})}),$(".price").css("display","none"),$(".featured-product__price>strong").html("<span>"+i+"</span>"+t.formatMoney(2,".",","))}})}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return v($(this).attr("data-popup")),!1}}),u.find(">div").on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},v=function(o){m(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$(".main-slider").each(function(){new i($(this))})});var i=function(i){var n=i,e=$(window),t=n.find(".main-slider__items"),s=n.find(".swiper-pagination"),d=n.find(".main-slider__constrols .swiper-button-prev"),o=n.find(".main-slider__constrols .swiper-button-next"),r=e.width(),a=function(){t.on("init",function(i){t.find(".slick-current").find(".main-slider__content").addClass("visible")}),t.on("afterChange",function(i,n){$(n.$slides).find(".main-slider__content").removeClass("visible"),$(n.$slides).filter(".slick-current").find(".main-slider__content").addClass("visible")}),e.on({resize:function(){r<e.width()&&(r=e.width()-1,n.find(".main-slider__item").css({minHeight:""}),n.find(".main-slider__item").css({minHeight:t.height()}))}})},l=function(){t.slick({dots:!0,autoplay:!0,autoplaySpeed:5e3,prevArrow:d,nextArrow:o,appendDots:s}),n.find(".main-slider__item").css({minHeight:t.height()})},c=function(){a(),l()};c()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var t=e,i=t.find("input[type=search]"),a=new XMLHttpRequest,s=t.data("path"),n=0,o=0,r=i.val(),c=t.find(".search__result"),l=function(){i.on({keyup:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:0==c.find(".search__found li").filter(".active").length&&t.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var i=$(this).val();i.length>=t.data("symbols")?u($(this),i.length):""==$(this).val()&&(c.removeClass("visible"),n=0)}},keydown:function(e){if(c.find(".search__found").html(""),c.find(".top-products").html(""),n=0,$(window).width()>=1024)switch(e.keyCode){case 13:return 0==c.find(".search__found li").filter(".active").length?window.location.href=t.data("action"):window.location.href=c.find(".search__found li").filter(".active").find("a").attr("href"),!1;case 27:return c.remove(),n=0,!1;case 38:case 40:e.preventDefault(),o>0&&(d(e.keyCode),n==o&&(n=0))}}}),$("html").click(function(){c.removeClass("visible"),n=0}),$(document).on("click","body",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click",".search__found li",function(){var e=$(this),t=e.find("a").text();i.val(t),c.removeClass("visible"),n=0}),$(document).on("keydown",".search__found li",function(e){switch(e.keyCode){case 13:$(this).trigger("click")}})},d=function(e){c.find(".search__found li").removeClass("active"),t.parents().hasClass("site__footer")?(38==e&&n<o?n++:40==e&&n>0&&n--,n>0?(c.find(".search__found li").eq(-1-(n-1)).addClass("active"),i.val(c.find(".search__found li").eq(-1-(n-1)).find("a").text())):i.val(r)):(40==e&&n<o?n++:38==e&&n>0&&n--,n>0?(c.find(".search__found li").eq(n-1).addClass("active"),i.val(c.find(".search__found li").eq(n-1).find("a").text())):i.val(r))},f=function(e){var e=e,t=e.categories,i=0!=t.length,a=e.products,s=0!=a.length,n=[],r=[],l=!0;if(s){var d='<div class="top-products__wrap">';$.each(a,function(){var e=this;d+='<div>                                                <div class="top-products__item">                                                    <div class="top-products__pic" style="background-image: url('+e.src+')">                                                    </div>                                                    <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                    <h3 class="top-products__item-title">'+e.name+'</h3>                                                    <a href="'+e.href+'" class="top-products__btn">view</a>                                                </div>                                            </div>',i||n.push([e.categories.mainCategory,e.categories.urlMainCategory,e.categories.subcategories,e.categories.urlSubcategories])}),d+="</div>",c.find("div").eq(1).find(".top-products").html('<h2 class="top-products__title">Top Products</h2>'+d);var f='<ul class="search__found">';if(i)$.each(t,function(){var e=this.subcategories,t=this.urlSubcategories,i="";if(void 0!=e){for(var a=0;a<=e.length-1;a++)i+='<li class="search__found-sub"><a href="'+t[a]+'">'+e[a]+"</a></li>";i+=""}f+='<li><a href="'+this.urlCategory+'">'+this.name+"</a></li>"+i});else{for(var u=0;u<=n.length-1;u++)if(l&&(r.push(n[u]),l=!1),r[r.length-1][0]!=n[u][0])r.push(n[u]);else for(var h=0;h<=n[u].length-1;h++)for(var v=0;v<=n[u][2].length-1;v++)r[r.length-1][2].indexOf(n[u][2][v])==-1&&r[r.length-1][2].push(n[u][2][v]);for(var _=0,u=0;u<=r.length-1;u++){for(var h=0;h<=r[u].length-1;h++){for(var p="",v=0;v<=r[u][2].length-1;v++)p+='<li class="search__found-sub"><a href="'+r[u][3][v]+'">'+r[u][2][v]+"</a></li>",_++;p+=""}f+='<li><a href="'+r[u][1]+'">'+r[u][0]+"</a></li>"+p}}f+="</ul>",c.find("div:first").html(f),c.find(".search__found").find("li:not(:lt(11))").remove(),o=c.find(".search__found").find("li").length,c.addClass("visible")}else c.removeClass("visible")},u=function(e,t){return a.abort(),a=$.ajax({url:s,data:{value:e.val(),action:"main_search"},dataType:"json",type:"get",success:function(e){0!=Object.keys(e).length&&f(e)},error:function(e){"abort"!=e.statusText&&console.log("Error")}}),!1},h=function(){l()};h()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5LmluZGV4LmpzIiwianF1ZXJ5LnNlYXJjaC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsImVhY2giLCJTdWJNZW51IiwidGhpcyIsIk1lbnUiLCJGdWxsSGVpZ2h0IiwicGVyZmVjdFNjcm9sbGJhciIsIndoZWVsUHJvcGFnYXRpb24iLCJDaGVja291dEhlaWdodCIsIkNoYW5nZVByaWNlIiwib2JqIiwiX29iaiIsIl9pdGVtcyIsImZpbmQiLCJfYXJyb3ciLCJfd2luZG93Iiwid2luZG93IiwidGltZW91dCIsIl9zdGFydFdpbldpZHRoIiwid2lkdGgiLCJfYWRkRXZlbnRzIiwib24iLCJyZXNpemUiLCJyZW1vdmVDbGFzcyIsImpRdWVyeSIsImN1ckl0ZW0iLCJwYXJlbnQiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwiY2xpY2siLCJwYXJlbnRzIiwic3ViTWVudSIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJtb3VzZWVudGVyIiwiaW5uZXJXaWR0aCIsIm9mZnNldCIsImxlZnQiLCJjc3MiLCItd2Via2l0LXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInBvc2l0aW9uIiwiY2xlYXJUaW1lb3V0IiwiZGF0YSIsInNldFRpbWVvdXQiLCJjb25zb2xlIiwibG9nIiwidGV4dCIsIm5hbWUiLCJhdHRyIiwic3JjIiwiaHJlZiIsInByaWNlIiwib25TYWxlIiwib2xkUHJpY2UiLCJfaW5pdCIsIl9sYXN0UG9zIiwic2l0ZVNjcm9sbFRvcCIsIl9zZWxmIiwiX21lbnUiLCJfYWN0aW9uIiwiX2hlYWRlciIsIl9oaWRkZW5CbG9ja01lbnUiLCJfaGVhZGVySGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJfc2hvd0J0biIsIl9jbG9zZUJ0biIsIl9zZWFyY2giLCJfb3BlblNlYXJjaCIsIl9jbG9zZVNlYXJjaCIsIl9nZXRGcmVlIiwiX3NpdGUiLCJfZG9tIiwiZG9jdW1lbnQiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbmNlbEJ1YmJsZSIsIl9jbG9zZVNlYXJjaEJveCIsIl9vcGVuTWVudSIsIl9jbG9zZU1lbnUiLCJfb3BlblNlYXJjaEJveCIsInNjcm9sbCIsImUiLCJfZml4ZWRIZWFkZXIiLCJzY3JvbGxUb3AiLCJET01Nb3VzZVNjcm9sbCIsImRlbHRhIiwib3JpZ2luYWxFdmVudCIsImRldGFpbCIsImRpcmVjdGlvbiIsIl9jaGVja1Njcm9sbCIsIm1vdXNld2hlZWwiLCJ3aGVlbERlbHRhIiwidG91Y2htb3ZlIiwiY3VycmVudFBvcyIsInRvdWNoZXMiLCJjbGllbnRZIiwia2V5ZG93biIsIndoaWNoIiwiaGVpZ2h0Iiwib3ZlcmZsb3cteSIsImVsZW0iLCJmb2N1c291dCIsIl9nbG9iYWxXaW5XaWR0aCIsIl9zZXRIZWlnaHQiLCJtaW5IZWlnaHQiLCJfdG90YWxPcmRlciIsIk51bWJlciIsInByb3RvdHlwZSIsImZvcm1hdE1vbmV5IiwiYyIsImQiLCJ0IiwibiIsImlzTmFOIiwiTWF0aCIsImFicyIsInVuZGVmaW5lZCIsInMiLCJpIiwiU3RyaW5nIiwicGFyc2VJbnQiLCJ0b0ZpeGVkIiwiaiIsImxlbmd0aCIsInN1YnN0ciIsInJlcGxhY2UiLCJzbGljZSIsInZhcmlhdGlvbiIsImNvdW50ZXIiLCIkdmFsdWUiLCJ2YWwiLCJzeW1ib2wiLCJwYXJzZUZsb2F0Iiwic3BsaXQiLCJqb2luIiwiJHVwc2VsbHMiLCJzZWxlY3QiLCJodG1sIiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfdGltZXIiLCJfY2VudGVyV3JhcCIsInRvcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicGFkZGluZ1JpZ2h0IiwiX29uRXZlbnRzIiwiX3Nob3ciLCJfc2V0UG9wdXBDb250ZW50IiwiY3VyQ29udGVudCIsImZpbHRlciIsImRpc3BsYXkiLCJNYWluU2xpZGVyIiwiX2l0ZW1zV3JhcCIsIl9wYWdpbmF0aW9uIiwiX3ByZXYiLCJfbmV4dCIsInNsaWNrIiwiY3VycmVudFNsaWRlIiwiJHNsaWRlcyIsIl9pbml0U2xpZGVyIiwiZG90cyIsImF1dG9wbGF5IiwiYXV0b3BsYXlTcGVlZCIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsImFwcGVuZERvdHMiLCJTZWFyY2giLCJfaW5wdXQiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiX3BhdGgiLCJzdWdnZXN0U2VsZWN0ZWQiLCJjb3VudEl0ZW1zIiwidmFsdWVJbnB1dCIsIl9yZXN1bHQiLCJrZXl1cCIsIkkiLCJrZXlDb2RlIiwic3VibWl0IiwiX2FqYXhSZXF1ZXN0IiwibG9jYXRpb24iLCJyZW1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsIl9rZXlBY3RpdmF0ZSIsImN1clRleHQiLCJ0cmlnZ2VyIiwiZXEiLCJfYWRkRGF0YSIsImNhdGVnb3JpZXMiLCJjYXRlZ29yaWVzQXZhaWxhYmlsaXR5IiwicHJvZHVjdHMiLCJwcm9kdWN0c0F2YWlsYWJpbGl0eSIsImFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsInByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsImZsYWciLCJwcm9kdWN0c1dyYXAiLCJwcm9kdWN0IiwicHVzaCIsIm1haW5DYXRlZ29yeSIsInVybE1haW5DYXRlZ29yeSIsInN1YmNhdGVnb3JpZXMiLCJ1cmxTdWJjYXRlZ29yaWVzIiwicmVzdWx0U3RyIiwic3ViY2F0ZWdvcmllc1dyYXAiLCJ1cmxDYXRlZ29yeSIsInoiLCJpbmRleE9mIiwiY291bnQiLCJpbnB1dCIsImFib3J0IiwiYWpheCIsInVybCIsInZhbHVlIiwiYWN0aW9uIiwiZGF0YVR5cGUiLCJ0eXBl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QjdCLE1BdkJBd0UsR0FBU3lDLFFBQ1R6QyxFQUFXekwsRUFBRW1PLE1BQ1RDLElBQUt6QyxFQUNMaEosTUFDSTBMLE1BQU9KLEVBQU05RixNQUNibUcsT0FBTyxlQUVYQyxTQUFVLE9BQ1ZDLEtBQU0sTUFDTkMsUUFBUyxTQUFXQyxHQUVlLEdBQTNCQyxPQUFPQyxLQUFLRixHQUFLOUcsUUFDakJnRixFQUFVOEIsSUFJbEJHLE1BQU8sU0FBVW5ELEdBQ29CLFNBQTdCQSxFQUFlb0QsWUFDZmpNLFFBQVFDLElBQUksYUFLakIsR0FFWFMsRUFBUSxXQUNKbkMsSUFPUm1DIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICB2YXIgZ2xvYmFsU2Nyb2xsRmxhZyA9IHRydWU7XHJcblxyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICQoJy5zaXRlX19tZW51JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgU3ViTWVudSggJCh0aGlzKSApO1xyXG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQoJy5ub3QtZm91bmQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBGdWxsSGVpZ2h0KCAkKHRoaXMpICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJCgnLmNvbmZpcm1hdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IEZ1bGxIZWlnaHQoICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkKCcjd3BzbC1zdG9yZXMnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICQodGhpcykucGVyZmVjdFNjcm9sbGJhcih7XHJcbiAgICAgICAgICAgICAgICB3aGVlbFByb3BhZ2F0aW9uOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQoJy5jaGVja291dCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IENoZWNrb3V0SGVpZ2h0KCAkKHRoaXMpICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJCgnLnByb2R1Y3RfX2l0ZW1zJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgQ2hhbmdlUHJpY2UoICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIH0gKTtcclxuXHJcbiAgICB2YXIgU3ViTWVudSA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX2l0ZW1zID0gX29iai5maW5kKCcuc2l0ZV9fbWVudS1pdGVtJyksXHJcbiAgICAgICAgICAgIF9hcnJvdyA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUtaWNvbicpLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxyXG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbCxcclxuICAgICAgICAgICAgX3N0YXJ0V2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfc3RhcnRXaW5XaWR0aCA+IF93aW5kb3cud2lkdGgoKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhcnRXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd2luZG93LmZpbmQoJy5vcGVuZWQnKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnNpdGVfX21lbnUtaWNvbicsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggalF1ZXJ5KHdpbmRvdykud2lkdGgoKSA8IDEwMDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGpRdWVyeSh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGN1ckl0ZW0ucGFyZW50KCdsaScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJlbnQuaGFzQ2xhc3MoJ29wZW5lZCcpICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5hZGRDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgX2Fycm93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0galF1ZXJ5KHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnRzKCdsaScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudSA9IHBhcmVudC5maW5kKCcuc2l0ZV9fbWVudS1zdWInKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJlbnQuaGFzQ2xhc3MoJ29wZW5lZCcpICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuc2xpZGVVcCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5hZGRDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5zbGlkZURvd24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfaXRlbXMub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZWVudGVyOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnQoJ3VsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uaGFzQ2xhc3MoJ3NpdGVfX21lbnUtaXRlbV9zdWInKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJNZW51ID0gY3VySXRlbS5maW5kKCcuc2l0ZV9fbWVudS1zdWInKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICggX3dpbmRvdy53aWR0aCgpIC0gKCBzdWJNZW51LmlubmVyV2lkdGgoKSArIGN1ckl0ZW0ub2Zmc2V0KCkubGVmdCApICkgPCAwICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICggKCBjdXJJdGVtLm9mZnNldCgpLmxlZnQgKyBjdXJJdGVtLmlubmVyV2lkdGgoKSApIC0gc3ViTWVudS5pbm5lcldpZHRoKCkgKSA8IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnNTAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgtNTAlKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKC01MCUpJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGN1ckl0ZW0ucG9zaXRpb24oKS5sZWZ0IC0gc3ViTWVudS5pbm5lcldpZHRoKCkgKyBjdXJJdGVtLmlubmVyV2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBjdXJJdGVtLnBvc2l0aW9uKCkubGVmdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICQoJ1tkYXRhLXByb2R1Y3RdJykub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZWVudGVyOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmVhdHVyZWQtcHJvZHVjdF9fbG9hZGluZycpLmFkZENsYXNzKCd2aXNpYmxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBjdXJJdGVtLmRhdGEoJ3Byb2R1Y3QnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmKCAkKCcuZmVhdHVyZWQtcHJvZHVjdF9fbG9hZGluZycpLmhhc0NsYXNzKCd2aXNpYmxlJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3RpdGxlJykudGV4dChkYXRhLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3BpYyBpbWcnKS5hdHRyKCdzcmMnLCBkYXRhLnNyYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuYnRuJykuYXR0cignaHJlZicsIGRhdGEuaHJlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2Ugc3BhbicpLnRleHQoZGF0YS5wcmljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggZGF0YS5vblNhbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3JlbWFyaycpLmFkZENsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3JlbWFyaycpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBkYXRhLm9sZFByaWNlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSBkZWwnKS50ZXh0KGRhdGEub2xkUHJpY2UgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2UgZGVsJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDE2MCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmVhdHVyZWQtcHJvZHVjdF9fbG9hZGluZycpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm9wZW5lZCcpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9vYmouZmluZCgndWwnKS5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5vcGVuZWQnKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2xpJykub24oICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX21lbnUgPSBvYmosXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgIF9hY3Rpb24gPSBmYWxzZSxcclxuICAgICAgICAgICAgX2FjdGlvblNjcm9sbCA9IGZhbHNlLFxyXG4gICAgICAgICAgICBfbGFzdFBvcyxcclxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcclxuICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudSA9ICQoJy5zaXRlX19oaWRkZW4taXRlbXMnKSxcclxuICAgICAgICAgICAgX2hlYWRlckhlaWdodCA9IF9oZWFkZXIuaW5uZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgX3Nob3dCdG4gPSAkKCcuc2l0ZV9faGVhZGVyLWJ0bicpLFxyXG4gICAgICAgICAgICBfY2xvc2VCdG4gPSAkKCcuc2l0ZV9faGlkZGVuLWNsb3NlJyksXHJcbiAgICAgICAgICAgIF9zZWFyY2ggPSAkKCcuc2VhcmNoJyksXHJcbiAgICAgICAgICAgIF9vcGVuU2VhcmNoID0gJCgnLnNlYXJjaC1idG4nKSxcclxuICAgICAgICAgICAgX2Nsb3NlU2VhcmNoID0gJCgnLnNlYXJjaF9fY2FuY2VsJyksXHJcbiAgICAgICAgICAgIF9nZXRGcmVlID0gJCgnLnNpdGVfX2hpZGRlbi1idG4nKSxcclxuICAgICAgICAgICAgX3NpdGUgPSAkKCcuc2l0ZScpLFxyXG4gICAgICAgICAgICBfZG9tID0gJCggJ2h0bWwnICksXHJcbiAgICAgICAgICAgIHNpdGVTY3JvbGxUb3AsXHJcbiAgICAgICAgICAgIF9jb250ZW50ID0gJCgnLnNpdGVfX2NvbnRlbnQnKSxcclxuICAgICAgICAgICAgX2xhc3RTY3JvbGxUb3AgPSAwO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICBcIi5zZWFyY2hcIixcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiggZXZlbnQgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICBcImJvZHlcIixcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlU2VhcmNoQm94KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3Nob3dCdG4ub24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoJCh0aGlzKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgX2Nsb3NlQnRuLm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIF9vcGVuU2VhcmNoLm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5TZWFyY2hCb3goJCh0aGlzKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgX2Nsb3NlU2VhcmNoLm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlU2VhcmNoQm94KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCBlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZml4ZWRIZWFkZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbiA9IF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX2hlYWRlckhlaWdodDtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA9PSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgRE9NTW91c2VTY3JvbGw6IGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKGRlbHRhID4gMCkgPyAxIDogLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKGRpcmVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2V3aGVlbDogZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKGRlbHRhID4gMCkgPyAtMSA6IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKGRpcmVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdG91Y2htb3ZlOiBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQb3MgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5jbGllbnRZO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQb3MgPiBfbGFzdFBvcykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UG9zIDwgX2xhc3RQb3MpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGFzdFBvcyA9IGN1cnJlbnRQb3M7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLndoaWNoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM0IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM1IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM2IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpPj0xMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zaXRlLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3NpdGUuaGVpZ2h0KCkgPiBfd2luZG93LmhlaWdodCgpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZG9tLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPiAwICYmICFfaGVhZGVyLmhhc0NsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJykgJiYgIV9zaG93QnRuLmhhc0NsYXNzKCdvcGVuZWQnKSAmJiBfYWN0aW9uICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPCAwICYmIF9oZWFkZXIuaGFzQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKSAmJiAhX3Nob3dCdG4uaGFzQ2xhc3MoJ29wZW5lZCcpICYmIF9hY3Rpb24gJiYgZ2xvYmFsU2Nyb2xsRmxhZykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2ZpeGVkSGVhZGVyID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfd2luZG93LnNjcm9sbFRvcCgpID4gX2hlYWRlckhlaWdodCArIDE1MCAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoJ2ZpeGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGVsZW07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1ckl0ZW0uaGFzQ2xhc3MoJ29wZW5lZCcpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUuYWRkQ2xhc3MoJ29wZW5lZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzaXRlU2Nyb2xsVG9wID0gX3dpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfc2l0ZS5oZWlnaHQoKSA+IF93aW5kb3cuaGVpZ2h0KCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdzY3JvbGwnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NpdGUuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb3BlblNlYXJjaEJveCA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBlbGVtO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJJdGVtLmhhc0NsYXNzKCdvcGVuZWQnKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBfc2VhcmNoLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBfZ2V0RnJlZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlYXJjaC5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2dldEZyZWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jbG9zZU1lbnUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3Nob3dCdG4ucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICBfc2VhcmNoLmZpbmQoJ2lucHV0JykuZm9jdXNvdXQoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgX3NpdGUuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcnXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfc2l0ZS5oZWlnaHQoKSA+IF93aW5kb3cuaGVpZ2h0KCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF93aW5kb3cuc2Nyb2xsVG9wKCBzaXRlU2Nyb2xsVG9wICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgMTApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2Nsb3NlU2VhcmNoQm94ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vcGVuU2VhcmNoLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgIF9zZWFyY2gucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgX2dldEZyZWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfbWVudVswXS5vYmogPSBfc2VsZjtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9maXhlZEhlYWRlcigpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuICAgIHZhciBGdWxsSGVpZ2h0ID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxyXG4gICAgICAgICAgICBfZ2xvYmFsV2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX2dsb2JhbFdpbldpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAnJ1xyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IF93aW5kb3cuaGVpZ2h0KCkgLSAkKCcuc2l0ZV9faGVhZGVyJykuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19mb290ZXInKS5pbm5lckhlaWdodCgpIC0gJCgnLmJyZWFkY3J1bWJzJykuaW5uZXJIZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuICAgIHZhciBDaGVja291dEhlaWdodCA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX3RvdGFsT3JkZXIgPSBfb2JqLmZpbmQoJy50b3RhbC1vcmRlcicpO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG5cclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogX3RvdGFsT3JkZXIuaW5uZXJIZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgQ2hhbmdlUHJpY2UgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIE51bWJlci5wcm90b3R5cGUuZm9ybWF0TW9uZXkgPSBmdW5jdGlvbihjLCBkLCB0KXtcclxuICAgICAgICAgICAgdmFyIG4gPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgYyA9IGlzTmFOKGMgPSBNYXRoLmFicyhjKSkgPyAyIDogYyxcclxuICAgICAgICAgICAgICAgIGQgPSBkID09IHVuZGVmaW5lZCA/IFwiLlwiIDogZCxcclxuICAgICAgICAgICAgICAgIHQgPSB0ID09IHVuZGVmaW5lZCA/IFwiLFwiIDogdCxcclxuICAgICAgICAgICAgICAgIHMgPSBuIDwgMCA/IFwiLVwiIDogXCJcIixcclxuICAgICAgICAgICAgICAgIGkgPSBTdHJpbmcocGFyc2VJbnQobiA9IE1hdGguYWJzKE51bWJlcihuKSB8fCAwKS50b0ZpeGVkKGMpKSksXHJcbiAgICAgICAgICAgICAgICBqID0gKGogPSBpLmxlbmd0aCkgPiAzID8gaiAlIDMgOiAwO1xyXG4gICAgICAgICAgICByZXR1cm4gcyArIChqID8gaS5zdWJzdHIoMCwgaikgKyB0IDogXCJcIikgKyBpLnN1YnN0cihqKS5yZXBsYWNlKC8oXFxkezN9KSg/PVxcZCkvZywgXCIkMVwiICsgdCkgKyAoYyA/IGQgKyBNYXRoLmFicyhuIC0gaSkudG9GaXhlZChjKS5zbGljZSgyKSA6IFwiXCIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICQoJy52YXJpYXRpb25zX2Zvcm0nKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIHZhciB2YXJpYXRpb24gPSAkKCcudmFyaWF0aW9ucycpLmZpbmQoJ3NlbGVjdCcpLFxyXG4gICAgICAgICAgICAgICBjb3VudGVyID0gMDtcclxuXHJcblxyXG4gICAgICAgICAgIHZhcmlhdGlvbi5lYWNoKGZ1bmN0aW9uICgkdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgaWYoJCggdGhpcyApLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICBjb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICBpZihjb3VudGVyID09PSB2YXJpYXRpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgIHZhciBwcmljZSA9ICQoJy5wcmljZT5zcGFuJykudGV4dCgpLFxyXG4gICAgICAgICAgICAgICAgICAgc3ltYm9sID0gJCgnLnByaWNlPnNwYW4+c3BhbicpLnRleHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgIHByaWNlID0gcGFyc2VGbG9hdCgocHJpY2Uuc2xpY2UoMSkuc3BsaXQoJywnKSkuam9pbignJykpO1xyXG5cclxuICAgICAgICAgICAgICAgJHVwc2VsbHMgPSAkKCcudmFyaWF0aW9uc19mb3JtPi53ZWJzdGVycy1zZWxlY3QnKS5maW5kKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgJHVwc2VsbHMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ID0gJCggdGhpcyApLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIGlmKHNlbGVjdCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCQodGhpcykudmFsKCkgPT09IHNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2UgKz0gJCh0aGlzKS5kYXRhKCdwcmljZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAkKCcucHJpY2UnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgICAgICAgICAkKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2U+c3Ryb25nJykuaHRtbCgnPHNwYW4+JytzeW1ib2wrJzwvc3Bhbj4nK3ByaWNlLmZvcm1hdE1vbmV5KDIsICcuJywgJywnKSk7XHJcblxyXG4gICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbn0gKSgpO1xyXG5cclxuIiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICQoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IFBvcHVwKCQodGhpcykpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxyXG4gICAgICAgICAgICBfYnRuU2hvdyA9ICAkKCAnLnBvcHVwX19vcGVuJyApLFxyXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcclxuICAgICAgICAgICAgX3dyYXAgPSBfb2JqLmZpbmQoICcucG9wdXBfX3dyYXAnICksXHJcbiAgICAgICAgICAgIF9jb250ZW50cyA9IF9vYmouZmluZCggJy5wb3B1cF9fY29udGVudCcgKSxcclxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfY2VudGVyV3JhcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2hpZGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93KCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnICkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9jb250ZW50cy5maW5kKCc+ZGl2Jykub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XHJcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xyXG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbn0gKSgpO1xyXG5cclxuIiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAkKCcubWFpbi1zbGlkZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBNYWluU2xpZGVyKCAkKHRoaXMpICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIE1haW5TbGlkZXIgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgIF9pdGVtc1dyYXAgPSBfb2JqLmZpbmQoJy5tYWluLXNsaWRlcl9faXRlbXMnKSxcclxuICAgICAgICAgICAgX3BhZ2luYXRpb24gPSBfb2JqLmZpbmQoJy5zd2lwZXItcGFnaW5hdGlvbicpLFxyXG4gICAgICAgICAgICBfcHJldiA9IF9vYmouZmluZCgnLm1haW4tc2xpZGVyX19jb25zdHJvbHMgLnN3aXBlci1idXR0b24tcHJldicpLFxyXG4gICAgICAgICAgICBfbmV4dCA9IF9vYmouZmluZCgnLm1haW4tc2xpZGVyX19jb25zdHJvbHMgLnN3aXBlci1idXR0b24tbmV4dCcpLFxyXG4gICAgICAgICAgICBfZ2xvYmFsV2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9pdGVtc1dyYXAub24oJ2luaXQnLCBmdW5jdGlvbihzbGljaykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfaXRlbXNXcmFwLmZpbmQoJy5zbGljay1jdXJyZW50JykuZmluZCgnLm1haW4tc2xpZGVyX19jb250ZW50JykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2l0ZW1zV3JhcC5vbignYWZ0ZXJDaGFuZ2UnLCBmdW5jdGlvbihzbGljaywgY3VycmVudFNsaWRlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoY3VycmVudFNsaWRlLiRzbGlkZXMpLmZpbmQoJy5tYWluLXNsaWRlcl9fY29udGVudCcpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50U2xpZGUuJHNsaWRlcykuZmlsdGVyKCcuc2xpY2stY3VycmVudCcpLmZpbmQoJy5tYWluLXNsaWRlcl9fY29udGVudCcpLmFkZENsYXNzKCd2aXNpYmxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZ2xvYmFsV2luV2lkdGggPCBfd2luZG93LndpZHRoKCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2luV2lkdGggPSBfd2luZG93LndpZHRoKCkgLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCggJy5tYWluLXNsaWRlcl9faXRlbScgKS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCAnLm1haW4tc2xpZGVyX19pdGVtJyApLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogX2l0ZW1zV3JhcC5oZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXRTbGlkZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfaXRlbXNXcmFwLnNsaWNrKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheVNwZWVkOiA1MDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZBcnJvdzogX3ByZXYsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEFycm93OiBfbmV4dCxcclxuICAgICAgICAgICAgICAgICAgICBhcHBlbmREb3RzOiAgX3BhZ2luYXRpb25cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICcubWFpbi1zbGlkZXJfX2l0ZW0nICkuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiBfaXRlbXNXcmFwLmhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9pbml0U2xpZGVyKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbn0gKSgpO1xyXG4iLCIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICQoJy5zZWFyY2gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBTZWFyY2goICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIH0gKTtcclxuXHJcbiAgICB2YXIgU2VhcmNoID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfaW5wdXQgPSBfb2JqLmZpbmQoJ2lucHV0W3R5cGU9c2VhcmNoXScpLFxyXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxyXG4gICAgICAgICAgICBfcGF0aCA9IF9vYmouZGF0YSgncGF0aCcpLFxyXG4gICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwLFxyXG4gICAgICAgICAgICBjb3VudEl0ZW1zID0gMCxcclxuICAgICAgICAgICAgdmFsdWVJbnB1dCA9IF9pbnB1dC52YWwoKSxcclxuICAgICAgICAgICAgX3Jlc3VsdCA9IF9vYmouZmluZCgnLnNlYXJjaF9fcmVzdWx0Jyk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbihJKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goSS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVJbnB1dCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggdmFsdWVJbnB1dC5sZW5ndGggPj0gX29iai5kYXRhKCdzeW1ib2xzJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FqYXhSZXF1ZXN0KCAkKHRoaXMpLCB2YWx1ZUlucHV0Lmxlbmd0aCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS52YWwoKSA9PSAnJyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uKEkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcudG9wLXByb2R1Y3RzJykuaHRtbCgnJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICQod2luZG93KS53aWR0aCgpID49IDEwMjQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKCBJLmtleUNvZGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9vYmouZGF0YSgnYWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5maW5kKCdhJykuYXR0cignaHJlZicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY291bnRJdGVtcyA+IDAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9rZXlBY3RpdmF0ZSggSS5rZXlDb2RlICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHN1Z2dlc3RTZWxlY3RlZCA9PSBjb3VudEl0ZW1zKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5jbGljayggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJib2R5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICBcIi5zZWFyY2hfX2ZvdW5kIGxpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSBjdXJJdGVtLmZpbmQoJ2EnKS50ZXh0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKGN1clRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxyXG4gICAgICAgICAgICAgICAgICAgIFwia2V5ZG93blwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiLnNlYXJjaF9fZm91bmQgbGlcIixcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihJKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKEkua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9rZXlBY3RpdmF0ZSA9IGZ1bmN0aW9uKG4pIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBfb2JqLnBhcmVudHMoKS5oYXNDbGFzcygnc2l0ZV9fZm9vdGVyJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBuID09IDM4ICYmIHN1Z2dlc3RTZWxlY3RlZCA8IGNvdW50SXRlbXMgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbiA9PSA0MCAmJiBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkLS07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggLTEgLSAoc3VnZ2VzdFNlbGVjdGVkIC0gMSkgKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggLTEgLSAoc3VnZ2VzdFNlbGVjdGVkIC0gMSkgKS5maW5kKCdhJykudGV4dCgpICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCB2YWx1ZUlucHV0ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggbiA9PSA0MCAmJiBzdWdnZXN0U2VsZWN0ZWQgPCBjb3VudEl0ZW1zICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG4gPT0gMzggJiYgc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZC0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIHN1Z2dlc3RTZWxlY3RlZCA+IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZXEoIHN1Z2dlc3RTZWxlY3RlZCAtIDEgKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggc3VnZ2VzdFNlbGVjdGVkIC0gMSApLmZpbmQoJ2EnKS50ZXh0KCkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIHZhbHVlSW5wdXQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWRkRGF0YSA9IGZ1bmN0aW9uKCBkYXRhICkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgPSBjYXRlZ29yaWVzLmxlbmd0aCAhPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzID0gZGF0YS5wcm9kdWN0cyxcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0F2YWlsYWJpbGl0eSA9IHByb2R1Y3RzLmxlbmd0aCAhPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybFByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0F2YWlsYWJpbGl0eSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzV3JhcCA9ICc8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX193cmFwXCI+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBwcm9kdWN0cywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c1dyYXAgKz0gJzxkaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvcC1wcm9kdWN0c19faXRlbVwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19waWNcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnKyBwcm9kdWN0LnNyYyArJylcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidG9wLXByb2R1Y3RzX19wcmljZVwiPjxkZWw+JysgcHJvZHVjdC5vbGRQcmljZSArJzwvZGVsPiAnKyBwcm9kdWN0LnByaWNlICsnPC9zcGFuPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2l0ZW0tdGl0bGVcIj4nKyBwcm9kdWN0Lm5hbWUgKyc8L2gzPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJysgcHJvZHVjdC5ocmVmICsnXCIgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2J0blwiPnZpZXc8L2E+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggIWNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goIFtwcm9kdWN0LmNhdGVnb3JpZXMubWFpbkNhdGVnb3J5LCBwcm9kdWN0LmNhdGVnb3JpZXMudXJsTWFpbkNhdGVnb3J5LCBwcm9kdWN0LmNhdGVnb3JpZXMuc3ViY2F0ZWdvcmllcywgcHJvZHVjdC5jYXRlZ29yaWVzLnVybFN1YmNhdGVnb3JpZXNdICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNXcmFwICs9ICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdicpLmVxKDEpLmZpbmQoJy50b3AtcHJvZHVjdHMnKS5odG1sKCc8aDIgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3RpdGxlXCI+VG9wIFByb2R1Y3RzPC9oMj4nICsgcHJvZHVjdHNXcmFwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdFN0ciA9ICc8dWwgY2xhc3M9XCJzZWFyY2hfX2ZvdW5kXCI+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goIGNhdGVnb3JpZXMsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJjYXRlZ29yaWVzID0gdGhpcy5zdWJjYXRlZ29yaWVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybFN1YmNhdGVnb3JpZXMgPSB0aGlzLnVybFN1YmNhdGVnb3JpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgPSAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggc3ViY2F0ZWdvcmllcyAhPSB1bmRlZmluZWQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciggdmFyIGkgPSAwOyBpIDw9IHN1YmNhdGVnb3JpZXMubGVuZ3RoLTE7IGkrKyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICc8bGkgY2xhc3M9XCJzZWFyY2hfX2ZvdW5kLXN1YlwiPjxhIGhyZWY9XCInKyB1cmxTdWJjYXRlZ29yaWVzW2ldICsnXCI+JyArIHN1YmNhdGVnb3JpZXNbaV0gKyAnPC9hPjwvbGk+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzxsaT48YSBocmVmPVwiJysgdGhpcy51cmxDYXRlZ29yeSArJ1wiPicrIHRoaXMubmFtZSArJzwvYT48L2xpPicrIHN1YmNhdGVnb3JpZXNXcmFwICsnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8PSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTE7IGkrKyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggZmxhZyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVswXSAhPSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMF0gKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIHogPSAwOyB6IDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXS5sZW5ndGgtMTsgeisrICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5pbmRleE9mKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0pID09IC0xICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5wdXNoKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0gKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPD0gcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xOyBpKysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcmllc1dyYXAgPSAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKCB2YXIgeiA9IDA7IHogPD0gcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdLmxlbmd0aC0xOyB6KysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVszXVt6XSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdW3pdICsgJzwvYT48L2xpPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzxsaT48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsxXSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzBdICsgJzwvYT48L2xpPicrIHN1YmNhdGVnb3JpZXNXcmFwICsnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzwvdWw+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCdkaXY6Zmlyc3QnKS5odG1sKHJlc3VsdFN0cik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaTpub3QoOmx0KDExKSknKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRJdGVtcyA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaScpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5hZGRDbGFzcygndmlzaWJsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hamF4UmVxdWVzdCA9ICBmdW5jdGlvbiggaW5wdXQsIG4gKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBfcGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpbnB1dC52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOidtYWluX3NlYXJjaCdcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBPYmplY3Qua2V5cyhtc2cpLmxlbmd0aCAhPSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FkZERhdGEoIG1zZyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChYTUxIdHRwUmVxdWVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSBcImFib3J0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbn0gKSgpOyJdfQ==
