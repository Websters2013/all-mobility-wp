!function(){var e=!0;$(function(){$(".site__menu").each(function(){new n($(this)),new i($(this))}),$(".not-found").each(function(){new t($(this))}),$(".confirmation").each(function(){new t($(this))}),$("#wpsl-stores").each(function(){$(this).perfectScrollbar({wheelPropagation:!0})}),$(".checkout").each(function(){new o($(this))})});var n=function(e){var n=e,i=n.find(".site__menu-item"),t=n.find(".site__menu-icon"),o=$(window),s=null,d=o.width(),a=function(){o.on({resize:function(){d>o.width()&&(d=o.width(),o.find(".opened").removeClass("opened"))}}),$("body").on("click",".site__menu-icon",function(){if(jQuery(window).width()<1e3){var e=jQuery(this),n=e.parent("li");n.hasClass("opened")?n.removeClass("opened"):n.addClass("opened")}return!1}),t.on({click:function(){var e=jQuery(this),n=e.parents("li"),i=n.find(".site__menu-sub");return o.width()<1024&&(n.hasClass("opened")?(n.removeClass("opened"),i.slideUp()):(n.addClass("opened"),i.slideDown())),!1}}),i.on({mouseenter:function(){if(o.width()>=1024){var e=$(this);e.parent("ul");if(e.hasClass("site__menu-item_sub")){e.addClass("opened");var n=e.find(".site__menu-sub");o.width()-(n.innerWidth()+e.offset().left)<0?e.offset().left+e.innerWidth()-n.innerWidth()<0?n.css({left:"50%","-webkit-transform":"translateX(-50%)",transform:"translateX(-50%)"}):n.css({left:e.position().left-n.innerWidth()+e.innerWidth()}):n.css({left:e.position().left})}}}}),$("[data-product]").on({mouseenter:function(){if(o.width()>=1024){$(".featured-product__loading").addClass("visible"),s&&(clearTimeout(s),s=null);var e=$(this),i=e.data("product");s=setTimeout(function(){n.find(".featured-product").find(".featured-product__title").text(i.name),n.find(".featured-product").find(".featured-product__pic img").attr("src",i.src),n.find(".featured-product").find(".btn").attr("href",i.href),n.find(".featured-product").find(".featured-product__price span").text(i.price),i.onSale?n.find(".featured-product").find(".featured-product__remark").addClass("visible"):n.find(".featured-product").find(".featured-product__remark").removeClass("visible"),i.oldPrice?n.find(".featured-product").find(".featured-product__price del").text(i.oldPrice):n.find(".featured-product").find(".featured-product__price del").addClass("hidden")},160),s=setTimeout(function(){$(".featured-product__loading").removeClass("visible")},200)}}}),n.on("mouseleave",function(){o.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("ul").on("mouseleave",function(){o.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("li").on("mouseleave",function(){o.width()>=1024&&$(this).removeClass("opened")})},r=function(){a()};r()},i=function(n){var i,t,o=this,s=n,d=$(window),a=!1,r=$(".site__header"),c=$(".site__hidden-items"),u=r.innerHeight(),f=$(".site__header-btn"),l=$(".site__hidden-close"),h=$(".search"),p=$(".search-btn"),_=$(".search__cancel"),m=$(".site__hidden-btn"),v=$(".site"),C=$("html"),w=($(".site__content"),function(){$(document).on("click",".search",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click","body",function(){H()}),f.on({click:function(){k($(this))}}),l.on({click:function(){return y(),!1}}),p.on({click:function(){return T($(this)),!1}}),_.on({click:function(){return H(),!1}}),d.on({scroll:function(e){g(),a=d.scrollTop()>=u,0==d.scrollTop()&&r.removeClass("site__header_hidden")},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var i=n>0?1:-1;b(i)}},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var i=n>0?-1:1;b(i)}},touchmove:function(e){var n=e.originalEvent.touches[0].clientY;n>i?b(-1):n<i&&b(1),i=n},keydown:function(e){switch(e.which){case 32:b(1);break;case 33:b(-1);break;case 34:b(1);break;case 35:b(1);break;case 36:b(-1);break;case 38:b(-1);break;case 40:b(1);break;default:return}},resize:function(){d.width()>=1024&&(v.css({height:""}),setTimeout(function(){v.height()>d.height()&&C.css({"overflow-y":""})},10))}})}),b=function(n){n>0&&!r.hasClass("site__header_hidden")&&!f.hasClass("opened")&&a&&r.addClass("site__header_hidden"),n<0&&r.hasClass("site__header_hidden")&&!f.hasClass("opened")&&a&&e&&r.removeClass("site__header_hidden")},g=function(){d.scrollTop()>u+150?r.addClass("fixed"):r.removeClass("fixed")},k=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),c.removeClass("opened")):(n.addClass("opened"),c.addClass("opened")),t=d.scrollTop(),setTimeout(function(){v.height()>d.height()&&C.css({"overflow-y":"scroll"}),setTimeout(function(){v.css({height:"100%"})},10)},300)},T=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),h.removeClass("active"),m.removeClass("hidden")):(n.addClass("opened"),h.addClass("active"),m.addClass("hidden"))},y=function(){f.removeClass("opened"),c.removeClass("opened"),h.find("input").focusout(),v.css({height:""}),setTimeout(function(){v.height()>d.height()&&C.css({"overflow-y":""}),d.scrollTop(t)},10)},H=function(){p.removeClass("opened"),h.removeClass("active"),m.removeClass("hidden")},x=function(){s[0].obj=o,w(),g()};x()},t=function(e){var n=e,i=$(window),t=i.width(),o=function(){i.on({resize:function(){t!=i.width()&&(t=i.width(),s())}})},s=function(){n.css({minHeight:""}),n.css({minHeight:i.height()-$(".site__header").innerHeight()-$(".site__footer").innerHeight()-$(".breadcrumbs").innerHeight()})},d=function(){o(),s()};d()},o=function(e){var n=e,i=n.find(".total-order"),t=function(){},o=function(){n.css({minHeight:i.innerHeight()})},s=function(){t(),o()};s()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return v($(this).attr("data-popup")),!1}}),u.find(">div").on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},v=function(o){m(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$(".main-slider").each(function(){new i($(this))})});var i=function(i){var n,e=i,t=$(window),s=e.find(".swiper-slide"),o=t.width(),d=function(){t.on({resize:function(){o<t.width()&&(o=t.width()-1,s.css({minHeight:""}),e.find(".swiper-slide").css({minHeight:$(".swiper-container").height()}))}})},a=function(){n=new Swiper(e.find(".swiper-container"),{pagination:e.find(".swiper-pagination"),paginationClickable:!0,speed:600,loop:!0,loopedSlides:1,autoplay:5e3,touchRatio:2,autoplayDisableOnInteraction:!1,nextButton:e.find(".swiper-button-next"),prevButton:e.find(".swiper-button-prev"),onSlideChangeEnd:function(i){i.slides.find(".main-slider__content").removeClass("visible"),i.slides.eq(i.activeIndex).find(".main-slider__content").addClass("visible")}}),e.find(".swiper-slide").css({minHeight:$(".swiper-container").height()})},r=function(){d(),a()};r()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var t=e,i=t.find("input[type=search]"),a=new XMLHttpRequest,s=t.data("path"),n=0,o=0,r=i.val(),c=t.find(".search__result"),l=function(){i.on({keyup:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:0==c.find(".search__found li").filter(".active").length&&t.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var i=$(this).val();i.length>=t.data("symbols")?u($(this),i.length):""==$(this).val()&&(c.removeClass("visible"),n=0)}},keydown:function(e){if(c.find(".search__found").html(""),c.find(".top-products").html(""),n=0,$(window).width()>=1024)switch(e.keyCode){case 13:return 0==c.find(".search__found li").filter(".active").length?window.location.href=t.data("action"):window.location.href=c.find(".search__found li").filter(".active").find("a").attr("href"),!1;case 27:return c.remove(),n=0,!1;case 38:case 40:e.preventDefault(),o>0&&(d(e.keyCode),n==o&&(n=0))}}}),$("html").click(function(){c.removeClass("visible"),n=0}),$(document).on("click","body",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click",".search__found li",function(){var e=$(this),t=e.find("a").text();i.val(t),c.removeClass("visible"),n=0}),$(document).on("keydown",".search__found li",function(e){switch(e.keyCode){case 13:$(this).trigger("click")}})},d=function(e){c.find(".search__found li").removeClass("active"),t.parents().hasClass("site__footer")?(38==e&&n<o?n++:40==e&&n>0&&n--,n>0?(c.find(".search__found li").eq(-1-(n-1)).addClass("active"),i.val(c.find(".search__found li").eq(-1-(n-1)).find("a").text())):i.val(r)):(40==e&&n<o?n++:38==e&&n>0&&n--,n>0?(c.find(".search__found li").eq(n-1).addClass("active"),i.val(c.find(".search__found li").eq(n-1).find("a").text())):i.val(r))},f=function(e){var e=e,t=e.categories,i=0!=t.length,a=e.products,s=0!=a.length,n=[],r=[],l=!0;if(s){var d='<div class="top-products__wrap">';$.each(a,function(){var e=this;d+='<div>                                                <div class="top-products__item">                                                    <div class="top-products__pic" style="background-image: url('+e.src+')">                                                    </div>                                                    <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                    <h3 class="top-products__item-title">'+e.name+'</h3>                                                    <a href="'+e.href+'" class="top-products__btn">view</a>                                                </div>                                            </div>',i||n.push([e.categories.mainCategory,e.categories.urlMainCategory,e.categories.subcategories,e.categories.urlSubcategories])}),d+="</div>",c.find("div").eq(1).find(".top-products").html('<h2 class="top-products__title">Top Products</h2>'+d);var f='<ul class="search__found">';if(i)$.each(t,function(){var e=this.subcategories,t=this.urlSubcategories,i="";if(void 0!=e){for(var a=0;a<=e.length-1;a++)i+='<li class="search__found-sub"><a href="'+t[a]+'">'+e[a]+"</a></li>";i+=""}f+='<li><a href="'+this.urlCategory+'">'+this.name+"</a></li>"+i});else{for(var u=0;u<=n.length-1;u++)if(l&&(r.push(n[u]),l=!1),r[r.length-1][0]!=n[u][0])r.push(n[u]);else for(var h=0;h<=n[u].length-1;h++)for(var v=0;v<=n[u][2].length-1;v++)r[r.length-1][2].indexOf(n[u][2][v])==-1&&r[r.length-1][2].push(n[u][2][v]);for(var _=0,u=0;u<=r.length-1;u++){for(var h=0;h<=r[u].length-1;h++){for(var p="",v=0;v<=r[u][2].length-1;v++)p+='<li class="search__found-sub"><a href="'+r[u][3][v]+'">'+r[u][2][v]+"</a></li>",_++;p+=""}f+='<li><a href="'+r[u][1]+'">'+r[u][0]+"</a></li>"+p}}f+="</ul>",c.find("div:first").html(f),c.find(".search__found").find("li:not(:lt(11))").remove(),o=c.find(".search__found").find("li").length,c.addClass("visible")}else c.removeClass("visible")},u=function(e,t){return a.abort(),a=$.ajax({url:s,data:{value:e.val(),action:"main_search"},dataType:"json",type:"get",success:function(e){0!=Object.keys(e).length&&f(e)},error:function(e){"abort"!=e.statusText&&console.log("Error")}}),!1},h=function(){l()};h()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5LmluZGV4LmpzIiwianF1ZXJ5LnNlYXJjaC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsImVhY2giLCJTdWJNZW51IiwidGhpcyIsIk1lbnUiLCJGdWxsSGVpZ2h0IiwicGVyZmVjdFNjcm9sbGJhciIsIndoZWVsUHJvcGFnYXRpb24iLCJDaGVja291dEhlaWdodCIsIm9iaiIsIl9vYmoiLCJfaXRlbXMiLCJmaW5kIiwiX2Fycm93IiwiX3dpbmRvdyIsIndpbmRvdyIsInRpbWVvdXQiLCJfc3RhcnRXaW5XaWR0aCIsIndpZHRoIiwiX2FkZEV2ZW50cyIsIm9uIiwicmVzaXplIiwicmVtb3ZlQ2xhc3MiLCJqUXVlcnkiLCJjdXJJdGVtIiwicGFyZW50IiwiaGFzQ2xhc3MiLCJhZGRDbGFzcyIsImNsaWNrIiwicGFyZW50cyIsInN1Yk1lbnUiLCJzbGlkZVVwIiwic2xpZGVEb3duIiwibW91c2VlbnRlciIsImlubmVyV2lkdGgiLCJvZmZzZXQiLCJsZWZ0IiwiY3NzIiwiLXdlYmtpdC10cmFuc2Zvcm0iLCJ0cmFuc2Zvcm0iLCJwb3NpdGlvbiIsImNsZWFyVGltZW91dCIsImRhdGEiLCJzZXRUaW1lb3V0IiwidGV4dCIsIm5hbWUiLCJhdHRyIiwic3JjIiwiaHJlZiIsInByaWNlIiwib25TYWxlIiwib2xkUHJpY2UiLCJfaW5pdCIsIl9sYXN0UG9zIiwic2l0ZVNjcm9sbFRvcCIsIl9zZWxmIiwiX21lbnUiLCJfYWN0aW9uIiwiX2hlYWRlciIsIl9oaWRkZW5CbG9ja01lbnUiLCJfaGVhZGVySGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJfc2hvd0J0biIsIl9jbG9zZUJ0biIsIl9zZWFyY2giLCJfb3BlblNlYXJjaCIsIl9jbG9zZVNlYXJjaCIsIl9nZXRGcmVlIiwiX3NpdGUiLCJfZG9tIiwiZG9jdW1lbnQiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbmNlbEJ1YmJsZSIsIl9jbG9zZVNlYXJjaEJveCIsIl9vcGVuTWVudSIsIl9jbG9zZU1lbnUiLCJfb3BlblNlYXJjaEJveCIsInNjcm9sbCIsImUiLCJfZml4ZWRIZWFkZXIiLCJzY3JvbGxUb3AiLCJET01Nb3VzZVNjcm9sbCIsImRlbHRhIiwib3JpZ2luYWxFdmVudCIsImRldGFpbCIsImRpcmVjdGlvbiIsIl9jaGVja1Njcm9sbCIsIm1vdXNld2hlZWwiLCJ3aGVlbERlbHRhIiwidG91Y2htb3ZlIiwiY3VycmVudFBvcyIsInRvdWNoZXMiLCJjbGllbnRZIiwia2V5ZG93biIsIndoaWNoIiwiaGVpZ2h0Iiwib3ZlcmZsb3cteSIsImVsZW0iLCJmb2N1c291dCIsIl9nbG9iYWxXaW5XaWR0aCIsIl9zZXRIZWlnaHQiLCJtaW5IZWlnaHQiLCJfdG90YWxPcmRlciIsIlBvcHVwIiwiX3BvcHVwUGFkZGluZyIsIl9idG5TaG93IiwiX2J0bkNsb3NlIiwiX3dyYXAiLCJfY29udGVudHMiLCJfc2Nyb2xsQ29udGVpbmVyIiwiX3RpbWVyIiwiX2NlbnRlcldyYXAiLCJ0b3AiLCJfZ2V0U2Nyb2xsV2lkdGgiLCJzY3JvbGxCYXJXaWR0aCIsInNjcm9sbERpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNsaWVudFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJfaGlkZSIsIm92ZXJmbG93WSIsInBhZGRpbmdSaWdodCIsIl9vbkV2ZW50cyIsIl9zaG93IiwiX3NldFBvcHVwQ29udGVudCIsImN1ckNvbnRlbnQiLCJmaWx0ZXIiLCJkaXNwbGF5IiwiTWFpblNsaWRlciIsIl9zd2lwZXIiLCJfc2xpZGUiLCJfaW5pdFNsaWRlciIsIlN3aXBlciIsInBhZ2luYXRpb24iLCJwYWdpbmF0aW9uQ2xpY2thYmxlIiwic3BlZWQiLCJsb29wIiwibG9vcGVkU2xpZGVzIiwiYXV0b3BsYXkiLCJ0b3VjaFJhdGlvIiwiYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbiIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwib25TbGlkZUNoYW5nZUVuZCIsInN3aXBlciIsInNsaWRlcyIsImVxIiwiYWN0aXZlSW5kZXgiLCJTZWFyY2giLCJfaW5wdXQiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiX3BhdGgiLCJzdWdnZXN0U2VsZWN0ZWQiLCJjb3VudEl0ZW1zIiwidmFsdWVJbnB1dCIsInZhbCIsIl9yZXN1bHQiLCJrZXl1cCIsIkkiLCJrZXlDb2RlIiwibGVuZ3RoIiwic3VibWl0IiwiX2FqYXhSZXF1ZXN0IiwiaHRtbCIsImxvY2F0aW9uIiwicmVtb3ZlIiwicHJldmVudERlZmF1bHQiLCJfa2V5QWN0aXZhdGUiLCJjdXJUZXh0IiwidHJpZ2dlciIsIm4iLCJfYWRkRGF0YSIsImNhdGVnb3JpZXMiLCJjYXRlZ29yaWVzQXZhaWxhYmlsaXR5IiwicHJvZHVjdHMiLCJwcm9kdWN0c0F2YWlsYWJpbGl0eSIsImFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsInByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsImZsYWciLCJwcm9kdWN0c1dyYXAiLCJwcm9kdWN0IiwicHVzaCIsIm1haW5DYXRlZ29yeSIsInVybE1haW5DYXRlZ29yeSIsInN1YmNhdGVnb3JpZXMiLCJ1cmxTdWJjYXRlZ29yaWVzIiwicmVzdWx0U3RyIiwic3ViY2F0ZWdvcmllc1dyYXAiLCJ1bmRlZmluZWQiLCJpIiwidXJsQ2F0ZWdvcnkiLCJqIiwieiIsImluZGV4T2YiLCJjb3VudCIsImlucHV0IiwiYWJvcnQiLCJhamF4IiwidXJsIiwidmFsdWUiLCJhY3Rpb24iLCJkYXRhVHlwZSIsInR5cGUiLCJzdWNjZXNzIiwibXNnIiwiT2JqZWN0Iiwia2V5cyIsImVycm9yIiwic3RhdHVzVGV4dCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJDQUFBLFdBRUksR0FBSUEsSUFBbUIsQ0FFdkJDLEdBQUUsV0FFRUEsRUFBRSxlQUFlQyxLQUFLLFdBRWxCLEdBQUlDLEdBQVNGLEVBQUVHLE9BQ2Ys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SSxFQUFHQSxHQUFLZixFQUFzQlksR0FBRyxHQUFHN0IsT0FBTyxFQUFHZ0MsSUFFdkRMLEdBQXFCLDBDQUE0Q1YsRUFBc0JZLEdBQUcsR0FBR0csR0FBSyxLQUFPZixFQUFzQlksR0FBRyxHQUFHRyxHQUFLLFlBQzFJRSxHQUlKUCxJQUFxQixHQUl6QkQsR0FBYSxnQkFBa0JULEVBQXNCWSxHQUFHLEdBQUssS0FBT1osRUFBc0JZLEdBQUcsR0FBSyxZQUFhRixHQU12SEQsR0FBYSxRQUViOUIsRUFBUXRKLEtBQUssYUFBYTZKLEtBQUt1QixHQUUvQjlCLEVBQVF0SixLQUFLLGtCQUFrQkEsS0FBSyxtQkFBbUIrSixTQUV2RFosRUFBYUcsRUFBUXRKLEtBQUssa0JBQWtCQSxLQUFLLE1BQU0wSixPQUV2REosRUFBUXZJLFNBQVMsZUFJakJ1SSxHQUFRNUksWUFBWSxZQUk1QmtKLEVBQWdCLFNBQVVpQyxFQUFPekIsR0F5QjdCLE1BdkJBckIsR0FBUytDLFFBQ1QvQyxFQUFXM0osRUFBRTJNLE1BQ1RDLElBQUsvQyxFQUNMbkgsTUFDSW1LLE1BQU9KLEVBQU14QyxNQUNiNkMsT0FBTyxlQUVYQyxTQUFVLE9BQ1ZDLEtBQU0sTUFDTkMsUUFBUyxTQUFXQyxHQUVlLEdBQTNCQyxPQUFPQyxLQUFLRixHQUFLNUMsUUFDakJXLEVBQVVpQyxJQUlsQkcsTUFBTyxTQUFVekQsR0FDb0IsU0FBN0JBLEVBQWUwRCxZQUNmQyxRQUFRQyxJQUFJLGFBS2pCLEdBRVhwSyxFQUFRLFdBQ0pqQyxJQU9SaUMiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCBmdW5jdGlvbigpe1xuXG4gICAgdmFyIGdsb2JhbFNjcm9sbEZsYWcgPSB0cnVlO1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLnNpdGVfX21lbnUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFN1Yk1lbnUoICQodGhpcykgKTtcbiAgICAgICAgICAgIG5ldyBNZW51KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5ub3QtZm91bmQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEZ1bGxIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLmNvbmZpcm1hdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgRnVsbEhlaWdodCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcjd3BzbC1zdG9yZXMnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgJCh0aGlzKS5wZXJmZWN0U2Nyb2xsYmFyKHtcbiAgICAgICAgICAgICAgICB3aGVlbFByb3BhZ2F0aW9uOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLmNoZWNrb3V0JykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBDaGVja291dEhlaWdodCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBTdWJNZW51ID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2l0ZW1zID0gX29iai5maW5kKCcuc2l0ZV9fbWVudS1pdGVtJyksXG4gICAgICAgICAgICBfYXJyb3cgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51LWljb24nKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbCxcbiAgICAgICAgICAgIF9zdGFydFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3N0YXJ0V2luV2lkdGggPiBfd2luZG93LndpZHRoKCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhcnRXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF93aW5kb3cuZmluZCgnLm9wZW5lZCcpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuc2l0ZV9fbWVudS1pY29uJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGpRdWVyeSh3aW5kb3cpLndpZHRoKCkgPCAxMDAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGpRdWVyeSh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudCgnbGknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJlbnQuaGFzQ2xhc3MoJ29wZW5lZCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5hZGRDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX2Fycm93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0galF1ZXJ5KHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGN1ckl0ZW0ucGFyZW50cygnbGknKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51ID0gcGFyZW50LmZpbmQoJy5zaXRlX19tZW51LXN1YicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpIDwgMTAyNCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudC5oYXNDbGFzcygnb3BlbmVkJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5zbGlkZVVwKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5hZGRDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuc2xpZGVEb3duKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfaXRlbXMub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbW91c2VlbnRlcjogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnQoJ3VsJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5oYXNDbGFzcygnc2l0ZV9fbWVudS1pdGVtX3N1YicpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJNZW51ID0gY3VySXRlbS5maW5kKCcuc2l0ZV9fbWVudS1zdWInKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggKCBfd2luZG93LndpZHRoKCkgLSAoIHN1Yk1lbnUuaW5uZXJXaWR0aCgpICsgY3VySXRlbS5vZmZzZXQoKS5sZWZ0ICkgKSA8IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAoICggY3VySXRlbS5vZmZzZXQoKS5sZWZ0ICsgY3VySXRlbS5pbm5lcldpZHRoKCkgKSAtIHN1Yk1lbnUuaW5uZXJXaWR0aCgpICkgPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJzUwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKC01MCUpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKC01MCUpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGN1ckl0ZW0ucG9zaXRpb24oKS5sZWZ0IC0gc3ViTWVudS5pbm5lcldpZHRoKCkgKyBjdXJJdGVtLmlubmVyV2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGN1ckl0ZW0ucG9zaXRpb24oKS5sZWZ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAkKCdbZGF0YS1wcm9kdWN0XScpLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmVhdHVyZWQtcHJvZHVjdF9fbG9hZGluZycpLmFkZENsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGN1ckl0ZW0uZGF0YSgncHJvZHVjdCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiggJCgnLmZlYXR1cmVkLXByb2R1Y3RfX2xvYWRpbmcnKS5oYXNDbGFzcygndmlzaWJsZScpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X190aXRsZScpLnRleHQoZGF0YS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcGljIGltZycpLmF0dHIoJ3NyYycsIGRhdGEuc3JjKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuYnRuJykuYXR0cignaHJlZicsIGRhdGEuaHJlZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3ByaWNlIHNwYW4nKS50ZXh0KGRhdGEucHJpY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggZGF0YS5vblNhbGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19yZW1hcmsnKS5hZGRDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3JlbWFyaycpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBkYXRhLm9sZFByaWNlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2UgZGVsJykudGV4dChkYXRhLm9sZFByaWNlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2UgZGVsJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDE2MCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmZlYXR1cmVkLXByb2R1Y3RfX2xvYWRpbmcnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy99XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmoub24oICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm9wZW5lZCcpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5maW5kKCd1bCcpLm9uKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5vcGVuZWQnKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouZmluZCgnbGknKS5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX21lbnUgPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2FjdGlvbiA9IGZhbHNlLFxuICAgICAgICAgICAgX2FjdGlvblNjcm9sbCA9IGZhbHNlLFxuICAgICAgICAgICAgX2xhc3RQb3MsXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpLFxuICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudSA9ICQoJy5zaXRlX19oaWRkZW4taXRlbXMnKSxcbiAgICAgICAgICAgIF9oZWFkZXJIZWlnaHQgPSBfaGVhZGVyLmlubmVySGVpZ2h0KCksXG4gICAgICAgICAgICBfc2hvd0J0biA9ICQoJy5zaXRlX19oZWFkZXItYnRuJyksXG4gICAgICAgICAgICBfY2xvc2VCdG4gPSAkKCcuc2l0ZV9faGlkZGVuLWNsb3NlJyksXG4gICAgICAgICAgICBfc2VhcmNoID0gJCgnLnNlYXJjaCcpLFxuICAgICAgICAgICAgX29wZW5TZWFyY2ggPSAkKCcuc2VhcmNoLWJ0bicpLFxuICAgICAgICAgICAgX2Nsb3NlU2VhcmNoID0gJCgnLnNlYXJjaF9fY2FuY2VsJyksXG4gICAgICAgICAgICBfZ2V0RnJlZSA9ICQoJy5zaXRlX19oaWRkZW4tYnRuJyksXG4gICAgICAgICAgICBfc2l0ZSA9ICQoJy5zaXRlJyksXG4gICAgICAgICAgICBfZG9tID0gJCggJ2h0bWwnICksXG4gICAgICAgICAgICBzaXRlU2Nyb2xsVG9wLFxuICAgICAgICAgICAgX2NvbnRlbnQgPSAkKCcuc2l0ZV9fY29udGVudCcpLFxuICAgICAgICAgICAgX2xhc3RTY3JvbGxUb3AgPSAwO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgXCIuc2VhcmNoXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBldmVudCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgICAgICBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlU2VhcmNoQm94KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBfc2hvd0J0bi5vbih7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuTWVudSgkKHRoaXMpKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX2Nsb3NlQnRuLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF9vcGVuU2VhcmNoLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5TZWFyY2hCb3goJCh0aGlzKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX2Nsb3NlU2VhcmNoLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlU2VhcmNoQm94KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICggZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maXhlZEhlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbiA9IF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX2hlYWRlckhlaWdodDtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy5zY3JvbGxUb3AoKSA9PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBET01Nb3VzZVNjcm9sbDogZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LmRldGFpbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IChkZWx0YSA+IDApID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtb3VzZXdoZWVsOiBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IChkZWx0YSA+IDApID8gLTEgOiAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0b3VjaG1vdmU6IGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UG9zID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQb3MgPiBfbGFzdFBvcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQb3MgPCBfbGFzdFBvcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9sYXN0UG9zID0gY3VycmVudFBvcztcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLndoaWNoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzYgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpPj0xMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NpdGUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfc2l0ZS5oZWlnaHQoKSA+IF93aW5kb3cuaGVpZ2h0KCkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZG9tLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcblxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPiAwICYmICFfaGVhZGVyLmhhc0NsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJykgJiYgIV9zaG93QnRuLmhhc0NsYXNzKCdvcGVuZWQnKSAmJiBfYWN0aW9uICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPCAwICYmIF9oZWFkZXIuaGFzQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKSAmJiAhX3Nob3dCdG4uaGFzQ2xhc3MoJ29wZW5lZCcpICYmIF9hY3Rpb24gJiYgZ2xvYmFsU2Nyb2xsRmxhZykge1xuXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9maXhlZEhlYWRlciA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGlmIChfd2luZG93LnNjcm9sbFRvcCgpID4gX2hlYWRlckhlaWdodCArIDE1MCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5hZGRDbGFzcygnZml4ZWQnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cblxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24gKGVsZW0pIHtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gZWxlbTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJJdGVtLmhhc0NsYXNzKCdvcGVuZWQnKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUuYWRkQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2l0ZVNjcm9sbFRvcCA9IF93aW5kb3cuc2Nyb2xsVG9wKCk7XG5cblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfc2l0ZS5oZWlnaHQoKSA+IF93aW5kb3cuaGVpZ2h0KCkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZG9tLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ3Njcm9sbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2l0ZS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xuXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuU2VhcmNoQm94ID0gZnVuY3Rpb24gKGVsZW0pIHtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gZWxlbTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJJdGVtLmhhc0NsYXNzKCdvcGVuZWQnKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICBfc2VhcmNoLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgX2dldEZyZWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgX3NlYXJjaC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIF9nZXRGcmVlLmFkZENsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jbG9zZU1lbnUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfc2hvd0J0bi5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgX3NlYXJjaC5maW5kKCdpbnB1dCcpLmZvY3Vzb3V0KCk7XG5cblxuICAgICAgICAgICAgICAgIF9zaXRlLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJydcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3NpdGUuaGVpZ2h0KCkgPiBfd2luZG93LmhlaWdodCgpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfd2luZG93LnNjcm9sbFRvcCggc2l0ZVNjcm9sbFRvcCApO1xuXG4gICAgICAgICAgICAgICAgfSwgMTApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Nsb3NlU2VhcmNoQm94ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29wZW5TZWFyY2gucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgIF9zZWFyY2gucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIF9nZXRGcmVlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9tZW51WzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfZml4ZWRIZWFkZXIoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuICAgIHZhciBGdWxsSGVpZ2h0ID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9nbG9iYWxXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfZ2xvYmFsV2luV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IF93aW5kb3cuaGVpZ2h0KCkgLSAkKCcuc2l0ZV9faGVhZGVyJykuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19mb290ZXInKS5pbm5lckhlaWdodCgpIC0gJCgnLmJyZWFkY3J1bWJzJykuaW5uZXJIZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuICAgIHZhciBDaGVja291dEhlaWdodCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF90b3RhbE9yZGVyID0gX29iai5maW5kKCcudG90YWwtb3JkZXInKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiBfdG90YWxPcmRlci5pbm5lckhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJCggJy5wb3B1cCcgKS5lYWNoKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIG5ldyBQb3B1cCgkKHRoaXMpKTtcblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgdmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXG4gICAgICAgICAgICBfYnRuU2hvdyA9ICAkKCAnLnBvcHVwX19vcGVuJyApLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxuICAgICAgICAgICAgX3dyYXAgPSBfb2JqLmZpbmQoICcucG9wdXBfX3dyYXAnICksXG4gICAgICAgICAgICBfY29udGVudHMgPSBfb2JqLmZpbmQoICcucG9wdXBfX2NvbnRlbnQnICksXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe30sIDEgKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2NlbnRlcldyYXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSAtIF93cmFwLmhlaWdodCgpID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAwIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGg7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcblxuICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9jb250ZW50cy5maW5kKCc+ZGl2Jykub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCggY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IF9nZXRTY3JvbGxXaWR0aCgpXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG59ICkoKTtcblxuIiwiKCBmdW5jdGlvbigpe1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLm1haW4tc2xpZGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBNYWluU2xpZGVyKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG5cbiAgICB2YXIgTWFpblNsaWRlciA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfc2xpZGUgPSBfb2JqLmZpbmQoJy5zd2lwZXItc2xpZGUnKSxcbiAgICAgICAgICAgIF9zd2lwZXIsXG4gICAgICAgICAgICBfZ2xvYmFsV2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oe1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9nbG9iYWxXaW5XaWR0aCA8IF93aW5kb3cud2lkdGgoKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpIC0gMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zbGlkZS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCAnLnN3aXBlci1zbGlkZScgKS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAkKCcuc3dpcGVyLWNvbnRhaW5lcicpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdFNsaWRlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3N3aXBlciA9IG5ldyBTd2lwZXIoIF9vYmouZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IF9vYmouZmluZCgnLnN3aXBlci1wYWdpbmF0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25DbGlja2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiA2MDAsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGxvb3BlZFNsaWRlczogMSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDUwMDAsXG4gICAgICAgICAgICAgICAgICAgIHRvdWNoUmF0aW86IDIsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5RGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uOiBfb2JqLmZpbmQoJy5zd2lwZXItYnV0dG9uLW5leHQnKSxcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX29iai5maW5kKCcuc3dpcGVyLWJ1dHRvbi1wcmV2JyksXG4gICAgICAgICAgICAgICAgICAgIG9uU2xpZGVDaGFuZ2VFbmQ6IGZ1bmN0aW9uKHN3aXBlcikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2lwZXIuc2xpZGVzLmZpbmQoJy5tYWluLXNsaWRlcl9fY29udGVudCcpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2lwZXIuc2xpZGVzLmVxKHN3aXBlci5hY3RpdmVJbmRleCkuZmluZCgnLm1haW4tc2xpZGVyX19jb250ZW50JykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai5maW5kKCAnLnN3aXBlci1zbGlkZScgKS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAkKCcuc3dpcGVyLWNvbnRhaW5lcicpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9pbml0U2xpZGVyKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTtcbiIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJy5zZWFyY2gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFNlYXJjaCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBTZWFyY2ggPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaW5wdXQgPSBfb2JqLmZpbmQoJ2lucHV0W3R5cGU9c2VhcmNoXScpLFxuICAgICAgICAgICAgX3JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgICAgIF9wYXRoID0gX29iai5kYXRhKCdwYXRoJyksXG4gICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwLFxuICAgICAgICAgICAgY291bnRJdGVtcyA9IDAsXG4gICAgICAgICAgICB2YWx1ZUlucHV0ID0gX2lucHV0LnZhbCgpLFxuICAgICAgICAgICAgX3Jlc3VsdCA9IF9vYmouZmluZCgnLnNlYXJjaF9fcmVzdWx0Jyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xuICAgICAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24oSSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChJLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5sZW5ndGggPT0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlSW5wdXQgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHZhbHVlSW5wdXQubGVuZ3RoID49IF9vYmouZGF0YSgnc3ltYm9scycpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FqYXhSZXF1ZXN0KCAkKHRoaXMpLCB2YWx1ZUlucHV0Lmxlbmd0aCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLnZhbCgpID09ICcnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbihJKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5odG1sKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnRvcC1wcm9kdWN0cycpLmh0bWwoJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCggSS5rZXlDb2RlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmZpbHRlcignLmFjdGl2ZScpLmxlbmd0aCA9PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX29iai5kYXRhKCdhY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykuZmluZCgnYScpLmF0dHIoJ2hyZWYnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGNvdW50SXRlbXMgPiAwICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2tleUFjdGl2YXRlKCBJLmtleUNvZGUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzdWdnZXN0U2VsZWN0ZWQgPT0gY291bnRJdGVtcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5jbGljayggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgXCJib2R5XCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBldmVudCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgXCIuc2VhcmNoX19mb3VuZCBsaVwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJUZXh0ID0gY3VySXRlbS5maW5kKCdhJykudGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKGN1clRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwia2V5ZG93blwiLFxuICAgICAgICAgICAgICAgICAgICBcIi5zZWFyY2hfX2ZvdW5kIGxpXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKEkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKEkua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfa2V5QWN0aXZhdGUgPSBmdW5jdGlvbihuKSB7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgaWYoIF9vYmoucGFyZW50cygpLmhhc0NsYXNzKCdzaXRlX19mb290ZXInKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggbiA9PSAzOCAmJiBzdWdnZXN0U2VsZWN0ZWQgPCBjb3VudEl0ZW1zICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQrKztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBuID09IDQwICYmIHN1Z2dlc3RTZWxlY3RlZCA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHN1Z2dlc3RTZWxlY3RlZCA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggLTEgLSAoc3VnZ2VzdFNlbGVjdGVkIC0gMSkgKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZXEoIC0xIC0gKHN1Z2dlc3RTZWxlY3RlZCAtIDEpICkuZmluZCgnYScpLnRleHQoKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIHZhbHVlSW5wdXQgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBuID09IDQwICYmIHN1Z2dlc3RTZWxlY3RlZCA8IGNvdW50SXRlbXMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCsrO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG4gPT0gMzggJiYgc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkLS07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiggc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCBzdWdnZXN0U2VsZWN0ZWQgLSAxICkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCBzdWdnZXN0U2VsZWN0ZWQgLSAxICkuZmluZCgnYScpLnRleHQoKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIHZhbHVlSW5wdXQgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGREYXRhID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXMsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgPSBjYXRlZ29yaWVzLmxlbmd0aCAhPSAwLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0cyA9IGRhdGEucHJvZHVjdHMsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQXZhaWxhYmlsaXR5ID0gcHJvZHVjdHMubGVuZ3RoICE9IDAsXG4gICAgICAgICAgICAgICAgICAgIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgdXJsUHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgaWYoIHByb2R1Y3RzQXZhaWxhYmlsaXR5ICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0c1dyYXAgPSAnPGRpdiBjbGFzcz1cInRvcC1wcm9kdWN0c19fd3JhcFwiPic7XG5cbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBwcm9kdWN0cywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNXcmFwICs9ICc8ZGl2PlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19pdGVtXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19waWNcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnKyBwcm9kdWN0LnNyYyArJylcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3ByaWNlXCI+PGRlbD4nKyBwcm9kdWN0Lm9sZFByaWNlICsnPC9kZWw+ICcrIHByb2R1Y3QucHJpY2UgKyc8L3NwYW4+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2l0ZW0tdGl0bGVcIj4nKyBwcm9kdWN0Lm5hbWUgKyc8L2gzPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicrIHByb2R1Y3QuaHJlZiArJ1wiIGNsYXNzPVwidG9wLXByb2R1Y3RzX19idG5cIj52aWV3PC9hPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFjYXRlZ29yaWVzQXZhaWxhYmlsaXR5ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goIFtwcm9kdWN0LmNhdGVnb3JpZXMubWFpbkNhdGVnb3J5LCBwcm9kdWN0LmNhdGVnb3JpZXMudXJsTWFpbkNhdGVnb3J5LCBwcm9kdWN0LmNhdGVnb3JpZXMuc3ViY2F0ZWdvcmllcywgcHJvZHVjdC5jYXRlZ29yaWVzLnVybFN1YmNhdGVnb3JpZXNdICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNXcmFwICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnZGl2JykuZXEoMSkuZmluZCgnLnRvcC1wcm9kdWN0cycpLmh0bWwoJzxoMiBjbGFzcz1cInRvcC1wcm9kdWN0c19fdGl0bGVcIj5Ub3AgUHJvZHVjdHM8L2gyPicgKyBwcm9kdWN0c1dyYXApO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRTdHIgPSAnPHVsIGNsYXNzPVwic2VhcmNoX19mb3VuZFwiPic7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCggY2F0ZWdvcmllcywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcmllcyA9IHRoaXMuc3ViY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsU3ViY2F0ZWdvcmllcyA9IHRoaXMudXJsU3ViY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzdWJjYXRlZ29yaWVzICE9IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciBpID0gMDsgaSA8PSBzdWJjYXRlZ29yaWVzLmxlbmd0aC0xOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICc8bGkgY2xhc3M9XCJzZWFyY2hfX2ZvdW5kLXN1YlwiPjxhIGhyZWY9XCInKyB1cmxTdWJjYXRlZ29yaWVzW2ldICsnXCI+JyArIHN1YmNhdGVnb3JpZXNbaV0gKyAnPC9hPjwvbGk+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyICs9ICc8bGk+PGEgaHJlZj1cIicrIHRoaXMudXJsQ2F0ZWdvcnkgKydcIj4nKyB0aGlzLm5hbWUgKyc8L2E+PC9saT4nKyBzdWJjYXRlZ29yaWVzV3JhcCArJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggZmxhZyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaChhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzBdICE9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVswXSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaChhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDA7IGogPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldLmxlbmd0aC0xOyBqKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciB6ID0gMDsgeiA8PSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl0ubGVuZ3RoLTE7IHorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5pbmRleE9mKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0pID09IC0xICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzJdLnB1c2goIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXVt6XSApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMTsgaSsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJjYXRlZ29yaWVzV3JhcCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciggdmFyIHogPSAwOyB6IDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXS5sZW5ndGgtMTsgeisrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVszXVt6XSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdW3pdICsgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCArKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzxsaT48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsxXSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzBdICsgJzwvYT48L2xpPicrIHN1YmNhdGVnb3JpZXNXcmFwICsnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzwvdWw+JztcblxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdjpmaXJzdCcpLmh0bWwocmVzdWx0U3RyKTtcblxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kJykuZmluZCgnbGk6bm90KDpsdCgxMSkpJykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY291bnRJdGVtcyA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaScpLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmFkZENsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWpheFJlcXVlc3QgPSAgZnVuY3Rpb24oIGlucHV0LCBuICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IF9wYXRoLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaW5wdXQudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246J21haW5fc2VhcmNoJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIE9iamVjdC5rZXlzKG1zZykubGVuZ3RoICE9IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FkZERhdGEoIG1zZyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyJdfQ==
