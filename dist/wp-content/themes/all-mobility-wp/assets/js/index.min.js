!function(){var e=!0;$(function(){$(".site__menu").each(function(){new n($(this)),new i($(this))})});var n=function(e){var n=e,i=n.find(".site__menu-item"),t=n.find(".site__menu-icon"),d=$(window),s=null,o=d.width(),a=function(){d.on({resize:function(){o>d.width()&&(o=d.width(),d.find(".opened").removeClass("opened"))}}),$("body").on("click",".site__menu-icon",function(){if(jQuery(window).width()<1e3){var e=jQuery(this),n=e.parent("li");n.hasClass("opened")?n.removeClass("opened"):n.addClass("opened")}return!1}),t.on({click:function(){var e=jQuery(this),n=e.parents("li"),i=n.find(".site__menu-sub");return d.width()<1024&&(n.hasClass("opened")?(n.removeClass("opened"),i.slideUp()):(n.addClass("opened"),i.slideDown())),!1}}),i.on({mouseenter:function(){if(d.width()>=1024){var e=$(this);e.parent("ul");if(e.hasClass("site__menu-item_sub")){e.addClass("opened");var n=e.find(".site__menu-sub");d.width()-(n.innerWidth()+e.offset().left)<0?e.offset().left+e.innerWidth()-n.innerWidth()<0?n.css({left:"50%","-webkit-transform":"translateX(-50%)",transform:"translateX(-50%)"}):n.css({left:e.position().left-n.innerWidth()+e.innerWidth()}):n.css({left:e.position().left})}}}}),$("[data-product]").on({mouseenter:function(){if(d.width()>=1024){$(".featured-product__loading").addClass("visible"),s&&(clearTimeout(s),s=null);var e=$(this),i=e.data("product");s=setTimeout(function(){n.find(".featured-product").find(".featured-product__title").text(i.name),n.find(".featured-product").find(".featured-product__pic img").attr("src",i.src),n.find(".featured-product").find(".btn").attr("href",i.href),n.find(".featured-product").find(".featured-product__price span").text(i.price),i.onSale?n.find(".featured-product").find(".featured-product__remark").addClass("visible"):n.find(".featured-product").find(".featured-product__remark").removeClass("visible"),i.oldPrice?n.find(".featured-product").find(".featured-product__price del").text(i.oldPrice):n.find(".featured-product").find(".featured-product__price del").addClass("hidden")},160),s=setTimeout(function(){$(".featured-product__loading").removeClass("visible")},200)}}}),n.on("mouseleave",function(){d.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("ul").on("mouseleave",function(){d.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("li").on("mouseleave",function(){d.width()>=1024&&$(this).removeClass("opened")})},r=function(){a()};r()},i=function(n){var i,t=this,d=n,s=$(window),o=!1,a=$(".site__header"),r=$(".site__hidden-items"),c=a.innerHeight(),u=$(".site__header-btn"),l=$(".site__hidden-close"),f=$(".search"),h=$(".search-btn"),p=$(".search__cancel"),_=$(".site__hidden-btn"),v=function(){u.on({click:function(){w($(this))}}),l.on({click:function(){return k(),!1}}),h.on({click:function(){return b($(this)),!1}}),p.on({click:function(){return g(),!1}}),s.on({scroll:function(){C(),o=s.scrollTop()>=c},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var i=n>0?1:-1;m(i)}},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var i=n>0?-1:1;m(i)}},touchmove:function(e){var n=e.originalEvent.touches[0].clientY;n>i?m(-1):n<i&&m(1),i=n},keydown:function(e){switch(e.which){case 32:m(1);break;case 33:m(-1);break;case 34:m(1);break;case 35:m(1);break;case 36:m(-1);break;case 38:m(-1);break;case 40:m(1);break;default:return}}})},m=function(n){n>0&&!a.hasClass("site__header_hidden")&&!u.hasClass("opened")&&o&&a.addClass("site__header_hidden"),n<0&&a.hasClass("site__header_hidden")&&!u.hasClass("opened")&&o&&e&&a.removeClass("site__header_hidden")},C=function(){s.scrollTop()>c+150?a.addClass("fixed"):a.removeClass("fixed")},w=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),r.removeClass("opened")):(n.addClass("opened"),r.addClass("opened"))},b=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),f.removeClass("active"),_.removeClass("hidden")):(n.addClass("opened"),f.addClass("active"),_.addClass("hidden"))},k=function(){u.removeClass("opened"),r.removeClass("opened")},g=function(){h.removeClass("opened"),f.removeClass("active"),_.removeClass("hidden")},x=function(){d[0].obj=t,v()};x()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return m($(this).attr("data-popup")),!1}}),c.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},m=function(o){v(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},v=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$(".main-slider").each(function(){new n($(this))})});var n=function(n){var i,t=n,e=$(window),o=t.find(".swiper-slide"),a=function(){e.resize(function(){o.css({minHeight:""}),o.css({minHeight:$(".swiper-container").height()})})},s=function(){i=new Swiper(t.find(".swiper-container"),{pagination:t.find(".swiper-pagination"),paginationClickable:!0,speed:600,loop:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,nextButton:t.find(".swiper-button-next"),prevButton:t.find(".swiper-button-prev")}),o.css({minHeight:$(".swiper-container").height()})},r=function(){a(),s()};r()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var i=e,t=i.find("input[type=search]"),a=new XMLHttpRequest,n=i.data("path"),s=0,o=0,r=t.val(),c=i.find(".search__result"),l=function(){t.on({keyup:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:0==c.find(".search__found li").filter(".active").length&&i.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var t=$(this).val();t.length>0?u($(this),t.length):""==$(this).val()&&(c.removeClass("visible"),s=0)}},keydown:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:return 0==c.find(".search__found li").filter(".active").length?window.location.href=i.data("action"):window.location.href=c.find(".search__found li").filter(".active").find("a").attr("href"),!1;case 27:return c.remove(),s=0,!1;case 38:case 40:e.preventDefault(),o>0&&(d(e.keyCode),s==o&&(s=0))}}}),$("html").click(function(){c.removeClass("visible"),s=0}),$(document).on("click","body",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click",".search__found li",function(){var e=$(this),i=e.find("a").text();t.val(i),c.removeClass("visible"),s=0}),$(document).on("keydown",".search__found li",function(e){switch(e.keyCode){case 13:$(this).trigger("click")}})},d=function(e){c.find(".search__found li").removeClass("active"),40==e&&s<o?s++:38==e&&s>0&&s--,s>0?(c.find(".search__found li").eq(s-1).addClass("active"),t.val(c.find(".search__found li").eq(s-1).find("a").text())):t.val(r)},f=function(e){var e=e,i=e.categories,t=0!=i.length,a=e.products,n=[],s=[],r=!0,l='<div class="top-products__wrap">';$.each(a,function(){var e=this;l+='<div>                                            <div class="top-products__item">                                                <div class="top-products__pic">                                                    <img src="'+e.src+'" width="414" height="414" alt="'+e.alt+'">                                                </div>                                                <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                <h3 class="top-products__item-title">'+e.name+'</h3>                                                <a href="'+e.href+'" class="top-products__btn">view</a>                                            </div>                                        </div>',t||n.push([e.categories.mainCategory,e.categories.urlMainCategory,e.categories.subcategories,e.categories.urlSubcategories])}),l+="</div>",c.find("div").eq(1).find(".top-products").html(l);var d='<ul class="search__found">';if(t)$.each(i,function(){var e=this.subcategories,i=this.urlSubcategories,t="";if(void 0!=e){for(var a=0;a<=e.length-1;a++)t+='<li class="search__found-sub"><a href="'+i[a]+'">'+e[a]+"</a></li>";t+=""}d+='<li><a href="'+this.urlCategory+'">'+this.name+"</a></li>"+t});else{for(var f=0;f<=n.length-1;f++)if(r&&(s.push(n[f]),r=!1),s[s.length-1][0]!=n[f][0])s.push(n[f]);else for(var u=0;u<=n[f].length-1;u++)for(var h=0;h<=n[f][2].length-1;h++)s[s.length-1][2].indexOf(n[f][2][h])==-1&&s[s.length-1][2].push(n[f][2][h]);for(var v=0,f=0;f<=s.length-1;f++){for(var u=0;u<=s[f].length-1;u++){for(var _="",h=0;h<=s[f][2].length-1;h++)_+='<li class="search__found-sub"><a href="'+s[f][3][h]+'">'+s[f][2][h]+"</a></li>",v++;_+=""}d+='<li><a href="'+s[f][1]+'">'+s[f][0]+"</a></li>"+_}}d+="</ul>",c.find("div:first").html(d),c.find(".search__found").find("li:not(:lt(11))").remove(),o=c.find(".search__found").find("li").length,c.addClass("visible")},u=function(e,i){return a.abort(),a=$.ajax({url:n,data:{value:e.val()},dataType:"json",type:"get",success:function(e){f(e)},error:function(e){"abort"!=e.statusText&&console.log("Error")}}),!1},h=function(){l()};h()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5LmluZGV4LmpzIiwianF1ZXJ5LnNlYXJjaC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsImVhY2giLCJTdWJNZW51IiwidGhpcyIsIk1lbnUiLCJvYmoiLCJfb2JqIiwiX2l0ZW1zIiwiZmluZCIsIl9hcnJvdyIsIl93aW5kb3ciLCJ3aW5kb3ciLCJ0aW1lb3V0IiwiX3N0YXJ0V2luV2lkdGgiLCJ3aWR0aCIsIl9hZGRFdmVudHMiLCJvbiIsInJlc2l6ZSIsInJlbW92ZUNsYXNzIiwialF1ZXJ5IiwiY3VySXRlbSIsInBhcmVudCIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJjbGljayIsInBhcmVudHMiLCJzdWJNZW51Iiwic2xpZGVVcCIsInNsaWRlRG93biIsIm1vdXNlZW50ZXIiLCJpbm5lcldpZHRoIiwib2Zmc2V0IiwibGVmdCIsImNzcyIsIi13ZWJraXQtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwicG9zaXRpb24iLCJjbGVhclRpbWVvdXQiLCJkYXRhIiwic2V0VGltZW91dCIsInRleHQiLCJuYW1lIiwiYXR0ciIsInNyYyIsImhyZWYiLCJwcmljZSIsIm9uU2FsZSIsIm9sZFByaWNlIiwiX2luaXQiLCJfbGFzdFBvcyIsIl9zZWxmIiwiX21lbnUiLCJfYWN0aW9uIiwiX2hlYWRlciIsIl9oaWRkZW5CbG9ja01lbnUiLCJfaGVhZGVySGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJfc2hvd0J0biIsIl9jbG9zZUJ0biIsIl9zZWFyY2giLCJfb3BlblNlYXJjaCIsIl9jbG9zZVNlYXJjaCIsIl9nZXRGcmVlIiwiX29wZW5NZW51IiwiX2Nsb3NlTWVudSIsIl9vcGVuU2VhcmNoQm94IiwiX2Nsb3NlU2VhcmNoQm94Iiwic2Nyb2xsIiwiX2ZpeGVkSGVhZGVyIiwic2Nyb2xsVG9wIiwiRE9NTW91c2VTY3JvbGwiLCJlIiwiZGVsdGEiLCJvcmlnaW5hbEV2ZW50IiwiZGV0YWlsIiwiZGlyZWN0aW9uIiwiX2NoZWNrU2Nyb2xsIiwibW91c2V3aGVlbCIsIndoZWVsRGVsdGEiLCJ0b3VjaG1vdmUiLCJjdXJyZW50UG9zIiwidG91Y2hlcyIsImNsaWVudFkiLCJrZXlkb3duIiwid2hpY2giLCJlbGVtIiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfdGltZXIiLCJfY2VudGVyV3JhcCIsImhlaWdodCIsInRvcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2hpZGUiLCJvdmVyZmxvd1kiLCJwYWRkaW5nUmlnaHQiLCJfb25FdmVudHMiLCJfc2hvdyIsInN0b3BQcm9wYWdhdGlvbiIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSIsIk1haW5TbGlkZXIiLCJfc3dpcGVyIiwiX3NsaWRlIiwibWluSGVpZ2h0IiwiX2luaXRTbGlkZXIiLCJTd2lwZXIiLCJwYWdpbmF0aW9uIiwicGFnaW5hdGlvbkNsaWNrYWJsZSIsInNwZWVkIiwibG9vcCIsImF1dG9wbGF5IiwiYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbiIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwiU2VhcmNoIiwiX2lucHV0IiwiX3JlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIl9wYXRoIiwic3VnZ2VzdFNlbGVjdGVkIiwiY291bnRJdGVtcyIsInZhbHVlSW5wdXQiLCJ2YWwiLCJfcmVzdWx0Iiwia2V5dXAiLCJJIiwia2V5Q29kZSIsImxlbmd0aCIsInN1Ym1pdCIsIl9hamF4UmVxdWVzdCIsImxvY2F0aW9uIiwicmVtb3ZlIiwicHJldmVudERlZmF1bHQiLCJfa2V5QWN0aXZhdGUiLCJldmVudCIsImNhbmNlbEJ1YmJsZSIsImN1clRleHQiLCJ0cmlnZ2VyIiwibiIsImVxIiwiX2FkZERhdGEiLCJjYXRlZ29yaWVzIiwiY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSIsInByb2R1Y3RzIiwiYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyIiwicHJvZHVjdHNDYXRlZ29yaWVzQXJyIiwiZmxhZyIsInByb2R1Y3RzV3JhcCIsInByb2R1Y3QiLCJhbHQiLCJwdXNoIiwibWFpbkNhdGVnb3J5IiwidXJsTWFpbkNhdGVnb3J5Iiwic3ViY2F0ZWdvcmllcyIsInVybFN1YmNhdGVnb3JpZXMiLCJodG1sIiwicmVzdWx0U3RyIiwic3ViY2F0ZWdvcmllc1dyYXAiLCJ1bmRlZmluZWQiLCJpIiwidXJsQ2F0ZWdvcnkiLCJqIiwieiIsImluZGV4T2YiLCJjb3VudCIsImlucHV0IiwiYWJvcnQiLCJhamF4IiwidXJsIiwidmFsdWUiLCJkYXRhVHlwZSIsInR5cGUiLCJzdWNjZXNzIiwibXNnIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FHSSxHQUFJQSxJQUFtQixDQUV2QkMsR0FBRSxXQUVFQSxFQUFFLGVBQWVDLEtBQUssV0FFbEIsR0FBSUMsR0FBU0YsRUFBRUcsT0FDZixHQUFJQyxHQUFNSixFQUFFRyxVQU1wQixJQUFJRCxHQUFVLFNBQVVHLEdBR3BCLEdBQUlDLEdBQU9ELEVBQ1BFLEVBQVNELEVBQUtFLEtBQUssb0JBQ25CQyxFQUFTSCxFQUFLRSxLQUFLLG9CQUNuQkUsRUFBVVYsRUFBRVcsUUFDWkMsRUFBVSxLQUNWQyxFQUFpQkgsRUFBUUksUUFJekJDLEVBQWEsV0FFVEwsRUFBUU0sSUFDSkMsT0FBUSxXQUVBSixFQUFpQkgsRUFBUUksVUFFekJELEVBQWlCSCxFQUFRSSxRQUV6QkosRUFBUUYsS0FBSyxXQUFXVSxZQUFZLGNBTWhEbEIsRUFBRSxRQUFRZ0IsR0FBRyxRQUFT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LFNBQVdDLEdBRWhCakMsRUFBVWlDLElBR2RDLE1BQU8sU0FBVXpELEdBQ29CLFNBQTdCQSxFQUFlMEQsWUFDZkMsUUFBUUMsSUFBSSxhQUtqQixHQUVYbkosRUFBUSxXQUNKakMsSUFPUmlDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcblxuXG4gICAgdmFyIGdsb2JhbFNjcm9sbEZsYWcgPSB0cnVlO1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLnNpdGVfX21lbnUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFN1Yk1lbnUoICQodGhpcykgKTtcbiAgICAgICAgICAgIG5ldyBNZW51KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFN1Yk1lbnUgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaXRlbXMgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51LWl0ZW0nKSxcbiAgICAgICAgICAgIF9hcnJvdyA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUtaWNvbicpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsLFxuICAgICAgICAgICAgX3N0YXJ0V2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfc3RhcnRXaW5XaWR0aCA+IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGFydFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3dpbmRvdy5maW5kKCcub3BlbmVkJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5zaXRlX19tZW51LWljb24nLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggalF1ZXJ5KHdpbmRvdykud2lkdGgoKSA8IDEwMDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0galF1ZXJ5KHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGN1ckl0ZW0ucGFyZW50KCdsaScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudC5oYXNDbGFzcygnb3BlbmVkJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfYXJyb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBqUXVlcnkodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnRzKCdsaScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUgPSBwYXJlbnQuZmluZCgnLnNpdGVfX21lbnUtc3ViJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyZW50Lmhhc0NsYXNzKCdvcGVuZWQnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LnNsaWRlVXAoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5zbGlkZURvd24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9pdGVtcy5vbigge1xuICAgICAgICAgICAgICAgICAgICBtb3VzZWVudGVyOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudCgndWwnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmhhc0NsYXNzKCdzaXRlX19tZW51LWl0ZW1fc3ViJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Yk1lbnUgPSBjdXJJdGVtLmZpbmQoJy5zaXRlX19tZW51LXN1YicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAoIF93aW5kb3cud2lkdGgoKSAtICggc3ViTWVudS5pbm5lcldpZHRoKCkgKyBjdXJJdGVtLm9mZnNldCgpLmxlZnQgKSApIDwgMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICggKCBjdXJJdGVtLm9mZnNldCgpLmxlZnQgKyBjdXJJdGVtLmlubmVyV2lkdGgoKSApIC0gc3ViTWVudS5pbm5lcldpZHRoKCkgKSA8IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnNTAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoLTUwJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoLTUwJSknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogY3VySXRlbS5wb3NpdGlvbigpLmxlZnQgLSBzdWJNZW51LmlubmVyV2lkdGgoKSArIGN1ckl0ZW0uaW5uZXJXaWR0aCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlICB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogY3VySXRlbS5wb3NpdGlvbigpLmxlZnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICQoJ1tkYXRhLXByb2R1Y3RdJykub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbW91c2VlbnRlcjogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gY3VySXRlbS5kYXRhKCdwcm9kdWN0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmKCAkKCcuZmVhdHVyZWQtcHJvZHVjdF9fbG9hZGluZycpLmhhc0NsYXNzKCd2aXNpYmxlJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3RpdGxlJykudGV4dChkYXRhLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19waWMgaW1nJykuYXR0cignc3JjJywgZGF0YS5zcmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5idG4nKS5hdHRyKCdocmVmJywgZGF0YS5ocmVmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2Ugc3BhbicpLnRleHQoZGF0YS5wcmljZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBkYXRhLm9uU2FsZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3JlbWFyaycpLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcmVtYXJrJykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGRhdGEub2xkUHJpY2UgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSBkZWwnKS50ZXh0KGRhdGEub2xkUHJpY2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSBkZWwnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTYwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmVhdHVyZWQtcHJvZHVjdF9fbG9hZGluZycpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL31cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcub3BlbmVkJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ3VsJykub24oICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm9wZW5lZCcpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5maW5kKCdsaScpLm9uKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuICAgIHZhciBNZW51ID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfbWVudSA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfYWN0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBfbGFzdFBvcyxcbiAgICAgICAgICAgIF9oZWFkZXIgPSAkKCcuc2l0ZV9faGVhZGVyJyksXG4gICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51ID0gJCgnLnNpdGVfX2hpZGRlbi1pdGVtcycpLFxuICAgICAgICAgICAgX2hlYWRlckhlaWdodCA9IF9oZWFkZXIuaW5uZXJIZWlnaHQoKSxcbiAgICAgICAgICAgIF9zaG93QnRuID0gJCgnLnNpdGVfX2hlYWRlci1idG4nKSxcbiAgICAgICAgICAgIF9jbG9zZUJ0biA9ICQoJy5zaXRlX19oaWRkZW4tY2xvc2UnKSxcbiAgICAgICAgICAgIF9zZWFyY2ggPSAkKCcuc2VhcmNoJyksXG4gICAgICAgICAgICBfb3BlblNlYXJjaCA9ICQoJy5zZWFyY2gtYnRuJyksXG4gICAgICAgICAgICBfY2xvc2VTZWFyY2ggPSAkKCcuc2VhcmNoX19jYW5jZWwnKSxcbiAgICAgICAgICAgIF9nZXRGcmVlID0gJCgnLnNpdGVfX2hpZGRlbi1idG4nKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9zaG93QnRuLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCQodGhpcykpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfY2xvc2VCdG4ub24oe1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX29wZW5TZWFyY2gub24oe1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3BlblNlYXJjaEJveCgkKHRoaXMpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfY2xvc2VTZWFyY2gub24oe1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VTZWFyY2hCb3goKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpeGVkSGVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uID0gX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfaGVhZGVySGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIERPTU1vdXNlU2Nyb2xsOiBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKGRlbHRhID4gMCkgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoZGlyZWN0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vdXNld2hlZWw6IGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gKGRlbHRhID4gMCkgPyAtMSA6IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoZGlyZWN0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvdWNobW92ZTogZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQb3MgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5jbGllbnRZO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBvcyA+IF9sYXN0UG9zKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBvcyA8IF9sYXN0UG9zKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgX2xhc3RQb3MgPSBjdXJyZW50UG9zO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUud2hpY2gpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID4gMCAmJiAhX2hlYWRlci5oYXNDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpICYmICFfc2hvd0J0bi5oYXNDbGFzcygnb3BlbmVkJykgJiYgX2FjdGlvbikge1xuXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPCAwICYmIF9oZWFkZXIuaGFzQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKSAmJiAhX3Nob3dCdG4uaGFzQ2xhc3MoJ29wZW5lZCcpICYmIF9hY3Rpb24gJiYgZ2xvYmFsU2Nyb2xsRmxhZykge1xuXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9maXhlZEhlYWRlciA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGlmIChfd2luZG93LnNjcm9sbFRvcCgpID4gX2hlYWRlckhlaWdodCArIDE1MCAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5hZGRDbGFzcygnZml4ZWQnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cblxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24gKGVsZW0pIHtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gZWxlbTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJJdGVtLmhhc0NsYXNzKCdvcGVuZWQnKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUuYWRkQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5TZWFyY2hCb3ggPSBmdW5jdGlvbiAoZWxlbSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBlbGVtO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1ckl0ZW0uaGFzQ2xhc3MoJ29wZW5lZCcpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWFyY2gucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBfZ2V0RnJlZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICBfc2VhcmNoLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgX2dldEZyZWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Nsb3NlTWVudSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9zaG93QnRuLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jbG9zZVNlYXJjaEJveCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vcGVuU2VhcmNoLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICBfc2VhcmNoLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBfZ2V0RnJlZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfbWVudVswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7IiwiKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24oKXtcblxuICAgICAgICAkKCAnLnBvcHVwJyApLmVhY2goZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgbmV3IFBvcHVwKCQodGhpcykpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9wb3B1cFBhZGRpbmcgPSA0MCxcbiAgICAgICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2J0bkNsb3NlID0gX29iai5maW5kKCAnLnBvcHVwX19jbG9zZSwgLnBvcHVwX19jYW5jZWwnICksXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcbiAgICAgICAgICAgIF9jb250ZW50cyA9IF9vYmouZmluZCggJy5wb3B1cF9fY29udGVudCcgKSxcbiAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIgPSAkKCAnaHRtbCcgKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfY2VudGVyV3JhcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApIC0gX3dyYXAuaGVpZ2h0KCkgPiAwICkge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAoICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSApIC0gX3dyYXAuaGVpZ2h0KCkgKSAvIDIgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6IDAgfSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aDtcblxuICAgICAgICAgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAncG9wdXBfX3Njcm9sbGJhci1tZWFzdXJlJztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNjcm9sbERpdiApO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2hpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0blNob3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3dyYXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCggY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IF9nZXRTY3JvbGxXaWR0aCgpXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG59ICkoKTtcblxuIiwiKCBmdW5jdGlvbigpe1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLm1haW4tc2xpZGVyJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBNYWluU2xpZGVyKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG5cbiAgICB2YXIgTWFpblNsaWRlciA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfc2xpZGUgPSBfb2JqLmZpbmQoJy5zd2lwZXItc2xpZGUnKSxcbiAgICAgICAgICAgIF9zd2lwZXI7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cucmVzaXplKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBfc2xpZGUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgX3NsaWRlLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAkKCcuc3dpcGVyLWNvbnRhaW5lcicpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdFNsaWRlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3N3aXBlciA9IG5ldyBTd2lwZXIoIF9vYmouZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IF9vYmouZmluZCgnLnN3aXBlci1wYWdpbmF0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25DbGlja2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiA2MDAsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiA1MDAwLFxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX29iai5maW5kKCcuc3dpcGVyLWJ1dHRvbi1uZXh0JyksXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9vYmouZmluZCgnLnN3aXBlci1idXR0b24tcHJldicpXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX3NsaWRlLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICQoJy5zd2lwZXItY29udGFpbmVyJykuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2luaXRTbGlkZXIoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpO1xuIiwiKCBmdW5jdGlvbigpe1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLnNlYXJjaCcpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2VhcmNoKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFNlYXJjaCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pbnB1dCA9IF9vYmouZmluZCgnaW5wdXRbdHlwZT1zZWFyY2hdJyksXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgX3BhdGggPSBfb2JqLmRhdGEoJ3BhdGgnKSxcbiAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDAsXG4gICAgICAgICAgICBjb3VudEl0ZW1zID0gMCxcbiAgICAgICAgICAgIHZhbHVlSW5wdXQgPSBfaW5wdXQudmFsKCksXG4gICAgICAgICAgICBfcmVzdWx0ID0gX29iai5maW5kKCcuc2VhcmNoX19yZXN1bHQnKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbihJKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHdpbmRvdykud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKEkua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmZpbHRlcignLmFjdGl2ZScpLmxlbmd0aCA9PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnZm9ybScpLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVJbnB1dCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggdmFsdWVJbnB1dC5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FqYXhSZXF1ZXN0KCAkKHRoaXMpLCB2YWx1ZUlucHV0Lmxlbmd0aCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLnZhbCgpID09ICcnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbihJKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHdpbmRvdykud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKCBJLmtleUNvZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoID09IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBfb2JqLmRhdGEoJ2FjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5maW5kKCdhJykuYXR0cignaHJlZicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY291bnRJdGVtcyA+IDAgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfa2V5QWN0aXZhdGUoIEkua2V5Q29kZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHN1Z2dlc3RTZWxlY3RlZCA9PSBjb3VudEl0ZW1zKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgJCgnaHRtbCcpLmNsaWNrKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgICAgICBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50ICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgICAgICBcIi5zZWFyY2hfX2ZvdW5kIGxpXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSBjdXJJdGVtLmZpbmQoJ2EnKS50ZXh0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoY3VyVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgICAgICAgICAgICAgXCJrZXlkb3duXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLnNlYXJjaF9fZm91bmQgbGlcIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oSSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goSS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9rZXlBY3RpdmF0ZSA9IGZ1bmN0aW9uKG4pIHtcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBpZiggbiA9PSA0MCAmJiBzdWdnZXN0U2VsZWN0ZWQgPCBjb3VudEl0ZW1zICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCsrO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbiA9PSAzOCAmJiBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZC0tO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggc3VnZ2VzdFNlbGVjdGVkIC0gMSApLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCBzdWdnZXN0U2VsZWN0ZWQgLSAxICkuZmluZCgnYScpLnRleHQoKSApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCB2YWx1ZUlucHV0ICk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZERhdGEgPSBmdW5jdGlvbiggZGF0YSApIHtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcyA9IGRhdGEuY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSA9IGNhdGVnb3JpZXMubGVuZ3RoICE9IDAsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzID0gZGF0YS5wcm9kdWN0cyxcbiAgICAgICAgICAgICAgICAgICAgYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxuICAgICAgICAgICAgICAgICAgICB1cmxQcm9kdWN0c0NhdGVnb3JpZXNBcnIgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHNXcmFwID0gJzxkaXYgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3dyYXBcIj4nO1xuXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBwcm9kdWN0cywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzV3JhcCArPSAnPGRpdj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19pdGVtXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3BpY1wiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCInKyBwcm9kdWN0LnNyYyArJ1wiIHdpZHRoPVwiNDE0XCIgaGVpZ2h0PVwiNDE0XCIgYWx0PVwiJysgcHJvZHVjdC5hbHQgKydcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidG9wLXByb2R1Y3RzX19wcmljZVwiPjxkZWw+JysgcHJvZHVjdC5vbGRQcmljZSArJzwvZGVsPiAnKyBwcm9kdWN0LnByaWNlICsnPC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2l0ZW0tdGl0bGVcIj4nKyBwcm9kdWN0Lm5hbWUgKyc8L2gzPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJysgcHJvZHVjdC5ocmVmICsnXCIgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2J0blwiPnZpZXc8L2E+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBpZiggIWNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKCBbcHJvZHVjdC5jYXRlZ29yaWVzLm1haW5DYXRlZ29yeSwgcHJvZHVjdC5jYXRlZ29yaWVzLnVybE1haW5DYXRlZ29yeSwgcHJvZHVjdC5jYXRlZ29yaWVzLnN1YmNhdGVnb3JpZXMsIHByb2R1Y3QuY2F0ZWdvcmllcy51cmxTdWJjYXRlZ29yaWVzXSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHByb2R1Y3RzV3JhcCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnZGl2JykuZXEoMSkuZmluZCgnLnRvcC1wcm9kdWN0cycpLmh0bWwocHJvZHVjdHNXcmFwKTtcblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRTdHIgPSAnPHVsIGNsYXNzPVwic2VhcmNoX19mb3VuZFwiPic7XG5cbiAgICAgICAgICAgICAgICBpZiggY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSApIHtcblxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goIGNhdGVnb3JpZXMsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcmllcyA9IHRoaXMuc3ViY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxTdWJjYXRlZ29yaWVzID0gdGhpcy51cmxTdWJjYXRlZ29yaWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzdWJjYXRlZ29yaWVzICE9IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciggdmFyIGkgPSAwOyBpIDw9IHN1YmNhdGVnb3JpZXMubGVuZ3RoLTE7IGkrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiJysgdXJsU3ViY2F0ZWdvcmllc1tpXSArJ1wiPicgKyBzdWJjYXRlZ29yaWVzW2ldICsgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyICs9ICc8bGk+PGEgaHJlZj1cIicrIHRoaXMudXJsQ2F0ZWdvcnkgKydcIj4nKyB0aGlzLm5hbWUgKyc8L2E+PC9saT4nKyBzdWJjYXRlZ29yaWVzV3JhcCArJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBmbGFnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVswXSAhPSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMF0gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaChhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciB6ID0gMDsgeiA8PSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl0ubGVuZ3RoLTE7IHorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzJdLmluZGV4T2YoIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXVt6XSkgPT0gLTEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5wdXNoKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0gKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMTsgaSsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDA7IGogPD0gcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldLmxlbmd0aC0xOyBqKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcmllc1dyYXAgPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciggdmFyIHogPSAwOyB6IDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXS5sZW5ndGgtMTsgeisrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICc8bGkgY2xhc3M9XCJzZWFyY2hfX2ZvdW5kLXN1YlwiPjxhIGhyZWY9XCInICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzNdW3pdICsgJ1wiPicgKyBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0gKyAnPC9hPjwvbGk+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzxsaT48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsxXSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzBdICsgJzwvYT48L2xpPicrIHN1YmNhdGVnb3JpZXNXcmFwICsnJztcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzwvdWw+JztcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnZGl2OmZpcnN0JykuaHRtbChyZXN1bHRTdHIpO1xuXG4gICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCcpLmZpbmQoJ2xpOm5vdCg6bHQoMTEpKScpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgY291bnRJdGVtcyA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaScpLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hamF4UmVxdWVzdCA9ICBmdW5jdGlvbiggaW5wdXQsIG4gKSB7XG5cbiAgICAgICAgICAgICAgICBfcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogX3BhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpbnB1dC52YWwoKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZERhdGEoIG1zZyApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyJdfQ==
