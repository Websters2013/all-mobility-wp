!function(){var e=!0;$(function(){$(".site__menu").each(function(){new n($(this)),new t($(this))}),$(".not-found").each(function(){new i($(this))}),$(".confirmation").each(function(){new i($(this))}),$("#wpsl-stores").each(function(){$(this).perfectScrollbar({wheelPropagation:!0})}),$(".checkout").each(function(){new s($(this))}),$(".product__items").each(function(){new o($(this))})});var n=function(e){var n=e,t=n.find(".site__menu-item"),i=n.find(".site__menu-icon"),s=$(window),o=null,a=s.width(),d=function(){s.on({resize:function(){a>s.width()&&(a=s.width(),s.find(".opened").removeClass("opened"))}}),$("body").on("click",".site__menu-icon",function(){if(jQuery(window).width()<1e3){var e=jQuery(this),n=e.parent("li");n.hasClass("opened")?n.removeClass("opened"):n.addClass("opened")}return!1}),i.on({click:function(){var e=jQuery(this),n=e.parents("li"),t=n.find(".site__menu-sub");return s.width()<1024&&(n.hasClass("opened")?(n.removeClass("opened"),t.slideUp()):(n.addClass("opened"),t.slideDown())),!1}}),t.on({mouseenter:function(){if(s.width()>=1024){var e=$(this);e.parent("ul");if(e.hasClass("site__menu-item_sub")){e.addClass("opened");var n=e.find(".site__menu-sub");s.width()-(n.innerWidth()+e.offset().left)<0?e.offset().left+e.innerWidth()-n.innerWidth()<0?n.css({left:"50%","-webkit-transform":"translateX(-50%)",transform:"translateX(-50%)"}):n.css({left:e.position().left-n.innerWidth()+e.innerWidth()}):n.css({left:e.position().left})}}}}),$("[data-product]").on({mouseenter:function(){if(s.width()>=1024){$(".featured-product__loading").addClass("visible"),o&&(clearTimeout(o),o=null);var e=$(this),t=e.data("product");o=setTimeout(function(){console.log(t),n.find(".featured-product").find(".featured-product__title").text(t.name),n.find(".featured-product").find(".featured-product__pic img").attr("src",t.src),n.find(".featured-product").find(".btn").attr("href",t.href),n.find(".featured-product").find(".featured-product__price span").text(t.price),t.onSale?n.find(".featured-product").find(".featured-product__remark").addClass("visible"):n.find(".featured-product").find(".featured-product__remark").removeClass("visible"),t.oldPrice?n.find(".featured-product").find(".featured-product__price del").text(t.oldPrice):n.find(".featured-product").find(".featured-product__price del").addClass("hidden")},160),o=setTimeout(function(){$(".featured-product__loading").removeClass("visible")},200)}}}),n.on("mouseleave",function(){s.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("ul").on("mouseleave",function(){s.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("li").on("mouseleave",function(){s.width()>=1024&&$(this).removeClass("opened")})},r=function(){d()};r()},t=function(n){var t,i,s=this,o=n,a=$(window),d=!1,r=$(".site__header"),c=$(".site__hidden-items"),u=r.innerHeight(),f=$(".site__header-btn"),l=$(".site__hidden-close"),h=$(".search"),p=$(".search-btn"),_=$(".search__cancel"),v=$(".site__hidden-btn"),m=$(".site"),w=$("html"),C=($(".site__content"),function(){$(document).on("click",".search",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click","body",function(){x()}),f.on({click:function(){k($(this))}}),l.on({click:function(){return T(),!1}}),p.on({click:function(){return y($(this)),!1}}),_.on({click:function(){return x(),!1}}),a.on({scroll:function(e){g(),d=a.scrollTop()>=u,0==a.scrollTop()&&r.removeClass("site__header_hidden")},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var t=n>0?1:-1;b(t)}},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var t=n>0?-1:1;b(t)}},touchmove:function(e){var n=e.originalEvent.touches[0].clientY;n>t?b(-1):n<t&&b(1),t=n},keydown:function(e){switch(e.which){case 32:b(1);break;case 33:b(-1);break;case 34:b(1);break;case 35:b(1);break;case 36:b(-1);break;case 38:b(-1);break;case 40:b(1);break;default:return}},resize:function(){a.width()>=1024&&(m.css({height:""}),setTimeout(function(){m.height()>a.height()&&w.css({"overflow-y":""})},10))}})}),b=function(n){n>0&&!r.hasClass("site__header_hidden")&&!f.hasClass("opened")&&d&&r.addClass("site__header_hidden"),n<0&&r.hasClass("site__header_hidden")&&!f.hasClass("opened")&&d&&e&&r.removeClass("site__header_hidden")},g=function(){a.scrollTop()>u+150?r.addClass("fixed"):r.removeClass("fixed")},k=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),c.removeClass("opened")):(n.addClass("opened"),c.addClass("opened")),i=a.scrollTop(),setTimeout(function(){m.height()>a.height()&&w.css({"overflow-y":"scroll"}),setTimeout(function(){m.css({height:"100%"})},10)},300)},y=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),h.removeClass("active"),v.removeClass("hidden")):(n.addClass("opened"),h.addClass("active"),v.addClass("hidden"))},T=function(){f.removeClass("opened"),c.removeClass("opened"),h.find("input").focusout(),m.css({height:""}),setTimeout(function(){m.height()>a.height()&&w.css({"overflow-y":""}),a.scrollTop(i)},10)},x=function(){p.removeClass("opened"),h.removeClass("active"),v.removeClass("hidden")},H=function(){o[0].obj=s,C(),g()};H()},i=function(e){var n=e,t=$(window),i=t.width(),s=function(){t.on({resize:function(){i!=t.width()&&(i=t.width(),o())}})},o=function(){n.css({minHeight:""}),n.css({minHeight:t.height()-$(".site__header").innerHeight()-$(".site__footer").innerHeight()-$(".breadcrumbs").innerHeight()})},a=function(){s(),o()};a()},s=function(e){var n=e,t=n.find(".total-order"),i=function(){},s=function(){n.css({minHeight:t.innerHeight()})},o=function(){i(),s()};o()},o=function(e){Number.prototype.formatMoney=function(e,n,t){var i=this,e=isNaN(e=Math.abs(e))?2:e,n=void 0==n?".":n,t=void 0==t?",":t,s=i<0?"-":"",o=String(parseInt(i=Math.abs(Number(i)||0).toFixed(e))),a=(a=o.length)>3?a%3:0;return s+(a?o.substr(0,a)+t:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+t)+(e?n+Math.abs(i-o).toFixed(e).slice(2):"")},$(".variations_form").on("change",function(){var e=$(".variations").find("select"),n=0;if(e.each(function(e){$(this).val()&&n++}),n===e.length){var t=$(".price").text(),i=$(".price>span>span").text();t=parseFloat(t.slice(1)),$upsells=$(".variations_form>.websters-select").find("select"),$upsells.each(function(){var e=$(this).val();e>0&&$(this).find("option").each(function(){$(this).val()===e&&(t+=$(this).data("price"))})}),$(".price").css("display","none"),$(".featured-product__price>strong").html("<span>"+i+"</span>"+t.formatMoney(2,".",","))}})}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return v($(this).attr("data-popup")),!1}}),u.find(">div").on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},v=function(o){m(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$(".main-slider").each(function(){new i($(this))})});var i=function(i){var n=i,e=$(window),t=n.find(".main-slider__items"),s=n.find(".swiper-pagination"),d=n.find(".main-slider__constrols .swiper-button-prev"),o=n.find(".main-slider__constrols .swiper-button-next"),r=e.width(),a=function(){t.on("init",function(i){t.find(".slick-current").find(".main-slider__content").addClass("visible")}),t.on("afterChange",function(i,n){$(n.$slides).find(".main-slider__content").removeClass("visible"),$(n.$slides).filter(".slick-current").find(".main-slider__content").addClass("visible")}),e.on({resize:function(){r<e.width()&&(r=e.width()-1,n.find(".main-slider__item").css({minHeight:""}),n.find(".main-slider__item").css({minHeight:t.height()}))}})},l=function(){t.slick({dots:!0,autoplay:!0,autoplaySpeed:5e3,prevArrow:d,nextArrow:o,appendDots:s}),n.find(".main-slider__item").css({minHeight:t.height()})},c=function(){a(),l()};c()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var t=e,i=t.find("input[type=search]"),a=new XMLHttpRequest,s=t.data("path"),n=0,o=0,r=i.val(),c=t.find(".search__result"),l=function(){i.on({keyup:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:0==c.find(".search__found li").filter(".active").length&&t.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var i=$(this).val();i.length>=t.data("symbols")?u($(this),i.length):""==$(this).val()&&(c.removeClass("visible"),n=0)}},keydown:function(e){if(c.find(".search__found").html(""),c.find(".top-products").html(""),n=0,$(window).width()>=1024)switch(e.keyCode){case 13:return 0==c.find(".search__found li").filter(".active").length?window.location.href=t.data("action"):window.location.href=c.find(".search__found li").filter(".active").find("a").attr("href"),!1;case 27:return c.remove(),n=0,!1;case 38:case 40:e.preventDefault(),o>0&&(d(e.keyCode),n==o&&(n=0))}}}),$("html").click(function(){c.removeClass("visible"),n=0}),$(document).on("click","body",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click",".search__found li",function(){var e=$(this),t=e.find("a").text();i.val(t),c.removeClass("visible"),n=0}),$(document).on("keydown",".search__found li",function(e){switch(e.keyCode){case 13:$(this).trigger("click")}})},d=function(e){c.find(".search__found li").removeClass("active"),t.parents().hasClass("site__footer")?(38==e&&n<o?n++:40==e&&n>0&&n--,n>0?(c.find(".search__found li").eq(-1-(n-1)).addClass("active"),i.val(c.find(".search__found li").eq(-1-(n-1)).find("a").text())):i.val(r)):(40==e&&n<o?n++:38==e&&n>0&&n--,n>0?(c.find(".search__found li").eq(n-1).addClass("active"),i.val(c.find(".search__found li").eq(n-1).find("a").text())):i.val(r))},f=function(e){var e=e,t=e.categories,i=0!=t.length,a=e.products,s=0!=a.length,n=[],r=[],l=!0;if(s){var d='<div class="top-products__wrap">';$.each(a,function(){var e=this;d+='<div>                                                <div class="top-products__item">                                                    <div class="top-products__pic" style="background-image: url('+e.src+')">                                                    </div>                                                    <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                    <h3 class="top-products__item-title">'+e.name+'</h3>                                                    <a href="'+e.href+'" class="top-products__btn">view</a>                                                </div>                                            </div>',i||n.push([e.categories.mainCategory,e.categories.urlMainCategory,e.categories.subcategories,e.categories.urlSubcategories])}),d+="</div>",c.find("div").eq(1).find(".top-products").html('<h2 class="top-products__title">Top Products</h2>'+d);var f='<ul class="search__found">';if(i)$.each(t,function(){var e=this.subcategories,t=this.urlSubcategories,i="";if(void 0!=e){for(var a=0;a<=e.length-1;a++)i+='<li class="search__found-sub"><a href="'+t[a]+'">'+e[a]+"</a></li>";i+=""}f+='<li><a href="'+this.urlCategory+'">'+this.name+"</a></li>"+i});else{for(var u=0;u<=n.length-1;u++)if(l&&(r.push(n[u]),l=!1),r[r.length-1][0]!=n[u][0])r.push(n[u]);else for(var h=0;h<=n[u].length-1;h++)for(var v=0;v<=n[u][2].length-1;v++)r[r.length-1][2].indexOf(n[u][2][v])==-1&&r[r.length-1][2].push(n[u][2][v]);for(var _=0,u=0;u<=r.length-1;u++){for(var h=0;h<=r[u].length-1;h++){for(var p="",v=0;v<=r[u][2].length-1;v++)p+='<li class="search__found-sub"><a href="'+r[u][3][v]+'">'+r[u][2][v]+"</a></li>",_++;p+=""}f+='<li><a href="'+r[u][1]+'">'+r[u][0]+"</a></li>"+p}}f+="</ul>",c.find("div:first").html(f),c.find(".search__found").find("li:not(:lt(11))").remove(),o=c.find(".search__found").find("li").length,c.addClass("visible")}else c.removeClass("visible")},u=function(e,t){return a.abort(),a=$.ajax({url:s,data:{value:e.val(),action:"main_search"},dataType:"json",type:"get",success:function(e){0!=Object.keys(e).length&&f(e)},error:function(e){"abort"!=e.statusText&&console.log("Error")}}),!1},h=function(){l()};h()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5LmluZGV4LmpzIiwianF1ZXJ5LnNlYXJjaC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsImVhY2giLCJTdWJNZW51IiwidGhpcyIsIk1lbnUiLCJGdWxsSGVpZ2h0IiwicGVyZmVjdFNjcm9sbGJhciIsIndoZWVsUHJvcGFnYXRpb24iLCJDaGVja291dEhlaWdodCIsIkNoYW5nZVByaWNlIiwib2JqIiwiX29iaiIsIl9pdGVtcyIsImZpbmQiLCJfYXJyb3ciLCJfd2luZG93Iiwid2luZG93IiwidGltZW91dCIsIl9zdGFydFdpbldpZHRoIiwid2lkdGgiLCJfYWRkRXZlbnRzIiwib24iLCJyZXNpemUiLCJyZW1vdmVDbGFzcyIsImpRdWVyeSIsImN1ckl0ZW0iLCJwYXJlbnQiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwiY2xpY2siLCJwYXJlbnRzIiwic3ViTWVudSIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJtb3VzZWVudGVyIiwiaW5uZXJXaWR0aCIsIm9mZnNldCIsImxlZnQiLCJjc3MiLCItd2Via2l0LXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInBvc2l0aW9uIiwiY2xlYXJUaW1lb3V0IiwiZGF0YSIsInNldFRpbWVvdXQiLCJjb25zb2xlIiwibG9nIiwidGV4dCIsIm5hbWUiLCJhdHRyIiwic3JjIiwiaHJlZiIsInByaWNlIiwib25TYWxlIiwib2xkUHJpY2UiLCJfaW5pdCIsIl9sYXN0UG9zIiwic2l0ZVNjcm9sbFRvcCIsIl9zZWxmIiwiX21lbnUiLCJfYWN0aW9uIiwiX2hlYWRlciIsIl9oaWRkZW5CbG9ja01lbnUiLCJfaGVhZGVySGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJfc2hvd0J0biIsIl9jbG9zZUJ0biIsIl9zZWFyY2giLCJfb3BlblNlYXJjaCIsIl9jbG9zZVNlYXJjaCIsIl9nZXRGcmVlIiwiX3NpdGUiLCJfZG9tIiwiZG9jdW1lbnQiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbmNlbEJ1YmJsZSIsIl9jbG9zZVNlYXJjaEJveCIsIl9vcGVuTWVudSIsIl9jbG9zZU1lbnUiLCJfb3BlblNlYXJjaEJveCIsInNjcm9sbCIsImUiLCJfZml4ZWRIZWFkZXIiLCJzY3JvbGxUb3AiLCJET01Nb3VzZVNjcm9sbCIsImRlbHRhIiwib3JpZ2luYWxFdmVudCIsImRldGFpbCIsImRpcmVjdGlvbiIsIl9jaGVja1Njcm9sbCIsIm1vdXNld2hlZWwiLCJ3aGVlbERlbHRhIiwidG91Y2htb3ZlIiwiY3VycmVudFBvcyIsInRvdWNoZXMiLCJjbGllbnRZIiwia2V5ZG93biIsIndoaWNoIiwiaGVpZ2h0Iiwib3ZlcmZsb3cteSIsImVsZW0iLCJmb2N1c291dCIsIl9nbG9iYWxXaW5XaWR0aCIsIl9zZXRIZWlnaHQiLCJtaW5IZWlnaHQiLCJfdG90YWxPcmRlciIsIk51bWJlciIsInByb3RvdHlwZSIsImZvcm1hdE1vbmV5IiwiYyIsImQiLCJ0IiwibiIsImlzTmFOIiwiTWF0aCIsImFicyIsInVuZGVmaW5lZCIsInMiLCJpIiwiU3RyaW5nIiwicGFyc2VJbnQiLCJ0b0ZpeGVkIiwiaiIsImxlbmd0aCIsInN1YnN0ciIsInJlcGxhY2UiLCJzbGljZSIsInZhcmlhdGlvbiIsImNvdW50ZXIiLCIkdmFsdWUiLCJ2YWwiLCJzeW1ib2wiLCJwYXJzZUZsb2F0IiwiJHVwc2VsbHMiLCJzZWxlY3QiLCJodG1sIiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfdGltZXIiLCJfY2VudGVyV3JhcCIsInRvcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicGFkZGluZ1JpZ2h0IiwiX29uRXZlbnRzIiwiX3Nob3ciLCJfc2V0UG9wdXBDb250ZW50IiwiY3VyQ29udGVudCIsImZpbHRlciIsImRpc3BsYXkiLCJNYWluU2xpZGVyIiwiX2l0ZW1zV3JhcCIsIl9wYWdpbmF0aW9uIiwiX3ByZXYiLCJfbmV4dCIsInNsaWNrIiwiY3VycmVudFNsaWRlIiwiJHNsaWRlcyIsIl9pbml0U2xpZGVyIiwiZG90cyIsImF1dG9wbGF5IiwiYXV0b3BsYXlTcGVlZCIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsImFwcGVuZERvdHMiLCJTZWFyY2giLCJfaW5wdXQiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiX3BhdGgiLCJzdWdnZXN0U2VsZWN0ZWQiLCJjb3VudEl0ZW1zIiwidmFsdWVJbnB1dCIsIl9yZXN1bHQiLCJrZXl1cCIsIkkiLCJrZXlDb2RlIiwic3VibWl0IiwiX2FqYXhSZXF1ZXN0IiwibG9jYXRpb24iLCJyZW1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsIl9rZXlBY3RpdmF0ZSIsImN1clRleHQiLCJ0cmlnZ2VyIiwiZXEiLCJfYWRkRGF0YSIsImNhdGVnb3JpZXMiLCJjYXRlZ29yaWVzQXZhaWxhYmlsaXR5IiwicHJvZHVjdHMiLCJwcm9kdWN0c0F2YWlsYWJpbGl0eSIsImFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsInByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsImZsYWciLCJwcm9kdWN0c1dyYXAiLCJwcm9kdWN0IiwicHVzaCIsIm1haW5DYXRlZ29yeSIsInVybE1haW5DYXRlZ29yeSIsInN1YmNhdGVnb3JpZXMiLCJ1cmxTdWJjYXRlZ29yaWVzIiwicmVzdWx0U3RyIiwic3ViY2F0ZWdvcmllc1dyYXAiLCJ1cmxDYXRlZ29yeSIsInoiLCJpbmRleE9mIiwiY291bnQiLCJpbnB1dCIsImFib3J0IiwiYWpheCIsInVybCIsInZhbHVlIiwiYWN0aW9uIiwiZGF0YVR5cGUiLCJ0eXBlIiwic3VjY2VzcyIsIm1z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aU8sTUFDVEMsSUFBS3pDLEVBQ0w5SSxNQUNJd0wsTUFBT0osRUFBTTVGLE1BQ2JpRyxPQUFPLGVBRVhDLFNBQVUsT0FDVkMsS0FBTSxNQUNOQyxRQUFTLFNBQVdDLEdBRWUsR0FBM0JDLE9BQU9DLEtBQUtGLEdBQUs1RyxRQUNqQjhFLEVBQVU4QixJQUlsQkcsTUFBTyxTQUFVbkQsR0FDb0IsU0FBN0JBLEVBQWVvRCxZQUNmL0wsUUFBUUMsSUFBSSxhQUtqQixHQUVYUyxFQUFRLFdBQ0puQyxJQU9SbUMiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZTtcclxuXHJcbiAgICAkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgJCgnLnNpdGVfX21lbnUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBTdWJNZW51KCAkKHRoaXMpICk7XHJcbiAgICAgICAgICAgIG5ldyBNZW51KCAkKHRoaXMpICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJCgnLm5vdC1mb3VuZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IEZ1bGxIZWlnaHQoICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkKCcuY29uZmlybWF0aW9uJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgRnVsbEhlaWdodCggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQoJyN3cHNsLXN0b3JlcycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgJCh0aGlzKS5wZXJmZWN0U2Nyb2xsYmFyKHtcclxuICAgICAgICAgICAgICAgIHdoZWVsUHJvcGFnYXRpb246IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJCgnLmNoZWNrb3V0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgQ2hlY2tvdXRIZWlnaHQoICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkKCcucHJvZHVjdF9faXRlbXMnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBDaGFuZ2VQcmljZSggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSApO1xyXG5cclxuICAgIHZhciBTdWJNZW51ID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfaXRlbXMgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51LWl0ZW0nKSxcclxuICAgICAgICAgICAgX2Fycm93ID0gX29iai5maW5kKCcuc2l0ZV9fbWVudS1pY29uJyksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3RhcnRXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zdGFydFdpbldpZHRoID4gX3dpbmRvdy53aWR0aCgpICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGFydFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF93aW5kb3cuZmluZCgnLm9wZW5lZCcpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuc2l0ZV9fbWVudS1pY29uJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBqUXVlcnkod2luZG93KS53aWR0aCgpIDwgMTAwMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0galF1ZXJ5KHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnQoJ2xpJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudC5oYXNDbGFzcygnb3BlbmVkJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfYXJyb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBqUXVlcnkodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudHMoJ2xpJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51ID0gcGFyZW50LmZpbmQoJy5zaXRlX19tZW51LXN1YicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudC5oYXNDbGFzcygnb3BlbmVkJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5zbGlkZVVwKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LnNsaWRlRG93bigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9pdGVtcy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudCgndWwnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5oYXNDbGFzcygnc2l0ZV9fbWVudS1pdGVtX3N1YicpICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Yk1lbnUgPSBjdXJJdGVtLmZpbmQoJy5zaXRlX19tZW51LXN1YicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggKCBfd2luZG93LndpZHRoKCkgLSAoIHN1Yk1lbnUuaW5uZXJXaWR0aCgpICsgY3VySXRlbS5vZmZzZXQoKS5sZWZ0ICkgKSA8IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggKCAoIGN1ckl0ZW0ub2Zmc2V0KCkubGVmdCArIGN1ckl0ZW0uaW5uZXJXaWR0aCgpICkgLSBzdWJNZW51LmlubmVyV2lkdGgoKSApIDwgMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICc1MCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKC01MCUpJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoLTUwJSknXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogY3VySXRlbS5wb3NpdGlvbigpLmxlZnQgLSBzdWJNZW51LmlubmVyV2lkdGgoKSArIGN1ckl0ZW0uaW5uZXJXaWR0aCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGN1ckl0ZW0ucG9zaXRpb24oKS5sZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgJCgnW2RhdGEtcHJvZHVjdF0nKS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGN1ckl0ZW0uZGF0YSgncHJvZHVjdCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykuaGFzQ2xhc3MoJ3Zpc2libGUnKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fdGl0bGUnKS50ZXh0KGRhdGEubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcGljIGltZycpLmF0dHIoJ3NyYycsIGRhdGEuc3JjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5idG4nKS5hdHRyKCdocmVmJywgZGF0YS5ocmVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSBzcGFuJykudGV4dChkYXRhLnByaWNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBkYXRhLm9uU2FsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcmVtYXJrJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcmVtYXJrJykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGRhdGEub2xkUHJpY2UgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3ByaWNlIGRlbCcpLnRleHQoZGF0YS5vbGRQcmljZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSBkZWwnKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTYwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy99XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9vYmoub24oICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcub3BlbmVkJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5maW5kKCd1bCcpLm9uKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm9wZW5lZCcpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9vYmouZmluZCgnbGknKS5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfbWVudSA9IG9iaixcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcclxuICAgICAgICAgICAgX2FjdGlvbiA9IGZhbHNlLFxyXG4gICAgICAgICAgICBfYWN0aW9uU2Nyb2xsID0gZmFsc2UsXHJcbiAgICAgICAgICAgIF9sYXN0UG9zLFxyXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpLFxyXG4gICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51ID0gJCgnLnNpdGVfX2hpZGRlbi1pdGVtcycpLFxyXG4gICAgICAgICAgICBfaGVhZGVySGVpZ2h0ID0gX2hlYWRlci5pbm5lckhlaWdodCgpLFxyXG4gICAgICAgICAgICBfc2hvd0J0biA9ICQoJy5zaXRlX19oZWFkZXItYnRuJyksXHJcbiAgICAgICAgICAgIF9jbG9zZUJ0biA9ICQoJy5zaXRlX19oaWRkZW4tY2xvc2UnKSxcclxuICAgICAgICAgICAgX3NlYXJjaCA9ICQoJy5zZWFyY2gnKSxcclxuICAgICAgICAgICAgX29wZW5TZWFyY2ggPSAkKCcuc2VhcmNoLWJ0bicpLFxyXG4gICAgICAgICAgICBfY2xvc2VTZWFyY2ggPSAkKCcuc2VhcmNoX19jYW5jZWwnKSxcclxuICAgICAgICAgICAgX2dldEZyZWUgPSAkKCcuc2l0ZV9faGlkZGVuLWJ0bicpLFxyXG4gICAgICAgICAgICBfc2l0ZSA9ICQoJy5zaXRlJyksXHJcbiAgICAgICAgICAgIF9kb20gPSAkKCAnaHRtbCcgKSxcclxuICAgICAgICAgICAgc2l0ZVNjcm9sbFRvcCxcclxuICAgICAgICAgICAgX2NvbnRlbnQgPSAkKCcuc2l0ZV9fY29udGVudCcpLFxyXG4gICAgICAgICAgICBfbGFzdFNjcm9sbFRvcCA9IDA7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiLnNlYXJjaFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBldmVudCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYm9keVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VTZWFyY2hCb3goKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2hvd0J0bi5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuTWVudSgkKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfY2xvc2VCdG4ub24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgX29wZW5TZWFyY2gub24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3BlblNlYXJjaEJveCgkKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfY2xvc2VTZWFyY2gub24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VTZWFyY2hCb3goKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoIGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maXhlZEhlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aW9uID0gX3dpbmRvdy5zY3JvbGxUb3AoKSA+PSBfaGVhZGVySGVpZ2h0O1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LnNjcm9sbFRvcCgpID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBET01Nb3VzZVNjcm9sbDogZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC5kZXRhaWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoZGVsdGEgPiAwKSA/IDEgOiAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoZGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZXdoZWVsOiBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoZGVsdGEgPiAwKSA/IC0xIDogMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoZGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b3VjaG1vdmU6IGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBvcyA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBvcyA+IF9sYXN0UG9zKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQb3MgPCBfbGFzdFBvcykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sYXN0UG9zID0gY3VycmVudFBvcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUud2hpY2gpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzYgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCk+PTEwMjQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NpdGUuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfc2l0ZS5oZWlnaHQoKSA+IF93aW5kb3cuaGVpZ2h0KCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDAgJiYgIV9oZWFkZXIuaGFzQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKSAmJiAhX3Nob3dCdG4uaGFzQ2xhc3MoJ29wZW5lZCcpICYmIF9hY3Rpb24gKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA8IDAgJiYgX2hlYWRlci5oYXNDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpICYmICFfc2hvd0J0bi5oYXNDbGFzcygnb3BlbmVkJykgJiYgX2FjdGlvbiAmJiBnbG9iYWxTY3JvbGxGbGFnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfZml4ZWRIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKF93aW5kb3cuc2Nyb2xsVG9wKCkgPiBfaGVhZGVySGVpZ2h0ICsgMTUwICApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5hZGRDbGFzcygnZml4ZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcygnZml4ZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb3Blbk1lbnUgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gZWxlbTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5oYXNDbGFzcygnb3BlbmVkJykpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudS5hZGRDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNpdGVTY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIF9zaXRlLmhlaWdodCgpID4gX3dpbmRvdy5oZWlnaHQoKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ3Njcm9sbCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2l0ZS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnMTAwJSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vcGVuU2VhcmNoQm94ID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGVsZW07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1ckl0ZW0uaGFzQ2xhc3MoJ29wZW5lZCcpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9zZWFyY2gucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9nZXRGcmVlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBfc2VhcmNoLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBfZ2V0RnJlZS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2Nsb3NlTWVudSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2hvd0J0bi5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgIF9zZWFyY2guZmluZCgnaW5wdXQnKS5mb2N1c291dCgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBfc2l0ZS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJydcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIF9zaXRlLmhlaWdodCgpID4gX3dpbmRvdy5oZWlnaHQoKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3dpbmRvdy5zY3JvbGxUb3AoIHNpdGVTY3JvbGxUb3AgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCAxMCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2xvc2VTZWFyY2hCb3ggPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29wZW5TZWFyY2gucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgX3NlYXJjaC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBfZ2V0RnJlZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9tZW51WzBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX2ZpeGVkSGVhZGVyKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIEZ1bGxIZWlnaHQgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgIF9nbG9iYWxXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfZ2xvYmFsV2luV2lkdGggIT0gX3dpbmRvdy53aWR0aCgpICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICcnXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogX3dpbmRvdy5oZWlnaHQoKSAtICQoJy5zaXRlX19oZWFkZXInKS5pbm5lckhlaWdodCgpIC0gJCgnLnNpdGVfX2Zvb3RlcicpLmlubmVySGVpZ2h0KCkgLSAkKCcuYnJlYWRjcnVtYnMnKS5pbm5lckhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIENoZWNrb3V0SGVpZ2h0ID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfdG90YWxPcmRlciA9IF9vYmouZmluZCgnLnRvdGFsLW9yZGVyJyk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiBfdG90YWxPcmRlci5pbm5lckhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBDaGFuZ2VQcmljZSA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHJcbiAgICAgICAgTnVtYmVyLnByb3RvdHlwZS5mb3JtYXRNb25leSA9IGZ1bmN0aW9uKGMsIGQsIHQpe1xyXG4gICAgICAgICAgICB2YXIgbiA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBjID0gaXNOYU4oYyA9IE1hdGguYWJzKGMpKSA/IDIgOiBjLFxyXG4gICAgICAgICAgICAgICAgZCA9IGQgPT0gdW5kZWZpbmVkID8gXCIuXCIgOiBkLFxyXG4gICAgICAgICAgICAgICAgdCA9IHQgPT0gdW5kZWZpbmVkID8gXCIsXCIgOiB0LFxyXG4gICAgICAgICAgICAgICAgcyA9IG4gPCAwID8gXCItXCIgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgaSA9IFN0cmluZyhwYXJzZUludChuID0gTWF0aC5hYnMoTnVtYmVyKG4pIHx8IDApLnRvRml4ZWQoYykpKSxcclxuICAgICAgICAgICAgICAgIGogPSAoaiA9IGkubGVuZ3RoKSA+IDMgPyBqICUgMyA6IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBzICsgKGogPyBpLnN1YnN0cigwLCBqKSArIHQgOiBcIlwiKSArIGkuc3Vic3RyKGopLnJlcGxhY2UoLyhcXGR7M30pKD89XFxkKS9nLCBcIiQxXCIgKyB0KSArIChjID8gZCArIE1hdGguYWJzKG4gLSBpKS50b0ZpeGVkKGMpLnNsaWNlKDIpIDogXCJcIik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJCgnLnZhcmlhdGlvbnNfZm9ybScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgdmFyIHZhcmlhdGlvbiA9ICQoJy52YXJpYXRpb25zJykuZmluZCgnc2VsZWN0JyksXHJcbiAgICAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xyXG5cclxuXHJcbiAgICAgICAgICAgdmFyaWF0aW9uLmVhY2goZnVuY3Rpb24gKCR2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICBpZigkKCB0aGlzICkudmFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgIGNvdW50ZXIrKztcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIGlmKGNvdW50ZXIgPT09IHZhcmlhdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgdmFyIHByaWNlID0gJCgnLnByaWNlJykudGV4dCgpLFxyXG4gICAgICAgICAgICAgICAgICAgc3ltYm9sID0gJCgnLnByaWNlPnNwYW4+c3BhbicpLnRleHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgIHByaWNlID0gcGFyc2VGbG9hdChwcmljZS5zbGljZSgxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAkdXBzZWxscyA9ICQoJy52YXJpYXRpb25zX2Zvcm0+LndlYnN0ZXJzLXNlbGVjdCcpLmZpbmQoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICAgICAkdXBzZWxscy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3QgPSAkKCB0aGlzICkudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgaWYoc2VsZWN0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoIHRoaXMgKS5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJCh0aGlzKS52YWwoKSA9PT0gc2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZSArPSAkKHRoaXMpLmRhdGEoJ3ByaWNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICQoJy5wcmljZScpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgICAgICQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZT5zdHJvbmcnKS5odG1sKCc8c3Bhbj4nK3N5bWJvbCsnPC9zcGFuPicrcHJpY2UuZm9ybWF0TW9uZXkoMiwgJy4nLCAnLCcpKTtcclxuXHJcbiAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxufSApKCk7XHJcblxyXG4iLCIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJCggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgJCggJy5wb3B1cCcgKS5lYWNoKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBQb3B1cCA9IGZ1bmN0aW9uKCBvYmogKXtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXHJcbiAgICAgICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxyXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcclxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxyXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSAtIF93cmFwLmhlaWdodCgpID4gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAoICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSApIC0gX3dyYXAuaGVpZ2h0KCkgKSAvIDIgfSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAwIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAncG9wdXBfX3Njcm9sbGJhci1tZWFzdXJlJztcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX2J0blNob3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmZpbmQoJz5kaXYnKS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcclxuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IF9nZXRTY3JvbGxXaWR0aCgpXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xyXG4gICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyQ29udGVudCA9IF9jb250ZW50cy5maWx0ZXIoICcucG9wdXBfXycgKyBjbGFzc05hbWUgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XHJcbiAgICAgICAgICAgICAgICBjdXJDb250ZW50LmNzcyggeyBkaXNwbGF5OiAnYmxvY2snIH0gKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxufSApKCk7XHJcblxyXG4iLCIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICQoJy5tYWluLXNsaWRlcicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IE1haW5TbGlkZXIoICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIH0gKTtcclxuXHJcbiAgICB2YXIgTWFpblNsaWRlciA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcclxuICAgICAgICAgICAgX2l0ZW1zV3JhcCA9IF9vYmouZmluZCgnLm1haW4tc2xpZGVyX19pdGVtcycpLFxyXG4gICAgICAgICAgICBfcGFnaW5hdGlvbiA9IF9vYmouZmluZCgnLnN3aXBlci1wYWdpbmF0aW9uJyksXHJcbiAgICAgICAgICAgIF9wcmV2ID0gX29iai5maW5kKCcubWFpbi1zbGlkZXJfX2NvbnN0cm9scyAuc3dpcGVyLWJ1dHRvbi1wcmV2JyksXHJcbiAgICAgICAgICAgIF9uZXh0ID0gX29iai5maW5kKCcubWFpbi1zbGlkZXJfX2NvbnN0cm9scyAuc3dpcGVyLWJ1dHRvbi1uZXh0JyksXHJcbiAgICAgICAgICAgIF9nbG9iYWxXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX2l0ZW1zV3JhcC5vbignaW5pdCcsIGZ1bmN0aW9uKHNsaWNrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9pdGVtc1dyYXAuZmluZCgnLnNsaWNrLWN1cnJlbnQnKS5maW5kKCcubWFpbi1zbGlkZXJfX2NvbnRlbnQnKS5hZGRDbGFzcygndmlzaWJsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfaXRlbXNXcmFwLm9uKCdhZnRlckNoYW5nZScsIGZ1bmN0aW9uKHNsaWNrLCBjdXJyZW50U2xpZGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50U2xpZGUuJHNsaWRlcykuZmluZCgnLm1haW4tc2xpZGVyX19jb250ZW50JykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKGN1cnJlbnRTbGlkZS4kc2xpZGVzKS5maWx0ZXIoJy5zbGljay1jdXJyZW50JykuZmluZCgnLm1haW4tc2xpZGVyX19jb250ZW50JykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9nbG9iYWxXaW5XaWR0aCA8IF93aW5kb3cud2lkdGgoKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKSAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCAnLm1haW4tc2xpZGVyX19pdGVtJyApLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICcubWFpbi1zbGlkZXJfX2l0ZW0nICkuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiBfaXRlbXNXcmFwLmhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdFNsaWRlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9pdGVtc1dyYXAuc2xpY2soIHtcclxuICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5U3BlZWQ6IDUwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkFycm93OiBfcHJldixcclxuICAgICAgICAgICAgICAgICAgICBuZXh0QXJyb3c6IF9uZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZERvdHM6ICBfcGFnaW5hdGlvblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJy5tYWluLXNsaWRlcl9faXRlbScgKS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IF9pdGVtc1dyYXAuaGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX2luaXRTbGlkZXIoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG5cclxufSApKCk7XHJcbiIsIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgJCgnLnNlYXJjaCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IFNlYXJjaCggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSApO1xyXG5cclxuICAgIHZhciBTZWFyY2ggPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9pbnB1dCA9IF9vYmouZmluZCgnaW5wdXRbdHlwZT1zZWFyY2hdJyksXHJcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXHJcbiAgICAgICAgICAgIF9wYXRoID0gX29iai5kYXRhKCdwYXRoJyksXHJcbiAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDAsXHJcbiAgICAgICAgICAgIGNvdW50SXRlbXMgPSAwLFxyXG4gICAgICAgICAgICB2YWx1ZUlucHV0ID0gX2lucHV0LnZhbCgpLFxyXG4gICAgICAgICAgICBfcmVzdWx0ID0gX29iai5maW5kKCcuc2VhcmNoX19yZXN1bHQnKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5dXA6IGZ1bmN0aW9uKEkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHdpbmRvdykud2lkdGgoKSA+PSAxMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChJLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5sZW5ndGggPT0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnZm9ybScpLnN1Ym1pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZUlucHV0ID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCB2YWx1ZUlucHV0Lmxlbmd0aCA+PSBfb2JqLmRhdGEoJ3N5bWJvbHMnKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWpheFJlcXVlc3QoICQodGhpcyksIHZhbHVlSW5wdXQubGVuZ3RoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLnZhbCgpID09ICcnICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24oSSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCcpLmh0bWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy50b3AtcHJvZHVjdHMnKS5odG1sKCcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goIEkua2V5Q29kZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5sZW5ndGggPT0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX29iai5kYXRhKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmZpbHRlcignLmFjdGl2ZScpLmZpbmQoJ2EnKS5hdHRyKCdocmVmJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjb3VudEl0ZW1zID4gMCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2tleUFjdGl2YXRlKCBJLmtleUNvZGUgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggc3VnZ2VzdFNlbGVjdGVkID09IGNvdW50SXRlbXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgJCgnaHRtbCcpLmNsaWNrKCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICBcImJvZHlcIixcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiggZXZlbnQgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiLnNlYXJjaF9fZm91bmQgbGlcIixcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9IGN1ckl0ZW0uZmluZCgnYScpLnRleHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoY3VyVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXHJcbiAgICAgICAgICAgICAgICAgICAgXCJrZXlkb3duXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCIuc2VhcmNoX19mb3VuZCBsaVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKEkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goSS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2tleUFjdGl2YXRlID0gZnVuY3Rpb24obikge1xyXG5cclxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIF9vYmoucGFyZW50cygpLmhhc0NsYXNzKCdzaXRlX19mb290ZXInKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIG4gPT0gMzggJiYgc3VnZ2VzdFNlbGVjdGVkIDwgY291bnRJdGVtcyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBuID09IDQwICYmIHN1Z2dlc3RTZWxlY3RlZCA+IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQtLTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCAtMSAtIChzdWdnZXN0U2VsZWN0ZWQgLSAxKSApLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCAtMSAtIChzdWdnZXN0U2VsZWN0ZWQgLSAxKSApLmZpbmQoJ2EnKS50ZXh0KCkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIHZhbHVlSW5wdXQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBuID09IDQwICYmIHN1Z2dlc3RTZWxlY3RlZCA8IGNvdW50SXRlbXMgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbiA9PSAzOCAmJiBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkLS07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggc3VnZ2VzdFNlbGVjdGVkIC0gMSApLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCBzdWdnZXN0U2VsZWN0ZWQgLSAxICkuZmluZCgnYScpLnRleHQoKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggdmFsdWVJbnB1dCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hZGREYXRhID0gZnVuY3Rpb24oIGRhdGEgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSA9IGNhdGVnb3JpZXMubGVuZ3RoICE9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHMgPSBkYXRhLnByb2R1Y3RzLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQXZhaWxhYmlsaXR5ID0gcHJvZHVjdHMubGVuZ3RoICE9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsUHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHByb2R1Y3RzQXZhaWxhYmlsaXR5ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHNXcmFwID0gJzxkaXYgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3dyYXBcIj4nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goIHByb2R1Y3RzLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzV3JhcCArPSAnPGRpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19pdGVtXCI+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3BpY1wiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcrIHByb2R1Y3Quc3JjICsnKVwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3ByaWNlXCI+PGRlbD4nKyBwcm9kdWN0Lm9sZFByaWNlICsnPC9kZWw+ICcrIHByb2R1Y3QucHJpY2UgKyc8L3NwYW4+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cInRvcC1wcm9kdWN0c19faXRlbS10aXRsZVwiPicrIHByb2R1Y3QubmFtZSArJzwvaDM+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCInKyBwcm9kdWN0LmhyZWYgKydcIiBjbGFzcz1cInRvcC1wcm9kdWN0c19fYnRuXCI+dmlldzwvYT5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaCggW3Byb2R1Y3QuY2F0ZWdvcmllcy5tYWluQ2F0ZWdvcnksIHByb2R1Y3QuY2F0ZWdvcmllcy51cmxNYWluQ2F0ZWdvcnksIHByb2R1Y3QuY2F0ZWdvcmllcy5zdWJjYXRlZ29yaWVzLCBwcm9kdWN0LmNhdGVnb3JpZXMudXJsU3ViY2F0ZWdvcmllc10gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c1dyYXAgKz0gJzwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnZGl2JykuZXEoMSkuZmluZCgnLnRvcC1wcm9kdWN0cycpLmh0bWwoJzxoMiBjbGFzcz1cInRvcC1wcm9kdWN0c19fdGl0bGVcIj5Ub3AgUHJvZHVjdHM8L2gyPicgKyBwcm9kdWN0c1dyYXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0U3RyID0gJzx1bCBjbGFzcz1cInNlYXJjaF9fZm91bmRcIj4nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCggY2F0ZWdvcmllcywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YmNhdGVnb3JpZXMgPSB0aGlzLnN1YmNhdGVnb3JpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsU3ViY2F0ZWdvcmllcyA9IHRoaXMudXJsU3ViY2F0ZWdvcmllcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzdWJjYXRlZ29yaWVzICE9IHVuZGVmaW5lZCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKCB2YXIgaSA9IDA7IGkgPD0gc3ViY2F0ZWdvcmllcy5sZW5ndGgtMTsgaSsrICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJzxsaSBjbGFzcz1cInNlYXJjaF9fZm91bmQtc3ViXCI+PGEgaHJlZj1cIicrIHVybFN1YmNhdGVnb3JpZXNbaV0gKydcIj4nICsgc3ViY2F0ZWdvcmllc1tpXSArICc8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0ciArPSAnPGxpPjxhIGhyZWY9XCInKyB0aGlzLnVybENhdGVnb3J5ICsnXCI+JysgdGhpcy5uYW1lICsnPC9hPjwvbGk+Jysgc3ViY2F0ZWdvcmllc1dyYXAgKycnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMTsgaSsrICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBmbGFnICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzBdICE9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVswXSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDA7IGogPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldLmxlbmd0aC0xOyBqKysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgeiA9IDA7IHogPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdLmxlbmd0aC0xOyB6KysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzJdLmluZGV4T2YoIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXVt6XSkgPT0gLTEgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzJdLnB1c2goIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXVt6XSApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTE7IGkrKyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDA7IGogPD0gcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldLmxlbmd0aC0xOyBqKysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJjYXRlZ29yaWVzV3JhcCA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciB6ID0gMDsgeiA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl0ubGVuZ3RoLTE7IHorKyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICc8bGkgY2xhc3M9XCJzZWFyY2hfX2ZvdW5kLXN1YlwiPjxhIGhyZWY9XCInICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzNdW3pdICsgJ1wiPicgKyBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0gKyAnPC9hPjwvbGk+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0ciArPSAnPGxpPjxhIGhyZWY9XCInICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzFdICsgJ1wiPicgKyBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMF0gKyAnPC9hPjwvbGk+Jysgc3ViY2F0ZWdvcmllc1dyYXAgKycnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0ciArPSAnPC91bD4nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdjpmaXJzdCcpLmh0bWwocmVzdWx0U3RyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCcpLmZpbmQoJ2xpOm5vdCg6bHQoMTEpKScpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb3VudEl0ZW1zID0gX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCcpLmZpbmQoJ2xpJykubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmFkZENsYXNzKCd2aXNpYmxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FqYXhSZXF1ZXN0ID0gIGZ1bmN0aW9uKCBpbnB1dCwgbiApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfcmVxdWVzdC5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IF9wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGlucHV0LnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246J21haW5fc2VhcmNoJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICggbXNnICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIE9iamVjdC5rZXlzKG1zZykubGVuZ3RoICE9IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWRkRGF0YSggbXNnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG5cclxufSApKCk7Il19
