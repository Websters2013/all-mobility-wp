!function(){var e=!0;$(function(){$(".site__menu").each(function(){new n($(this)),new i($(this))}),$(".not-found").each(function(){new t($(this))}),$(".confirmation").each(function(){new t($(this))})});var n=function(e){var n=e,i=n.find(".site__menu-item"),t=n.find(".site__menu-icon"),o=$(window),s=null,d=o.width(),a=function(){o.on({resize:function(){d>o.width()&&(d=o.width(),o.find(".opened").removeClass("opened"))}}),$("body").on("click",".site__menu-icon",function(){if(jQuery(window).width()<1e3){var e=jQuery(this),n=e.parent("li");n.hasClass("opened")?n.removeClass("opened"):n.addClass("opened")}return!1}),t.on({click:function(){var e=jQuery(this),n=e.parents("li"),i=n.find(".site__menu-sub");return o.width()<1024&&(n.hasClass("opened")?(n.removeClass("opened"),i.slideUp()):(n.addClass("opened"),i.slideDown())),!1}}),i.on({mouseenter:function(){if(o.width()>=1024){var e=$(this);e.parent("ul");if(e.hasClass("site__menu-item_sub")){e.addClass("opened");var n=e.find(".site__menu-sub");o.width()-(n.innerWidth()+e.offset().left)<0?e.offset().left+e.innerWidth()-n.innerWidth()<0?n.css({left:"50%","-webkit-transform":"translateX(-50%)",transform:"translateX(-50%)"}):n.css({left:e.position().left-n.innerWidth()+e.innerWidth()}):n.css({left:e.position().left})}}}}),$("[data-product]").on({mouseenter:function(){if(o.width()>=1024){$(".featured-product__loading").addClass("visible"),s&&(clearTimeout(s),s=null);var e=$(this),i=e.data("product");s=setTimeout(function(){n.find(".featured-product").find(".featured-product__title").text(i.name),n.find(".featured-product").find(".featured-product__pic img").attr("src",i.src),n.find(".featured-product").find(".btn").attr("href",i.href),n.find(".featured-product").find(".featured-product__price span").text(i.price),i.onSale?n.find(".featured-product").find(".featured-product__remark").addClass("visible"):n.find(".featured-product").find(".featured-product__remark").removeClass("visible"),i.oldPrice?n.find(".featured-product").find(".featured-product__price del").text(i.oldPrice):n.find(".featured-product").find(".featured-product__price del").addClass("hidden")},160),s=setTimeout(function(){$(".featured-product__loading").removeClass("visible")},200)}}}),n.on("mouseleave",function(){o.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("ul").on("mouseleave",function(){o.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("li").on("mouseleave",function(){o.width()>=1024&&$(this).removeClass("opened")})},r=function(){a()};r()},i=function(n){var i,t,o=this,s=n,d=$(window),a=!1,r=$(".site__header"),c=$(".site__hidden-items"),u=r.innerHeight(),f=$(".site__header-btn"),l=$(".site__hidden-close"),h=$(".search"),p=$(".search-btn"),_=$(".search__cancel"),m=$(".site__hidden-btn"),v=$(".site"),C=$("html"),w=($(".site__content"),function(){$(document).on("click",".search",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click","body",function(){H()}),f.on({click:function(){k($(this))}}),l.on({click:function(){return y(),!1}}),p.on({click:function(){return T($(this)),!1}}),_.on({click:function(){return H(),!1}}),d.on({scroll:function(e){g(),a=d.scrollTop()>=u,0==d.scrollTop()&&r.removeClass("site__header_hidden")},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var i=n>0?1:-1;b(i)}},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var i=n>0?-1:1;b(i)}},touchmove:function(e){var n=e.originalEvent.touches[0].clientY;n>i?b(-1):n<i&&b(1),i=n},keydown:function(e){switch(e.which){case 32:b(1);break;case 33:b(-1);break;case 34:b(1);break;case 35:b(1);break;case 36:b(-1);break;case 38:b(-1);break;case 40:b(1);break;default:return}},resize:function(){d.width()>=1024&&(v.css({height:""}),setTimeout(function(){v.height()>d.height()&&C.css({"overflow-y":""})},10))}})}),b=function(n){n>0&&!r.hasClass("site__header_hidden")&&!f.hasClass("opened")&&a&&r.addClass("site__header_hidden"),n<0&&r.hasClass("site__header_hidden")&&!f.hasClass("opened")&&a&&e&&r.removeClass("site__header_hidden")},g=function(){d.scrollTop()>u+150?r.addClass("fixed"):r.removeClass("fixed")},k=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),c.removeClass("opened")):(n.addClass("opened"),c.addClass("opened")),t=d.scrollTop(),setTimeout(function(){v.height()>d.height()&&C.css({"overflow-y":"scroll"}),setTimeout(function(){v.css({height:"100%"})},10)},300)},T=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),h.removeClass("active"),m.removeClass("hidden")):(n.addClass("opened"),h.addClass("active"),m.addClass("hidden"))},y=function(){f.removeClass("opened"),c.removeClass("opened"),h.find("input").focusout(),v.css({height:""}),setTimeout(function(){v.height()>d.height()&&C.css({"overflow-y":""}),d.scrollTop(t)},10)},H=function(){p.removeClass("opened"),h.removeClass("active"),m.removeClass("hidden")},x=function(){s[0].obj=o,w(),g()};x()},t=function(e){var n=e,i=$(window),t=i.width(),o=function(){i.on({resize:function(){t!=i.width()&&(t=i.width(),s())}})},s=function(){console.log(34),n.css({minHeight:""}),n.css({minHeight:i.height()-$(".site__header").innerHeight()-$(".site__footer").innerHeight()-$(".breadcrumbs").innerHeight()})},d=function(){o(),s()};d()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return v($(this).attr("data-popup")),!1}}),u.find(">div").on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},v=function(o){m(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$(".main-slider").each(function(){new i($(this))})});var i=function(i){var n,e=i,t=$(window),o=e.find(".swiper-slide"),s=t.width(),a=function(){t.on({resize:function(){s<t.width()&&(s=t.width()-1,o.css({minHeight:""}),o.css({minHeight:$(".swiper-container").height()}))}})},d=function(){n=new Swiper(e.find(".swiper-container"),{pagination:e.find(".swiper-pagination"),paginationClickable:!0,speed:600,loop:!0,loopedSlides:1,autoplay:5e3,touchRatio:2,autoplayDisableOnInteraction:!1,nextButton:e.find(".swiper-button-next"),prevButton:e.find(".swiper-button-prev"),onSlideChangeEnd:function(i){i.slides.find(".main-slider__content").removeClass("visible"),i.slides.eq(i.activeIndex).find(".main-slider__content").addClass("visible")}}),o.css({minHeight:$(".swiper-container").height()})},c=function(){a(),d()};c()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var i=e,a=i.find("input[type=search]"),t=new XMLHttpRequest,n=i.data("path"),s=0,o=0,r=a.val(),c=i.find(".search__result"),l=function(){a.on({keyup:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:0==c.find(".search__found li").filter(".active").length&&i.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var a=$(this).val();a.length>0?h($(this),a.length):""==$(this).val()&&(c.removeClass("visible"),s=0)}},keydown:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:return 0==c.find(".search__found li").filter(".active").length?window.location.href=i.data("action"):window.location.href=c.find(".search__found li").filter(".active").find("a").attr("href"),!1;case 27:return c.remove(),s=0,!1;case 38:case 40:e.preventDefault(),o>0&&(d(e.keyCode),s==o&&(s=0))}}}),$("html").click(function(){c.removeClass("visible"),s=0}),$(document).on("click","body",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click",".search__found li",function(){var e=$(this),i=e.find("a").text();a.val(i),c.removeClass("visible"),s=0}),$(document).on("keydown",".search__found li",function(e){switch(e.keyCode){case 13:$(this).trigger("click")}})},d=function(e){c.find(".search__found li").removeClass("active"),i.parents().hasClass("site__footer")?(38==e&&s<o?s++:40==e&&s>0&&s--,s>0?(c.find(".search__found li").eq(-1-(s-1)).addClass("active"),a.val(c.find(".search__found li").eq(-1-(s-1)).find("a").text())):a.val(r)):(40==e&&s<o?s++:38==e&&s>0&&s--,s>0?(c.find(".search__found li").eq(s-1).addClass("active"),a.val(c.find(".search__found li").eq(s-1).find("a").text())):a.val(r))},f=function(e){var e=e,i=e.categories,a=0!=i.length,t=e.products,n=[],s=[],r=!0,l='<div class="top-products__wrap">';$.each(t,function(){var e=this;l+='<div>                                            <div class="top-products__item">                                                <div class="top-products__pic">                                                    <img src="'+e.src+'" width="414" height="414" alt="'+e.alt+'">                                                </div>                                                <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                <h3 class="top-products__item-title">'+e.name+'</h3>                                                <a href="'+e.href+'" class="top-products__btn">view</a>                                            </div>                                        </div>',a||n.push([e.categories.mainCategory,e.categories.urlMainCategory,e.categories.subcategories,e.categories.urlSubcategories])}),l+="</div>",c.find("div").eq(1).find(".top-products").html(l);var d='<ul class="search__found">';if(a)$.each(i,function(){var e=this.subcategories,i=this.urlSubcategories,a="";if(void 0!=e){for(var t=0;t<=e.length-1;t++)a+='<li class="search__found-sub"><a href="'+i[t]+'">'+e[t]+"</a></li>";a+=""}d+='<li><a href="'+this.urlCategory+'">'+this.name+"</a></li>"+a});else{for(var f=0;f<=n.length-1;f++)if(r&&(s.push(n[f]),r=!1),s[s.length-1][0]!=n[f][0])s.push(n[f]);else for(var h=0;h<=n[f].length-1;h++)for(var u=0;u<=n[f][2].length-1;u++)s[s.length-1][2].indexOf(n[f][2][u])==-1&&s[s.length-1][2].push(n[f][2][u]);for(var v=0,f=0;f<=s.length-1;f++){for(var h=0;h<=s[f].length-1;h++){for(var _="",u=0;u<=s[f][2].length-1;u++)_+='<li class="search__found-sub"><a href="'+s[f][3][u]+'">'+s[f][2][u]+"</a></li>",v++;_+=""}d+='<li><a href="'+s[f][1]+'">'+s[f][0]+"</a></li>"+_}}d+="</ul>",c.find("div:first").html(d),c.find(".search__found").find("li:not(:lt(11))").remove(),o=c.find(".search__found").find("li").length,c.addClass("visible")},h=function(e,i){return t.abort(),t=$.ajax({url:n,data:{value:e.val(),action:"main_search"},dataType:"json",type:"get",success:function(e){f(e)},error:function(e){"abort"!=e.statusText&&console.log("Error")}}),!1},u=function(){l()};u()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5LmluZGV4LmpzIiwianF1ZXJ5LnNlYXJjaC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiJCIsImVhY2giLCJTdWJNZW51IiwidGhpcyIsIk1lbnUiLCJGdWxsSGVpZ2h0Iiwib2JqIiwiX29iaiIsIl9pdGVtcyIsImZpbmQiLCJfYXJyb3ciLCJfd2luZG93Iiwid2luZG93IiwidGltZW91dCIsIl9zdGFydFdpbldpZHRoIiwid2lkdGgiLCJfYWRkRXZlbnRzIiwib24iLCJyZXNpemUiLCJyZW1vdmVDbGFzcyIsImpRdWVyeSIsImN1ckl0ZW0iLCJwYXJlbnQiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwiY2xpY2siLCJwYXJlbnRzIiwic3ViTWVudSIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJtb3VzZWVudGVyIiwiaW5uZXJXaWR0aCIsIm9mZnNldCIsImxlZnQiLCJjc3MiLCItd2Via2l0LXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInBvc2l0aW9uIiwiY2xlYXJUaW1lb3V0IiwiZGF0YSIsInNldFRpbWVvdXQiLCJ0ZXh0IiwibmFtZSIsImF0dHIiLCJzcmMiLCJocmVmIiwicHJpY2UiLCJvblNhbGUiLCJvbGRQcmljZSIsIl9pbml0IiwiX2xhc3RQb3MiLCJzaXRlU2Nyb2xsVG9wIiwiX3NlbGYiLCJfbWVudSIsIl9hY3Rpb24iLCJfaGVhZGVyIiwiX2hpZGRlbkJsb2NrTWVudSIsIl9oZWFkZXJIZWlnaHQiLCJpbm5lckhlaWdodCIsIl9zaG93QnRuIiwiX2Nsb3NlQnRuIiwiX3NlYXJjaCIsIl9vcGVuU2VhcmNoIiwiX2Nsb3NlU2VhcmNoIiwiX2dldEZyZWUiLCJfc2l0ZSIsIl9kb20iLCJkb2N1bWVudCIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2FuY2VsQnViYmxlIiwiX2Nsb3NlU2VhcmNoQm94IiwiX29wZW5NZW51IiwiX2Nsb3NlTWVudSIsIl9vcGVuU2VhcmNoQm94Iiwic2Nyb2xsIiwiZSIsIl9maXhlZEhlYWRlciIsInNjcm9sbFRvcCIsIkRPTU1vdXNlU2Nyb2xsIiwiZGVsdGEiLCJvcmlnaW5hbEV2ZW50IiwiZGV0YWlsIiwiZGlyZWN0aW9uIiwiX2NoZWNrU2Nyb2xsIiwibW91c2V3aGVlbCIsIndoZWVsRGVsdGEiLCJ0b3VjaG1vdmUiLCJjdXJyZW50UG9zIiwidG91Y2hlcyIsImNsaWVudFkiLCJrZXlkb3duIiwid2hpY2giLCJoZWlnaHQiLCJvdmVyZmxvdy15IiwiZWxlbSIsImZvY3Vzb3V0IiwiX2dsb2JhbFdpbldpZHRoIiwiX3NldEhlaWdodCIsImNvbnNvbGUiLCJsb2ciLCJtaW5IZWlnaHQiLCJQb3B1cCIsIl9wb3B1cFBhZGRpbmciLCJfYnRuU2hvdyIsIl9idG5DbG9zZSIsIl93cmFwIiwiX2NvbnRlbnRzIiwiX3Njcm9sbENvbnRlaW5lciIsIl90aW1lciIsIl9jZW50ZXJXcmFwIiwidG9wIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsQmFyV2lkdGgiLCJzY3JvbGxEaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2hpZGUiLCJvdmVyZmxvd1kiLCJwYWRkaW5nUmlnaHQiLCJfb25FdmVudHMiLCJfc2hvdyIsIl9zZXRQb3B1cENvbnRlbnQiLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSIsIk1haW5TbGlkZXIiLCJfc3dpcGVyIiwiX3NsaWRlIiwiX2luaXRTbGlkZXIiLCJTd2lwZXIiLCJwYWdpbmF0aW9uIiwicGFnaW5hdGlvbkNsaWNrYWJsZSIsInNwZWVkIiwibG9vcCIsImxvb3BlZFNsaWRlcyIsImF1dG9wbGF5IiwidG91Y2hSYXRpbyIsImF1dG9wbGF5RGlzYWJsZU9uSW50ZXJhY3Rpb24iLCJuZXh0QnV0dG9uIiwicHJldkJ1dHRvbiIsIm9uU2xpZGVDaGFuZ2VFbmQiLCJzd2lwZXIiLCJzbGlkZXMiLCJlcSIsImFjdGl2ZUluZGV4IiwiU2VhcmNoIiwiX2lucHV0IiwiX3JlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIl9wYXRoIiwic3VnZ2VzdFNlbGVjdGVkIiwiY291bnRJdGVtcyIsInZhbHVlSW5wdXQiLCJ2YWwiLCJfcmVzdWx0Iiwia2V5dXAiLCJJIiwia2V5Q29kZSIsImxlbmd0aCIsInN1Ym1pdCIsIl9hamF4UmVxdWVzdCIsImxvY2F0aW9uIiwicmVtb3ZlIiwicHJldmVudERlZmF1bHQiLCJfa2V5QWN0aXZhdGUiLCJjdXJUZXh0IiwidHJpZ2dlciIsIm4iLCJfYWRkRGF0YSIsImNhdGVnb3JpZXMiLCJjYXRlZ29yaWVzQXZhaWxhYmlsaXR5IiwicHJvZHVjdHMiLCJhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnIiLCJwcm9kdWN0c0NhdGVnb3JpZXNBcnIiLCJmbGFnIiwicHJvZHVjdHNXcmFwIiwicHJvZHVjdCIsImFsdCIsInB1c2giLCJtYWluQ2F0ZWdvcnkiLCJ1cmxNYWluQ2F0ZWdvcnkiLCJzdWJjYXRlZ29yaWVzIiwidXJsU3ViY2F0ZWdvcmllcyIsImh0bWwiLCJyZXN1bHRTdHIiLCJzdWJjYXRlZ29yaWVzV3JhcCIsInVuZGVmaW5lZCIsImkiLCJ1cmxDYXRlZ29yeSIsImoiLCJ6IiwiaW5kZXhPZiIsImNvdW50IiwiaW5wdXQiLCJhYm9ydCIsImFqYXgiLCJ1cmwiLCJ2YWx1ZSIsImFjdGlvbiIsImRhdGFUeXBlIiwidHlwZSIsInN1Y2Nlc3MiLCJtc2ciLCJlcnJvciIsInN0YXR1c1RleHQiXSwibWFwcGluZ3MiOiJDQUFBLFdBR0ksR0FBSUEsSUFBbUIsQ0FFdkJDLEdBQUUsV0FFRUEsRUFBRSxlQUFlQyxLQUFLLFdBRWxCLEdBQUlDLEdBQVNGLEVBQUVHLE9BQ2YsR0FBSUMsR0FBTUosRUFBRUcsU0FJaEJILEVBQUUsY0FBY0MsS0FBSyxXQUVqQixHQUFJSSxHQUFZTCxFQUFFRyxTQUl0QkgsRUFBRSxpQkFBaUJDLEtBQUssV0FFcEIsR0FBSUks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QVdDLEdBRWhCbEMsRUFBVWtDLElBR2RDLE1BQU8sU0FBVXZELEdBQ29CLFNBQTdCQSxFQUFld0QsWUFDZi9HLFFBQVFDLElBQUksYUFLakIsR0FFWG5ELEVBQVEsV0FDSmpDLElBT1JpQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoIGZ1bmN0aW9uKCl7XG5cblxuICAgIHZhciBnbG9iYWxTY3JvbGxGbGFnID0gdHJ1ZTtcblxuICAgICQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJy5zaXRlX19tZW51JykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTdWJNZW51KCAkKHRoaXMpICk7XG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCcubm90LWZvdW5kJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBGdWxsSGVpZ2h0KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5jb25maXJtYXRpb24nKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEZ1bGxIZWlnaHQoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgU3ViTWVudSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtcyA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUtaXRlbScpLFxuICAgICAgICAgICAgX2Fycm93ID0gX29iai5maW5kKCcuc2l0ZV9fbWVudS1pY29uJyksXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgdGltZW91dCA9IG51bGwsXG4gICAgICAgICAgICBfc3RhcnRXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zdGFydFdpbldpZHRoID4gX3dpbmRvdy53aWR0aCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0YXJ0V2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd2luZG93LmZpbmQoJy5vcGVuZWQnKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnNpdGVfX21lbnUtaWNvbicsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBqUXVlcnkod2luZG93KS53aWR0aCgpIDwgMTAwMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBqUXVlcnkodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnQoJ2xpJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyZW50Lmhhc0NsYXNzKCdvcGVuZWQnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuYWRkQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF9hcnJvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGpRdWVyeSh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudHMoJ2xpJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudSA9IHBhcmVudC5maW5kKCcuc2l0ZV9fbWVudS1zdWInKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJlbnQuaGFzQ2xhc3MoJ29wZW5lZCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuc2xpZGVVcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuYWRkQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LnNsaWRlRG93bigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2l0ZW1zLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGN1ckl0ZW0ucGFyZW50KCd1bCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uaGFzQ2xhc3MoJ3NpdGVfX21lbnUtaXRlbV9zdWInKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViTWVudSA9IGN1ckl0ZW0uZmluZCgnLnNpdGVfX21lbnUtc3ViJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICggX3dpbmRvdy53aWR0aCgpIC0gKCBzdWJNZW51LmlubmVyV2lkdGgoKSArIGN1ckl0ZW0ub2Zmc2V0KCkubGVmdCApICkgPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggKCAoIGN1ckl0ZW0ub2Zmc2V0KCkubGVmdCArIGN1ckl0ZW0uaW5uZXJXaWR0aCgpICkgLSBzdWJNZW51LmlubmVyV2lkdGgoKSApIDwgMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICc1MCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgtNTAlKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgtNTAlKSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBjdXJJdGVtLnBvc2l0aW9uKCkubGVmdCAtIHN1Yk1lbnUuaW5uZXJXaWR0aCgpICsgY3VySXRlbS5pbm5lcldpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBjdXJJdGVtLnBvc2l0aW9uKCkubGVmdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgJCgnW2RhdGEtcHJvZHVjdF0nKS5vbigge1xuICAgICAgICAgICAgICAgICAgICBtb3VzZWVudGVyOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmZlYXR1cmVkLXByb2R1Y3RfX2xvYWRpbmcnKS5hZGRDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBjdXJJdGVtLmRhdGEoJ3Byb2R1Y3QnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykuaGFzQ2xhc3MoJ3Zpc2libGUnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fdGl0bGUnKS50ZXh0KGRhdGEubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3BpYyBpbWcnKS5hdHRyKCdzcmMnLCBkYXRhLnNyYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmJ0bicpLmF0dHIoJ2hyZWYnLCBkYXRhLmhyZWYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSBzcGFuJykudGV4dChkYXRhLnByaWNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGRhdGEub25TYWxlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcmVtYXJrJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19yZW1hcmsnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggZGF0YS5vbGRQcmljZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3ByaWNlIGRlbCcpLnRleHQoZGF0YS5vbGRQcmljZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3ByaWNlIGRlbCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxNjAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5vcGVuZWQnKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouZmluZCgndWwnKS5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcub3BlbmVkJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2xpJykub24oICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9tZW51ID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9hY3Rpb24gPSBmYWxzZSxcbiAgICAgICAgICAgIF9hY3Rpb25TY3JvbGwgPSBmYWxzZSxcbiAgICAgICAgICAgIF9sYXN0UG9zLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoJy5zaXRlX19oZWFkZXInKSxcbiAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUgPSAkKCcuc2l0ZV9faGlkZGVuLWl0ZW1zJyksXG4gICAgICAgICAgICBfaGVhZGVySGVpZ2h0ID0gX2hlYWRlci5pbm5lckhlaWdodCgpLFxuICAgICAgICAgICAgX3Nob3dCdG4gPSAkKCcuc2l0ZV9faGVhZGVyLWJ0bicpLFxuICAgICAgICAgICAgX2Nsb3NlQnRuID0gJCgnLnNpdGVfX2hpZGRlbi1jbG9zZScpLFxuICAgICAgICAgICAgX3NlYXJjaCA9ICQoJy5zZWFyY2gnKSxcbiAgICAgICAgICAgIF9vcGVuU2VhcmNoID0gJCgnLnNlYXJjaC1idG4nKSxcbiAgICAgICAgICAgIF9jbG9zZVNlYXJjaCA9ICQoJy5zZWFyY2hfX2NhbmNlbCcpLFxuICAgICAgICAgICAgX2dldEZyZWUgPSAkKCcuc2l0ZV9faGlkZGVuLWJ0bicpLFxuICAgICAgICAgICAgX3NpdGUgPSAkKCcuc2l0ZScpLFxuICAgICAgICAgICAgX2RvbSA9ICQoICdodG1sJyApLFxuICAgICAgICAgICAgc2l0ZVNjcm9sbFRvcCxcbiAgICAgICAgICAgIF9jb250ZW50ID0gJCgnLnNpdGVfX2NvbnRlbnQnKSxcbiAgICAgICAgICAgIF9sYXN0U2Nyb2xsVG9wID0gMDtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLnNlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiggZXZlbnQgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgXCJib2R5XCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZVNlYXJjaEJveCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgX3Nob3dCdG4ub24oe1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoJCh0aGlzKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF9jbG9zZUJ0bi5vbih7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfb3BlblNlYXJjaC5vbih7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuU2VhcmNoQm94KCQodGhpcykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF9jbG9zZVNlYXJjaC5vbih7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZVNlYXJjaEJveCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZml4ZWRIZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24gPSBfd2luZG93LnNjcm9sbFRvcCgpID49IF9oZWFkZXJIZWlnaHQ7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPT0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgRE9NTW91c2VTY3JvbGw6IGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC5kZXRhaWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoZGVsdGEgPiAwKSA/IDEgOiAtMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbChkaXJlY3Rpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbW91c2V3aGVlbDogZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoZGVsdGEgPiAwKSA/IC0xIDogMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbChkaXJlY3Rpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG91Y2htb3ZlOiBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBvcyA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UG9zID4gX2xhc3RQb3MpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UG9zIDwgX2xhc3RQb3MpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbGFzdFBvcyA9IGN1cnJlbnRQb3M7XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS53aGljaCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM0IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM1IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM2IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKT49MTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zaXRlLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3NpdGUuaGVpZ2h0KCkgPiBfd2luZG93LmhlaWdodCgpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID4gMCAmJiAhX2hlYWRlci5oYXNDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpICYmICFfc2hvd0J0bi5oYXNDbGFzcygnb3BlbmVkJykgJiYgX2FjdGlvbiApIHtcblxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uIDwgMCAmJiBfaGVhZGVyLmhhc0NsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJykgJiYgIV9zaG93QnRuLmhhc0NsYXNzKCdvcGVuZWQnKSAmJiBfYWN0aW9uICYmIGdsb2JhbFNjcm9sbEZsYWcpIHtcblxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZml4ZWRIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoX3dpbmRvdy5zY3JvbGxUb3AoKSA+IF9oZWFkZXJIZWlnaHQgKyAxNTAgICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIuYWRkQ2xhc3MoJ2ZpeGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcygnZml4ZWQnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGVsZW07XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5oYXNDbGFzcygnb3BlbmVkJykpIHtcblxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51LmFkZENsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNpdGVTY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpO1xuXG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3NpdGUuaGVpZ2h0KCkgPiBfd2luZG93LmhlaWdodCgpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdzY3JvbGwnXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3NpdGUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcblxuICAgICAgICAgICAgICAgIH0sIDMwMCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb3BlblNlYXJjaEJveCA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGVsZW07XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5oYXNDbGFzcygnb3BlbmVkJykpIHtcblxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgX3NlYXJjaC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIF9nZXRGcmVlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWFyY2guYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBfZ2V0RnJlZS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2xvc2VNZW51ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3Nob3dCdG4ucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgIF9zZWFyY2guZmluZCgnaW5wdXQnKS5mb2N1c291dCgpO1xuXG5cbiAgICAgICAgICAgICAgICBfc2l0ZS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcnXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIF9zaXRlLmhlaWdodCgpID4gX3dpbmRvdy5oZWlnaHQoKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgX3dpbmRvdy5zY3JvbGxUb3AoIHNpdGVTY3JvbGxUb3AgKTtcblxuICAgICAgICAgICAgICAgIH0sIDEwKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jbG9zZVNlYXJjaEJveCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vcGVuU2VhcmNoLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICBfc2VhcmNoLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBfZ2V0RnJlZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfbWVudVswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2ZpeGVkSGVhZGVyKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcbiAgICB2YXIgRnVsbEhlaWdodCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfZ2xvYmFsV2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX2dsb2JhbFdpbldpZHRoICE9IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDM0KVxuXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IF93aW5kb3cuaGVpZ2h0KCkgLSAkKCcuc2l0ZV9faGVhZGVyJykuaW5uZXJIZWlnaHQoKSAtICQoJy5zaXRlX19mb290ZXInKS5pbm5lckhlaWdodCgpIC0gJCgnLmJyZWFkY3J1bWJzJykuaW5uZXJIZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTsiLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbigpe1xuXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIHZhciBQb3B1cCA9IGZ1bmN0aW9uKCBvYmogKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxuICAgICAgICAgICAgX2J0blNob3cgPSAgJCggJy5wb3B1cF9fb3BlbicgKSxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcbiAgICAgICAgICAgIF93cmFwID0gX29iai5maW5kKCAnLnBvcHVwX193cmFwJyApLFxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5jc3MgKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuU2hvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93KCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfY29udGVudHMuZmluZCgnPmRpdicpLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIHZhciBjdXJDb250ZW50ID0gX2NvbnRlbnRzLmZpbHRlciggJy5wb3B1cF9fJyArIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xuICAgICAgICAgICAgICAgIGN1ckNvbnRlbnQuY3NzKCB7IGRpc3BsYXk6ICdibG9jaycgfSApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xufSApKCk7XG5cbiIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJy5tYWluLXNsaWRlcicpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgTWFpblNsaWRlciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuXG4gICAgdmFyIE1haW5TbGlkZXIgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX3NsaWRlID0gX29iai5maW5kKCcuc3dpcGVyLXNsaWRlJyksXG4gICAgICAgICAgICBfc3dpcGVyLFxuICAgICAgICAgICAgX2dsb2JhbFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZ2xvYmFsV2luV2lkdGggPCBfd2luZG93LndpZHRoKCkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWxXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKSAtIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2xpZGUuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zbGlkZS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICQoJy5zd2lwZXItY29udGFpbmVyJykuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXRTbGlkZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9zd2lwZXIgPSBuZXcgU3dpcGVyKCBfb2JqLmZpbmQoICcuc3dpcGVyLWNvbnRhaW5lcicgKSwge1xuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiBfb2JqLmZpbmQoJy5zd2lwZXItcGFnaW5hdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uQ2xpY2thYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogNjAwLFxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBsb29wZWRTbGlkZXM6IDEsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiA1MDAwLFxuICAgICAgICAgICAgICAgICAgICB0b3VjaFJhdGlvOiAyLFxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX29iai5maW5kKCcuc3dpcGVyLWJ1dHRvbi1uZXh0JyksXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9vYmouZmluZCgnLnN3aXBlci1idXR0b24tcHJldicpLFxuICAgICAgICAgICAgICAgICAgICBvblNsaWRlQ2hhbmdlRW5kOiBmdW5jdGlvbihzd2lwZXIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVyLnNsaWRlcy5maW5kKCcubWFpbi1zbGlkZXJfX2NvbnRlbnQnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVyLnNsaWRlcy5lcShzd2lwZXIuYWN0aXZlSW5kZXgpLmZpbmQoJy5tYWluLXNsaWRlcl9fY29udGVudCcpLmFkZENsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9zbGlkZS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAkKCcuc3dpcGVyLWNvbnRhaW5lcicpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9pbml0U2xpZGVyKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTtcbiIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJy5zZWFyY2gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFNlYXJjaCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBTZWFyY2ggPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaW5wdXQgPSBfb2JqLmZpbmQoJ2lucHV0W3R5cGU9c2VhcmNoXScpLFxuICAgICAgICAgICAgX3JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgICAgIF9wYXRoID0gX29iai5kYXRhKCdwYXRoJyksXG4gICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwLFxuICAgICAgICAgICAgY291bnRJdGVtcyA9IDAsXG4gICAgICAgICAgICB2YWx1ZUlucHV0ID0gX2lucHV0LnZhbCgpLFxuICAgICAgICAgICAgX3Jlc3VsdCA9IF9vYmouZmluZCgnLnNlYXJjaF9fcmVzdWx0Jyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xuICAgICAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24oSSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChJLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5sZW5ndGggPT0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlSW5wdXQgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHZhbHVlSW5wdXQubGVuZ3RoID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hamF4UmVxdWVzdCggJCh0aGlzKSwgdmFsdWVJbnB1dC5sZW5ndGgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS52YWwoKSA9PSAnJyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24oSSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCggSS5rZXlDb2RlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmZpbHRlcignLmFjdGl2ZScpLmxlbmd0aCA9PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX29iai5kYXRhKCdhY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykuZmluZCgnYScpLmF0dHIoJ2hyZWYnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGNvdW50SXRlbXMgPiAwICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2tleUFjdGl2YXRlKCBJLmtleUNvZGUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzdWdnZXN0U2VsZWN0ZWQgPT0gY291bnRJdGVtcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5jbGljayggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgXCJib2R5XCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBldmVudCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgXCIuc2VhcmNoX19mb3VuZCBsaVwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJUZXh0ID0gY3VySXRlbS5maW5kKCdhJykudGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKGN1clRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwia2V5ZG93blwiLFxuICAgICAgICAgICAgICAgICAgICBcIi5zZWFyY2hfX2ZvdW5kIGxpXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKEkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKEkua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfa2V5QWN0aXZhdGUgPSBmdW5jdGlvbihuKSB7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgaWYoIF9vYmoucGFyZW50cygpLmhhc0NsYXNzKCdzaXRlX19mb290ZXInKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggbiA9PSAzOCAmJiBzdWdnZXN0U2VsZWN0ZWQgPCBjb3VudEl0ZW1zICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQrKztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBuID09IDQwICYmIHN1Z2dlc3RTZWxlY3RlZCA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZC0tO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHN1Z2dlc3RTZWxlY3RlZCA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggLTEgLSAoc3VnZ2VzdFNlbGVjdGVkIC0gMSkgKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZXEoIC0xIC0gKHN1Z2dlc3RTZWxlY3RlZCAtIDEpICkuZmluZCgnYScpLnRleHQoKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIHZhbHVlSW5wdXQgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBuID09IDQwICYmIHN1Z2dlc3RTZWxlY3RlZCA8IGNvdW50SXRlbXMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCsrO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG4gPT0gMzggJiYgc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkLS07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiggc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCBzdWdnZXN0U2VsZWN0ZWQgLSAxICkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCBzdWdnZXN0U2VsZWN0ZWQgLSAxICkuZmluZCgnYScpLnRleHQoKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIHZhbHVlSW5wdXQgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGREYXRhID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXMsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgPSBjYXRlZ29yaWVzLmxlbmd0aCAhPSAwLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0cyA9IGRhdGEucHJvZHVjdHMsXG4gICAgICAgICAgICAgICAgICAgIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgdXJsUHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzV3JhcCA9ICc8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX193cmFwXCI+JztcblxuICAgICAgICAgICAgICAgICQuZWFjaCggcHJvZHVjdHMsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c1dyYXAgKz0gJzxkaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvcC1wcm9kdWN0c19faXRlbVwiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19waWNcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJysgcHJvZHVjdC5zcmMgKydcIiB3aWR0aD1cIjQxNFwiIGhlaWdodD1cIjQxNFwiIGFsdD1cIicrIHByb2R1Y3QuYWx0ICsnXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRvcC1wcm9kdWN0c19fcHJpY2VcIj48ZGVsPicrIHByb2R1Y3Qub2xkUHJpY2UgKyc8L2RlbD4gJysgcHJvZHVjdC5wcmljZSArJzwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidG9wLXByb2R1Y3RzX19pdGVtLXRpdGxlXCI+JysgcHJvZHVjdC5uYW1lICsnPC9oMz5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicrIHByb2R1Y3QuaHJlZiArJ1wiIGNsYXNzPVwidG9wLXByb2R1Y3RzX19idG5cIj52aWV3PC9hPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgaWYoICFjYXRlZ29yaWVzQXZhaWxhYmlsaXR5ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaCggW3Byb2R1Y3QuY2F0ZWdvcmllcy5tYWluQ2F0ZWdvcnksIHByb2R1Y3QuY2F0ZWdvcmllcy51cmxNYWluQ2F0ZWdvcnksIHByb2R1Y3QuY2F0ZWdvcmllcy5zdWJjYXRlZ29yaWVzLCBwcm9kdWN0LmNhdGVnb3JpZXMudXJsU3ViY2F0ZWdvcmllc10gKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBwcm9kdWN0c1dyYXAgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdicpLmVxKDEpLmZpbmQoJy50b3AtcHJvZHVjdHMnKS5odG1sKHByb2R1Y3RzV3JhcCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0U3RyID0gJzx1bCBjbGFzcz1cInNlYXJjaF9fZm91bmRcIj4nO1xuXG4gICAgICAgICAgICAgICAgaWYoIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBjYXRlZ29yaWVzLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YmNhdGVnb3JpZXMgPSB0aGlzLnN1YmNhdGVnb3JpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsU3ViY2F0ZWdvcmllcyA9IHRoaXMudXJsU3ViY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggc3ViY2F0ZWdvcmllcyAhPSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciBpID0gMDsgaSA8PSBzdWJjYXRlZ29yaWVzLmxlbmd0aC0xOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJzxsaSBjbGFzcz1cInNlYXJjaF9fZm91bmQtc3ViXCI+PGEgaHJlZj1cIicrIHVybFN1YmNhdGVnb3JpZXNbaV0gKydcIj4nICsgc3ViY2F0ZWdvcmllc1tpXSArICc8L2E+PC9saT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0ciArPSAnPGxpPjxhIGhyZWY9XCInKyB0aGlzLnVybENhdGVnb3J5ICsnXCI+JysgdGhpcy5uYW1lICsnPC9hPjwvbGk+Jysgc3ViY2F0ZWdvcmllc1dyYXAgKycnO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMTsgaSsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggZmxhZyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggcHJvZHVjdHNDYXRlZ29yaWVzQXJyW3Byb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMV1bMF0gIT0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzBdICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMDsgaiA8PSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0ubGVuZ3RoLTE7IGorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgeiA9IDA7IHogPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdLmxlbmd0aC0xOyB6KysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5pbmRleE9mKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0pID09IC0xICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW3Byb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMV1bMl0ucHVzaCggYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdW3pdIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTE7IGkrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YmNhdGVnb3JpZXNXcmFwID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciB6ID0gMDsgeiA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl0ubGVuZ3RoLTE7IHorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVszXVt6XSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdW3pdICsgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyICs9ICc8bGk+PGEgaHJlZj1cIicgKyBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMV0gKyAnXCI+JyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVswXSArICc8L2E+PC9saT4nKyBzdWJjYXRlZ29yaWVzV3JhcCArJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0U3RyICs9ICc8L3VsPic7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdjpmaXJzdCcpLmh0bWwocmVzdWx0U3RyKTtcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaTpub3QoOmx0KDExKSknKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIGNvdW50SXRlbXMgPSBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kJykuZmluZCgnbGknKS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmFkZENsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWpheFJlcXVlc3QgPSAgZnVuY3Rpb24oIGlucHV0LCBuICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IF9wYXRoLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaW5wdXQudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246J21haW5fc2VhcmNoJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZERhdGEoIG1zZyApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyJdfQ==
