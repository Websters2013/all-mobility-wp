!function(){$(function(){$(".site__menu").each(function(){new e($(this)),new n($(this))})});var e=function(e){var n=e,i=n.find(".site__menu-item"),t=n.find(".site__menu-icon"),d=$(window),s=null,a=d.width(),o=function(){d.on({resize:function(){a>d.width()&&(a=d.width(),d.find(".opened").removeClass("opened"))}}),$("body").on("click",".site__menu-icon",function(){if(jQuery(window).width()<1e3){var e=jQuery(this),n=e.parent("li");n.hasClass("opened")?n.removeClass("opened"):n.addClass("opened")}return!1}),t.on({click:function(){var e=jQuery(this),n=e.parents("li"),i=n.find(".site__menu-sub");return d.width()<1024&&(n.hasClass("opened")?(n.removeClass("opened"),i.slideUp()):(n.addClass("opened"),i.slideDown())),!1}}),i.on({mouseenter:function(){if(d.width()>=1024){var e=$(this);e.parent("ul");if(e.hasClass("site__menu-item_sub")){e.addClass("opened");var n=e.find(".site__menu-sub");d.width()-(n.innerWidth()+e.offset().left)<0?e.offset().left+e.innerWidth()-n.innerWidth()<0?n.css({left:"50%","-webkit-transform":"translateX(-50%)",transform:"translateX(-50%)"}):n.css({left:e.position().left-n.innerWidth()+e.innerWidth()}):n.css({left:e.position().left})}}}}),$("[data-product]").on({mouseenter:function(){if(d.width()>=1024){$(".featured-product__loading").addClass("visible"),s&&(clearTimeout(s),s=null);var e=$(this),i=e.data("product");$(".featured-product__loading").hasClass("visible")&&(s=setTimeout(function(){n.find(".featured-product").find(".featured-product__title").text(i.name),n.find(".featured-product").find(".featured-product__pic img").attr("src",i.src),n.find(".featured-product").find(".btn").attr("url",i.href),n.find(".featured-product").find(".featured-product__price span").text(i.price),i.onSale?n.find(".featured-product").find(".featured-product__remark").addClass("visible"):n.find(".featured-product").find(".featured-product__remark").removeClass("visible"),i.oldPrice?n.find(".featured-product").find(".featured-product__price del").text(i.oldPrice):n.find(".featured-product").find(".featured-product__price del").addClass("hidden")},160),s=setTimeout(function(){$(".featured-product__loading").removeClass("visible")},320))}}}),n.on("mouseleave",function(){d.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("ul").on("mouseleave",function(){d.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("li").on("mouseleave",function(){d.width()>=1024&&$(this).removeClass("opened")})},r=function(){o()};r()},n=function(e){var n,i=this,t=e,d=$(window),s=!1,a=$(".site__header"),o=$(".site__hidden-items"),r=a.innerHeight(),u=$(".site__header-btn"),c=$(".site__hidden-close"),l=$(".search"),f=$(".search-btn"),h=$(".search__cancel"),p=$(".site__hidden-btn"),_=function(){u.on({click:function(){C($(this))}}),c.on({click:function(){return b(),!1}}),f.on({click:function(){return w($(this)),!1}}),h.on({click:function(){return k(),!1}}),d.on({scroll:function(){m(),s=d.scrollTop()>=r},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var i=n>0?1:-1;v(i)}},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var i=n>0?-1:1;v(i)}},touchmove:function(e){var i=e.originalEvent.touches[0].clientY;i>n?v(-1):i<n&&v(1),n=i},keydown:function(e){switch(e.which){case 32:v(1);break;case 33:v(-1);break;case 34:v(1);break;case 35:v(1);break;case 36:v(-1);break;case 38:v(-1);break;case 40:v(1);break;default:return}}})},v=function(e){e>0&&!a.hasClass("site__header_hidden")&&!u.hasClass("opened")&&s&&a.addClass("site__header_hidden"),e<0&&a.hasClass("site__header_hidden")&&!u.hasClass("opened")&&s&&a.removeClass("site__header_hidden")},m=function(){d.scrollTop()>r+150?a.addClass("fixed"):a.removeClass("fixed")},C=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),o.removeClass("opened")):(n.addClass("opened"),o.addClass("opened"))},w=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),l.removeClass("active"),p.removeClass("hidden")):(n.addClass("opened"),l.addClass("active"),p.addClass("hidden"))},b=function(){u.removeClass("opened"),o.removeClass("opened")},k=function(){f.removeClass("opened"),l.removeClass("active"),p.removeClass("hidden")},g=function(){t[0].obj=i,_()};g()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return m($(this).attr("data-popup")),!1}}),c.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},m=function(o){v(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},v=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$(".main-slider").each(function(){new n($(this))})});var n=function(n){var i,t=n,e=$(window),o=t.find(".swiper-slide"),a=function(){e.resize(function(){o.css({minHeight:""}),o.css({minHeight:$(".swiper-container").height()})})},s=function(){i=new Swiper(t.find(".swiper-container"),{pagination:t.find(".swiper-pagination"),paginationClickable:!0,speed:600,loop:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,nextButton:t.find(".swiper-button-next"),prevButton:t.find(".swiper-button-prev")}),o.css({minHeight:$(".swiper-container").height()})},r=function(){a(),s()};r()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var a=e,t=a.find("input[type=search]"),s=new XMLHttpRequest,i=a.data("path"),r=0,n=0,c=t.val(),l=a.find(".search__result"),o=function(){t.on({keyup:function(e){switch(e.keyCode){case 13:0==$(".search__found li").filter(".active").length&&a.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var t=$(this).val();t.length>0?f($(this),t.length):""==$(this).val()&&($(".search__result").removeClass("visible"),r=0)}},keydown:function(e){switch(e.keyCode){case 13:if(0==$(".search__found li").filter(".active").length)return window.location.href=a.data("action"),!1;break;case 27:return $(".search__result").remove(),r=0,!1;case 38:case 40:e.preventDefault(),n>0&&(h(e.keyCode),r==n&&(r=0))}}})},h=function(e){$(".search__found li").removeClass("active"),40==e&&r<n?r++:38==e&&r>0&&r--,r>0?($(".search__found li").eq(r-1).addClass("active"),t.val($(".search__found li").eq(r-1).find("a").text())):t.val(c)},u=function(e){var e=e,a=e.categories,t=0!=a.length,s=e.products,i=[],r=[],c=!0;l.addClass("visible");var o='<div class="top-products__wrap">';$.each(s,function(){var e=this;o+='<div>                                            <div class="top-products__item">                                                <div class="top-products__pic">                                                    <img src="'+e.src+'" width="414" height="414" alt="'+e.alt+'">                                                </div>                                                <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                <h3 class="top-products__item-title">'+e.name+'</h3>                                                <a href="'+e.href+'" class="top-products__btn">view</a>                                            </div>                                        </div>',t||i.push([e.categories.mainCategory,e.categories.subcategories])}),o+="</div>",l.find("div").eq(1).find(".top-products").html(o);var h='<ul class="search__found">';if(t)$.each(a,function(){var e=this.subcategories,a="";if(void 0!=e){for(var t=0;t<=e.length-1;t++)a+='<li class="search__found-sub"><a href="#">'+e[t]+"</a></li>";a+=""}h+='<li><a href="#">'+this.name+"</a></li>"+a});else{for(var u=0;u<=i.length-1;u++)if(c&&(r.push(i[u]),c=!1),r[r.length-1][0]!=i[u][0])r.push(i[u]);else for(var f=0;f<=i[u].length-1;f++)for(var d=0;d<=i[u][1].length-1;d++)r[r.length-1][1].indexOf(i[u][1][d])==-1&&r[r.length-1][1].push(i[u][1][d]);for(var v=0,u=0;u<=r.length-1;u++){for(var f=0;f<=r[u].length-1;f++){for(var _="",d=0;d<=r[u][1].length-1;d++)v<12&&(_+='<li class="search__found-sub"><a href="#">'+r[u][1][d]+"</a></li>",v++);_+=""}v<12&&(h+='<li><a href="#">'+r[u][0]+"</a></li>"+_)}}h+="</ul>",l.find("div:first").html(h),n=$(h).find("li").length},f=function(e,a){return s.abort(),s=$.ajax({url:i,data:{value:e.val()},dataType:"json",type:"get",success:function(e){u(e)},error:function(e){"abort"!=e.statusText&&alert("При попытке отправить сообщение произошла неизвестная ошибка. \n Попробуй еще раз через несколько минут.")}}),!1},d=function(){o()};d()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5LmluZGV4LmpzIiwianF1ZXJ5LnNlYXJjaC5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIlN1Yk1lbnUiLCJ0aGlzIiwiTWVudSIsIm9iaiIsIl9vYmoiLCJfaXRlbXMiLCJmaW5kIiwiX2Fycm93IiwiX3dpbmRvdyIsIndpbmRvdyIsInRpbWVvdXQiLCJfc3RhcnRXaW5XaWR0aCIsIndpZHRoIiwiX2FkZEV2ZW50cyIsIm9uIiwicmVzaXplIiwicmVtb3ZlQ2xhc3MiLCJqUXVlcnkiLCJjdXJJdGVtIiwicGFyZW50IiwiaGFzQ2xhc3MiLCJhZGRDbGFzcyIsImNsaWNrIiwicGFyZW50cyIsInN1Yk1lbnUiLCJzbGlkZVVwIiwic2xpZGVEb3duIiwibW91c2VlbnRlciIsImlubmVyV2lkdGgiLCJvZmZzZXQiLCJsZWZ0IiwiY3NzIiwiLXdlYmtpdC10cmFuc2Zvcm0iLCJ0cmFuc2Zvcm0iLCJwb3NpdGlvbiIsImNsZWFyVGltZW91dCIsImRhdGEiLCJzZXRUaW1lb3V0IiwidGV4dCIsIm5hbWUiLCJhdHRyIiwic3JjIiwiaHJlZiIsInByaWNlIiwib25TYWxlIiwib2xkUHJpY2UiLCJfaW5pdCIsIl9sYXN0UG9zIiwiX3NlbGYiLCJfbWVudSIsIl9hY3Rpb24iLCJfaGVhZGVyIiwiX2hpZGRlbkJsb2NrTWVudSIsIl9oZWFkZXJIZWlnaHQiLCJpbm5lckhlaWdodCIsIl9zaG93QnRuIiwiX2Nsb3NlQnRuIiwiX3NlYXJjaCIsIl9vcGVuU2VhcmNoIiwiX2Nsb3NlU2VhcmNoIiwiX2dldEZyZWUiLCJfb3Blbk1lbnUiLCJfY2xvc2VNZW51IiwiX29wZW5TZWFyY2hCb3giLCJfY2xvc2VTZWFyY2hCb3giLCJzY3JvbGwiLCJfZml4ZWRIZWFkZXIiLCJzY3JvbGxUb3AiLCJET01Nb3VzZVNjcm9sbCIsImUiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJkZXRhaWwiLCJkaXJlY3Rpb24iLCJfY2hlY2tTY3JvbGwiLCJtb3VzZXdoZWVsIiwid2hlZWxEZWx0YSIsInRvdWNobW92ZSIsImN1cnJlbnRQb3MiLCJ0b3VjaGVzIiwiY2xpZW50WSIsImtleWRvd24iLCJ3aGljaCIsImVsZW0iLCJQb3B1cCIsIl9wb3B1cFBhZGRpbmciLCJfYnRuU2hvdyIsIl9idG5DbG9zZSIsIl93cmFwIiwiX2NvbnRlbnRzIiwiX3Njcm9sbENvbnRlaW5lciIsIl90aW1lciIsIl9jZW50ZXJXcmFwIiwiaGVpZ2h0IiwidG9wIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsQmFyV2lkdGgiLCJzY3JvbGxEaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNsaWVudFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJfaGlkZSIsIm92ZXJmbG93WSIsInBhZGRpbmdSaWdodCIsIl9vbkV2ZW50cyIsIl9zaG93Iiwic3RvcFByb3BhZ2F0aW9uIiwiX3NldFBvcHVwQ29udGVudCIsImN1ckNvbnRlbnQiLCJmaWx0ZXIiLCJkaXNwbGF5IiwiTWFpblNsaWRlciIsIl9zd2lwZXIiLCJfc2xpZGUiLCJtaW5IZWlnaHQiLCJfaW5pdFNsaWRlciIsIlN3aXBlciIsInBhZ2luYXRpb24iLCJwYWdpbmF0aW9uQ2xpY2thYmxlIiwic3BlZWQiLCJsb29wIiwiYXV0b3BsYXkiLCJhdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uIiwibmV4dEJ1dHRvbiIsInByZXZCdXR0b24iLCJTZWFyY2giLCJfaW5wdXQiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiX3BhdGgiLCJzdWdnZXN0U2VsZWN0ZWQiLCJjb3VudEl0ZW1zIiwidmFsdWVJbnB1dCIsInZhbCIsIl9yZXN1bHQiLCJrZXl1cCIsIkkiLCJrZXlDb2RlIiwibGVuZ3RoIiwic3VibWl0IiwiX2FqYXhSZXF1ZXN0IiwibG9jYXRpb24iLCJyZW1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsIl9rZXlBY3RpdmF0ZSIsIm4iLCJlcSIsIl9hZGREYXRhIiwiY2F0ZWdvcmllcyIsImNhdGVnb3JpZXNBdmFpbGFiaWxpdHkiLCJwcm9kdWN0cyIsImFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsInByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsImZsYWciLCJwcm9kdWN0c1dyYXAiLCJwcm9kdWN0IiwiYWx0IiwicHVzaCIsIm1haW5DYXRlZ29yeSIsInN1YmNhdGVnb3JpZXMiLCJodG1sIiwicmVzdWx0U3RyIiwic3ViY2F0ZWdvcmllc1dyYXAiLCJ1bmRlZmluZWQiLCJpIiwiaiIsInoiLCJpbmRleE9mIiwiY291bnQiLCJpbnB1dCIsImFib3J0IiwiYWpheCIsInVybCIsInZhbHVlIiwiZGF0YVR5cGUiLCJ0eXBlIiwic3VjY2VzcyIsIm1zZyIsImVycm9yIiwic3RhdHVzVGV4dCIsImFsZXJ0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUVJQSxFQUFFLFdBRUVBLEVBQUUsZUFBZUMsS0FBSyxXQUVsQixHQUFJQyxHQUFTRixFQUFFRyxPQUNmLEdBQUlDLEdBQU1KLEVBQUVHLFVBTXBCLElBQUlELEdBQVUsU0FBVUcsR0FHcEIsR0FBSUMsR0FBT0QsRUFDUEUsRUFBU0QsRUFBS0UsS0FBSyxvQkFDbkJDLEVBQVNILEVBQUtFLEtBQUssb0JBQ25CRSxFQUFVVixFQUFFVyxRQUNaQyxFQUFVLEtBQ1ZDLEVBQWlCSCxFQUFRSSxRQUl6QkMsRUFBYSxXQUVUTCxFQUFRTSxJQUNKQyxPQUFRLFdBRUFKLEVBQWlCSCxFQUFRSSxVQUV6QkQsRUFBaUJILEVBQVFJLFFBRXpCSixFQUFRRixLQUFLLFdBQVdVLFlBQVksY0FNaERsQixFQUFFLFFBQVFnQixHQUFHLFFBQVMsbUJBQW9CLFdBRXRDLEdBQUlHLE9BQU9SLFFBQVFHLFFBQVUsSUFBTyxDQUVoQyxHQUFJTSxHQUFVRCxPQUFPaEIsTUFDakJrQixFQUFTRCxFQUFRQyxPQUFPLEtBRXZCQSxHQUFPQyxTQUFTLFVBRWpCRCxFQUFPSCxZQUFZLFVBSW5CRyxFQUFP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RWpCeUMsU0FBVSxPQUNWQyxLQUFNLE1BQ05DLFFBQVMsU0FBV0MsR0FFaEI5QixFQUFVOEIsSUFHZEMsTUFBTyxTQUFVbEQsR0FDb0IsU0FBN0JBLEVBQWVtRCxZQUNmQyxNQUFNLGdIQUtYLEdBRVgzSSxFQUFRLFdBQ0pqQyxJQU9SaUMiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCBmdW5jdGlvbigpe1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLnNpdGVfX21lbnUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFN1Yk1lbnUoICQodGhpcykgKTtcbiAgICAgICAgICAgIG5ldyBNZW51KCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFN1Yk1lbnUgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaXRlbXMgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51LWl0ZW0nKSxcbiAgICAgICAgICAgIF9hcnJvdyA9IF9vYmouZmluZCgnLnNpdGVfX21lbnUtaWNvbicpLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsLFxuICAgICAgICAgICAgX3N0YXJ0V2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfc3RhcnRXaW5XaWR0aCA+IF93aW5kb3cud2lkdGgoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGFydFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3dpbmRvdy5maW5kKCcub3BlbmVkJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5zaXRlX19tZW51LWljb24nLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggalF1ZXJ5KHdpbmRvdykud2lkdGgoKSA8IDEwMDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0galF1ZXJ5KHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGN1ckl0ZW0ucGFyZW50KCdsaScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudC5oYXNDbGFzcygnb3BlbmVkJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfYXJyb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBqUXVlcnkodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnRzKCdsaScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUgPSBwYXJlbnQuZmluZCgnLnNpdGVfX21lbnUtc3ViJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcGFyZW50Lmhhc0NsYXNzKCdvcGVuZWQnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LnNsaWRlVXAoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5zbGlkZURvd24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9pdGVtcy5vbigge1xuICAgICAgICAgICAgICAgICAgICBtb3VzZWVudGVyOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudCgndWwnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmhhc0NsYXNzKCdzaXRlX19tZW51LWl0ZW1fc3ViJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Yk1lbnUgPSBjdXJJdGVtLmZpbmQoJy5zaXRlX19tZW51LXN1YicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAoIF93aW5kb3cud2lkdGgoKSAtICggc3ViTWVudS5pbm5lcldpZHRoKCkgKyBjdXJJdGVtLm9mZnNldCgpLmxlZnQgKSApIDwgMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICggKCBjdXJJdGVtLm9mZnNldCgpLmxlZnQgKyBjdXJJdGVtLmlubmVyV2lkdGgoKSApIC0gc3ViTWVudS5pbm5lcldpZHRoKCkgKSA8IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnNTAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoLTUwJSknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoLTUwJSknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogY3VySXRlbS5wb3NpdGlvbigpLmxlZnQgLSBzdWJNZW51LmlubmVyV2lkdGgoKSArIGN1ckl0ZW0uaW5uZXJXaWR0aCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlICB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogY3VySXRlbS5wb3NpdGlvbigpLmxlZnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICQoJ1tkYXRhLXByb2R1Y3RdJykub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbW91c2VlbnRlcjogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gY3VySXRlbS5kYXRhKCdwcm9kdWN0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggJCgnLmZlYXR1cmVkLXByb2R1Y3RfX2xvYWRpbmcnKS5oYXNDbGFzcygndmlzaWJsZScpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X190aXRsZScpLnRleHQoZGF0YS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcGljIGltZycpLmF0dHIoJ3NyYycsIGRhdGEuc3JjKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuYnRuJykuYXR0cigndXJsJywgZGF0YS5ocmVmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2Ugc3BhbicpLnRleHQoZGF0YS5wcmljZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBkYXRhLm9uU2FsZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3JlbWFyaycpLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcmVtYXJrJykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGRhdGEub2xkUHJpY2UgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSBkZWwnKS50ZXh0KGRhdGEub2xkUHJpY2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSBkZWwnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTYwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuZmVhdHVyZWQtcHJvZHVjdF9fbG9hZGluZycpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzIwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmoub24oICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm9wZW5lZCcpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5maW5kKCd1bCcpLm9uKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5vcGVuZWQnKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouZmluZCgnbGknKS5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX21lbnUgPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgX2FjdGlvbiA9IGZhbHNlLFxuICAgICAgICAgICAgX2xhc3RQb3MsXG4gICAgICAgICAgICBfaGVhZGVyID0gJCgnLnNpdGVfX2hlYWRlcicpLFxuICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudSA9ICQoJy5zaXRlX19oaWRkZW4taXRlbXMnKSxcbiAgICAgICAgICAgIF9oZWFkZXJIZWlnaHQgPSBfaGVhZGVyLmlubmVySGVpZ2h0KCksXG4gICAgICAgICAgICBfc2hvd0J0biA9ICQoJy5zaXRlX19oZWFkZXItYnRuJyksXG4gICAgICAgICAgICBfY2xvc2VCdG4gPSAkKCcuc2l0ZV9faGlkZGVuLWNsb3NlJyksXG4gICAgICAgICAgICBfc2VhcmNoID0gJCgnLnNlYXJjaCcpLFxuICAgICAgICAgICAgX29wZW5TZWFyY2ggPSAkKCcuc2VhcmNoLWJ0bicpLFxuICAgICAgICAgICAgX2Nsb3NlU2VhcmNoID0gJCgnLnNlYXJjaF9fY2FuY2VsJyksXG4gICAgICAgICAgICBfZ2V0RnJlZSA9ICQoJy5zaXRlX19oaWRkZW4tYnRuJyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfc2hvd0J0bi5vbih7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuTWVudSgkKHRoaXMpKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX2Nsb3NlQnRuLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF9vcGVuU2VhcmNoLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5TZWFyY2hCb3goJCh0aGlzKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX2Nsb3NlU2VhcmNoLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlU2VhcmNoQm94KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maXhlZEhlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGlvbiA9IF93aW5kb3cuc2Nyb2xsVG9wKCkgPj0gX2hlYWRlckhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBET01Nb3VzZVNjcm9sbDogZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LmRldGFpbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IChkZWx0YSA+IDApID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtb3VzZXdoZWVsOiBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IChkZWx0YSA+IDApID8gLTEgOiAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0b3VjaG1vdmU6IGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UG9zID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQb3MgPiBfbGFzdFBvcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQb3MgPCBfbGFzdFBvcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9sYXN0UG9zID0gY3VycmVudFBvcztcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLndoaWNoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzYgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDAgJiYgIV9oZWFkZXIuaGFzQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKSAmJiAhX3Nob3dCdG4uaGFzQ2xhc3MoJ29wZW5lZCcpICYmIF9hY3Rpb24pIHtcblxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uIDwgMCAmJiBfaGVhZGVyLmhhc0NsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJykgJiYgIV9zaG93QnRuLmhhc0NsYXNzKCdvcGVuZWQnKSAmJiBfYWN0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2ZpeGVkSGVhZGVyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKF93aW5kb3cuc2Nyb2xsVG9wKCkgPiBfaGVhZGVySGVpZ2h0ICsgMTUwICApIHtcblxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCdmaXhlZCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuXG4gICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb3Blbk1lbnUgPSBmdW5jdGlvbiAoZWxlbSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBlbGVtO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1ckl0ZW0uaGFzQ2xhc3MoJ29wZW5lZCcpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgX2hpZGRlbkJsb2NrTWVudS5hZGRDbGFzcygnb3BlbmVkJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb3BlblNlYXJjaEJveCA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGVsZW07XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5oYXNDbGFzcygnb3BlbmVkJykpIHtcblxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgX3NlYXJjaC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIF9nZXRGcmVlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWFyY2guYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBfZ2V0RnJlZS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2xvc2VNZW51ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3Nob3dCdG4ucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Nsb3NlU2VhcmNoQm94ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29wZW5TZWFyY2gucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgICAgIF9zZWFyY2gucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIF9nZXRGcmVlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9tZW51WzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTsiLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKCBmdW5jdGlvbigpe1xuXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIHZhciBQb3B1cCA9IGZ1bmN0aW9uKCBvYmogKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxuICAgICAgICAgICAgX2J0blNob3cgPSAgJCggJy5wb3B1cF9fb3BlbicgKSxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcbiAgICAgICAgICAgIF93cmFwID0gX29iai5maW5kKCAnLnBvcHVwX193cmFwJyApLFxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcblxuICAgICAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5jc3MgKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuU2hvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93KCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0bkNsb3NlLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyQ29udGVudCA9IF9jb250ZW50cy5maWx0ZXIoICcucG9wdXBfXycgKyBjbGFzc05hbWUgKTtcblxuICAgICAgICAgICAgICAgIF9jb250ZW50cy5jc3MoIHsgZGlzcGxheTogJ25vbmUnIH0gKTtcbiAgICAgICAgICAgICAgICBjdXJDb250ZW50LmNzcyggeyBkaXNwbGF5OiAnYmxvY2snIH0gKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcbn0gKSgpO1xuXG4iLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAkKCcubWFpbi1zbGlkZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IE1haW5TbGlkZXIoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cblxuICAgIHZhciBNYWluU2xpZGVyID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9zbGlkZSA9IF9vYmouZmluZCgnLnN3aXBlci1zbGlkZScpLFxuICAgICAgICAgICAgX3N3aXBlcjtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5yZXNpemUoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9zbGlkZS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogJydcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBfc2xpZGUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICQoJy5zd2lwZXItY29udGFpbmVyJykuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0U2xpZGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfc3dpcGVyID0gbmV3IFN3aXBlciggX29iai5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogX29iai5maW5kKCcuc3dpcGVyLXBhZ2luYXRpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDYwMCxcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDUwMDAsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5RGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uOiBfb2JqLmZpbmQoJy5zd2lwZXItYnV0dG9uLW5leHQnKSxcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX29iai5maW5kKCcuc3dpcGVyLWJ1dHRvbi1wcmV2JylcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfc2xpZGUuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogJCgnLnN3aXBlci1jb250YWluZXInKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfaW5pdFNsaWRlcigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7XG4iLCIoIGZ1bmN0aW9uKCl7XG5cbiAgICAkKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAkKCcuc2VhcmNoJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTZWFyY2goICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG5cbiAgICB2YXIgU2VhcmNoID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2lucHV0ID0gX29iai5maW5kKCdpbnB1dFt0eXBlPXNlYXJjaF0nKSxcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgICAgICBfcGF0aCA9IF9vYmouZGF0YSgncGF0aCcpLFxuICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMCxcbiAgICAgICAgICAgIGNvdW50SXRlbXMgPSAwLFxuICAgICAgICAgICAgdmFsdWVJbnB1dCA9IF9pbnB1dC52YWwoKSxcbiAgICAgICAgICAgIF9yZXN1bHQgPSBfb2JqLmZpbmQoJy5zZWFyY2hfX3Jlc3VsdCcpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfaW5wdXQub24oIHtcbiAgICAgICAgICAgICAgICAgICAga2V5dXA6IGZ1bmN0aW9uKEkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKEkua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoID09IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZUlucHV0ID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggdmFsdWVJbnB1dC5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWpheFJlcXVlc3QoICQodGhpcyksIHZhbHVlSW5wdXQubGVuZ3RoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLnZhbCgpID09ICcnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNlYXJjaF9fcmVzdWx0JykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VsZi5jb3JlLmdvU3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uKEkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKCBJLmtleUNvZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggJCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5sZW5ndGggPT0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX29iai5kYXRhKCdhY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNlYXJjaF9fcmVzdWx0JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY291bnRJdGVtcyA+IDAgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9rZXlBY3RpdmF0ZSggSS5rZXlDb2RlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzdWdnZXN0U2VsZWN0ZWQgPT0gIGNvdW50SXRlbXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2tleUFjdGl2YXRlID0gZnVuY3Rpb24obikge1xuXG4gICAgICAgICAgICAgICAgJCgnLnNlYXJjaF9fZm91bmQgbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBpZiggbiA9PSA0MCAmJiBzdWdnZXN0U2VsZWN0ZWQgPCBjb3VudEl0ZW1zICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCsrO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbiA9PSAzOCAmJiBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZC0tO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZXEoIHN1Z2dlc3RTZWxlY3RlZCAtIDEgKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoICQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZXEoIHN1Z2dlc3RTZWxlY3RlZCAtIDEgKS5maW5kKCdhJykudGV4dCgpICk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIHZhbHVlSW5wdXQgKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWRkRGF0YSA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzQXZhaWxhYmlsaXR5ID0gY2F0ZWdvcmllcy5sZW5ndGggIT0gMCxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHMgPSBkYXRhLnByb2R1Y3RzLFxuICAgICAgICAgICAgICAgICAgICBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnIgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgX3Jlc3VsdC5hZGRDbGFzcygndmlzaWJsZScpO1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHNXcmFwID0gJzxkaXYgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3dyYXBcIj4nO1xuXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBwcm9kdWN0cywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzV3JhcCArPSAnPGRpdj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19pdGVtXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3BpY1wiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCInKyBwcm9kdWN0LnNyYyArJ1wiIHdpZHRoPVwiNDE0XCIgaGVpZ2h0PVwiNDE0XCIgYWx0PVwiJysgcHJvZHVjdC5hbHQgKydcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidG9wLXByb2R1Y3RzX19wcmljZVwiPjxkZWw+JysgcHJvZHVjdC5vbGRQcmljZSArJzwvZGVsPiAnKyBwcm9kdWN0LnByaWNlICsnPC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2l0ZW0tdGl0bGVcIj4nKyBwcm9kdWN0Lm5hbWUgKyc8L2gzPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJysgcHJvZHVjdC5ocmVmICsnXCIgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2J0blwiPnZpZXc8L2E+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBpZiggIWNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKCBbcHJvZHVjdC5jYXRlZ29yaWVzLm1haW5DYXRlZ29yeSwgcHJvZHVjdC5jYXRlZ29yaWVzLnN1YmNhdGVnb3JpZXNdICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG5cbiAgICAgICAgICAgICAgICBwcm9kdWN0c1dyYXAgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdicpLmVxKDEpLmZpbmQoJy50b3AtcHJvZHVjdHMnKS5odG1sKHByb2R1Y3RzV3JhcCk7XG5cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0U3RyID0gJzx1bCBjbGFzcz1cInNlYXJjaF9fZm91bmRcIj4nO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjYXRlZ29yaWVzQXZhaWxhYmlsaXR5ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goIGNhdGVnb3JpZXMsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YmNhdGVnb3JpZXMgPSB0aGlzLnN1YmNhdGVnb3JpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggc3ViY2F0ZWdvcmllcyAhPSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKCB2YXIgaSA9IDA7IGkgPD0gc3ViY2F0ZWdvcmllcy5sZW5ndGgtMTsgaSsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiI1wiPicgKyBzdWJjYXRlZ29yaWVzW2ldICsgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0ciArPSAnPGxpPjxhIGhyZWY9XCIjXCI+JyArIHRoaXMubmFtZSArICc8L2E+PC9saT4nKyBzdWJjYXRlZ29yaWVzV3JhcCArJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggZmxhZyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaChhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzBdICE9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVswXSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaChhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDA7IGogPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldLmxlbmd0aC0xOyBqKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciB6ID0gMDsgeiA8PSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMV0ubGVuZ3RoLTE7IHorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsxXS5pbmRleE9mKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMV1bel0pID09IC0xICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzFdLnB1c2goIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsxXVt6XSApXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29wMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTE7IGkrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMDsgaiA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0ubGVuZ3RoLTE7IGorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcmllc1dyYXAgPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciB6ID0gMDsgeiA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMV0ubGVuZ3RoLTE7IHorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGNvdW50IDwgMTIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiI1wiPicgKyBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMV1bel0gKyAnPC9hPjwvbGk+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCArKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBjb3VudCA8IDEyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0ciArPSAnPGxpPjxhIGhyZWY9XCIjXCI+JyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVswXSArICc8L2E+PC9saT4nKyBzdWJjYXRlZ29yaWVzV3JhcCArJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyICs9ICc8L3VsPic7XG5cbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCdkaXY6Zmlyc3QnKS5odG1sKHJlc3VsdFN0cik7XG5cblxuICAgICAgICAgICAgICAgIGNvdW50SXRlbXMgPSAkKHJlc3VsdFN0cikuZmluZCgnbGknKS5sZW5ndGg7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWpheFJlcXVlc3QgPSAgZnVuY3Rpb24oIGlucHV0LCBuICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IF9wYXRoLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaW5wdXQudmFsKClcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCBtc2cgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGREYXRhKCBtc2cgKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSBcImFib3J0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcItCf0YDQuCDQv9C+0L/Ri9GC0LrQtSDQvtGC0L/RgNCw0LLQuNGC0Ywg0YHQvtC+0LHRidC10L3QuNC1INC/0YDQvtC40LfQvtGI0LvQsCDQvdC10LjQt9Cy0LXRgdGC0L3QsNGPINC+0YjQuNCx0LrQsC4gXFxuINCf0L7Qv9GA0L7QsdGD0Lkg0LXRidC1INGA0LDQtyDRh9C10YDQtdC3INC90LXRgdC60L7Qu9GM0LrQviDQvNC40L3Rg9GCLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7Il19
