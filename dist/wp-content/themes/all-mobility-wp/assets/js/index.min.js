!function(){var e=!0;Number.prototype.formatMoney=function(e,n,t){var i=this,e=isNaN(e=Math.abs(e))?2:e,n=void 0==n?".":n,t=void 0==t?",":t,s=i<0?"-":"",o=String(parseInt(i=Math.abs(Number(i)||0).toFixed(e))),r=(r=o.length)>3?r%3:0;return s+(r?o.substr(0,r)+t:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+t)+(e?n+Math.abs(i-o).toFixed(e).slice(2):"")},$(function(){$(".site__menu").each(function(){new n($(this)),new t($(this))}),$(".not-found").each(function(){new i($(this))}),$(".confirmation").each(function(){new i($(this))}),$("#wpsl-stores").each(function(){$(this).perfectScrollbar({wheelPropagation:!0})}),$(".checkout").each(function(){new s($(this))}),$(".product__items").each(function(){new o($(this))})});var n=function(e){var n=e,t=n.find(".site__menu-item"),i=n.find(".site__menu-icon"),s=$(window),o=null,r=s.width(),a=function(){s.on({resize:function(){r>s.width()&&(r=s.width(),s.find(".opened").removeClass("opened"))}}),$("body").on("click",".site__menu-icon",function(){if(jQuery(window).width()<1e3){var e=jQuery(this),n=e.parent("li");n.hasClass("opened")?n.removeClass("opened"):n.addClass("opened")}return!1}),i.on({click:function(){var e=jQuery(this),n=e.parents("li"),t=n.find(".site__menu-sub");return s.width()<1024&&(n.hasClass("opened")?(n.removeClass("opened"),t.slideUp()):(n.addClass("opened"),t.slideDown())),!1}}),t.on({mouseenter:function(){if(s.width()>=1024){var e=$(this);e.parent("ul");if(e.hasClass("site__menu-item_sub")){e.addClass("opened");var n=e.find(".site__menu-sub");s.width()-(n.innerWidth()+e.offset().left)<0?e.offset().left+e.innerWidth()-n.innerWidth()<0?n.css({left:"50%","-webkit-transform":"translateX(-50%)",transform:"translateX(-50%)"}):n.css({left:e.position().left-n.innerWidth()+e.innerWidth()}):n.css({left:e.position().left})}}}}),$("[data-product]").on({mouseenter:function(){if(s.width()>=1024){$(".featured-product__loading").addClass("visible"),o&&(clearTimeout(o),o=null);var e=$(this),t=e.data("product");o=setTimeout(function(){n.find(".featured-product").find(".featured-product__title").text(t.name),n.find(".featured-product").find(".featured-product__pic img").attr("src",t.src),n.find(".featured-product").find(".btn").attr("href",t.href),n.find(".featured-product").find(".featured-product__price span").text(t.price),t.onSale?n.find(".featured-product").find(".featured-product__remark").addClass("visible"):n.find(".featured-product").find(".featured-product__remark").removeClass("visible"),t.oldPrice?n.find(".featured-product").find(".featured-product__price del").text(t.oldPrice):n.find(".featured-product").find(".featured-product__price del").addClass("hidden")},160),o=setTimeout(function(){$(".featured-product__loading").removeClass("visible")},200)}}}),n.on("mouseleave",function(){s.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("ul").on("mouseleave",function(){s.width()>=1024&&$(this).find(".opened").removeClass("opened")}),n.find("li").on("mouseleave",function(){s.width()>=1024&&$(this).removeClass("opened")})},d=function(){a()};d()},t=function(n){var t,i,s=this,o=n,r=$(window),a=!1,d=$(".site__header"),c=$(".site__hidden-items"),u=d.innerHeight(),f=$(".site__header-btn"),l=$(".site__hidden-close"),h=$(".search"),p=$(".search-btn"),_=$(".search__cancel"),m=$(".site__hidden-btn"),v=$(".site"),w=$("html"),C=($(".site__content"),function(){$(document).on("click",".search",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click","body",function(){x()}),f.on({click:function(){k($(this))}}),l.on({click:function(){return T(),!1}}),p.on({click:function(){return y($(this)),!1}}),_.on({click:function(){return x(),!1}}),r.on({scroll:function(e){b(),a=r.scrollTop()>=u,0==r.scrollTop()&&d.removeClass("site__header_hidden")},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var t=n>0?1:-1;g(t)}},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var t=n>0?-1:1;g(t)}},touchmove:function(e){var n=e.originalEvent.touches[0].clientY;n>t?g(-1):n<t&&g(1),t=n},keydown:function(e){switch(e.which){case 32:g(1);break;case 33:g(-1);break;case 34:g(1);break;case 35:g(1);break;case 36:g(-1);break;case 38:g(-1);break;case 40:g(1);break;default:return}},resize:function(){r.width()>=1024&&(v.css({height:""}),setTimeout(function(){v.height()>r.height()&&w.css({"overflow-y":""})},10))}})}),g=function(n){n>0&&!d.hasClass("site__header_hidden")&&!f.hasClass("opened")&&a&&d.addClass("site__header_hidden"),n<0&&d.hasClass("site__header_hidden")&&!f.hasClass("opened")&&a&&e&&d.removeClass("site__header_hidden")},b=function(){r.scrollTop()>u+150?d.addClass("fixed"):d.removeClass("fixed")},k=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),c.removeClass("opened")):(n.addClass("opened"),c.addClass("opened")),i=r.scrollTop(),setTimeout(function(){v.height()>r.height()&&w.css({"overflow-y":"scroll"}),setTimeout(function(){v.css({height:"100%"})},10)},300)},y=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),h.removeClass("active"),m.removeClass("hidden")):(n.addClass("opened"),h.addClass("active"),m.addClass("hidden"))},T=function(){f.removeClass("opened"),c.removeClass("opened"),h.find("input").focusout(),v.css({height:""}),setTimeout(function(){v.height()>r.height()&&w.css({"overflow-y":""}),r.scrollTop(i)},10)},x=function(){p.removeClass("opened"),h.removeClass("active"),m.removeClass("hidden")},H=function(){o[0].obj=s,C(),b()};H()},i=function(e){var n=e,t=$(window),i=t.width(),s=function(){t.on({resize:function(){i!=t.width()&&(i=t.width(),o())}})},o=function(){n.css({minHeight:""}),n.css({minHeight:t.height()-$(".site__header").innerHeight()-$(".site__footer").innerHeight()-$(".breadcrumbs").innerHeight()})},r=function(){s(),o()};r()},s=function(e){var n=e,t=n.find(".total-order"),i=function(){},s=function(){n.css({minHeight:t.innerHeight()})},o=function(){i(),s()};o()},o=function(e){var n=e.find("form");n.on("change",function(){var t=e.find("form>.websters-select select"),i=n.find(".variations select"),s=i.length,o=e.attr("data-price"),r=$(".product__price>span>span").text();if(s>0){var a=0;if(i.each(function(){$(this).val()&&a++}),a!==i.length)return!1;""!==n.find(".featured-product__price .price").text().trim()&&(o=$(".price>span").text(),r=$(".price>span>span").text())}o=parseFloat(o.slice(1).split(",").join("")),t.each(function(){var e=$(this).val();e>0&&$(this).find("option").each(function(){$(this).val()===e&&(o+=+$(this).data("price"))})}),$(".price").css("display","none"),0===n.find(".featured-product__price>strong").length&&n.find(".featured-product__price").append('<strong class="product__price"></strong>'),o="<span>"+r+"</span>"+o.formatMoney(2,".",","),n.find(".featured-product__price>strong").html(o)})}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return v($(this).attr("data-popup")),!1}}),u.find(">div").on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},v=function(o){m(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},m=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$(".main-slider").each(function(){new i($(this))})});var i=function(i){var n=i,e=$(window),t=n.find(".main-slider__items"),s=n.find(".swiper-pagination"),d=n.find(".main-slider__constrols .swiper-button-prev"),o=n.find(".main-slider__constrols .swiper-button-next"),r=e.width(),a=function(){t.on("init",function(i){t.find(".slick-current").find(".main-slider__content").addClass("visible")}),t.on("afterChange",function(i,n){$(n.$slides).find(".main-slider__content").removeClass("visible"),$(n.$slides).filter(".slick-current").find(".main-slider__content").addClass("visible")}),e.on({resize:function(){r<e.width()&&(r=e.width()-1,n.find(".main-slider__item").css({minHeight:""}),n.find(".main-slider__item").css({minHeight:t.height()}))}})},l=function(){t.slick({dots:!0,autoplay:!0,autoplaySpeed:5e3,prevArrow:d,nextArrow:o,appendDots:s}),n.find(".main-slider__item").css({minHeight:t.height()})},c=function(){a(),l()};c()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var t=e,i=t.find("input[type=search]"),a=new XMLHttpRequest,s=t.data("path"),n=0,o=0,r=i.val(),c=t.find(".search__result"),l=function(){i.on({keyup:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:0==c.find(".search__found li").filter(".active").length&&t.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var i=$(this).val();i.length>=t.data("symbols")?u($(this),i.length):""==$(this).val()&&(c.removeClass("visible"),n=0)}},keydown:function(e){if(c.find(".search__found").html(""),c.find(".top-products").html(""),n=0,$(window).width()>=1024)switch(e.keyCode){case 13:return 0==c.find(".search__found li").filter(".active").length?window.location.href=t.data("action"):window.location.href=c.find(".search__found li").filter(".active").find("a").attr("href"),!1;case 27:return c.remove(),n=0,!1;case 38:case 40:e.preventDefault(),o>0&&(d(e.keyCode),n==o&&(n=0))}}}),$("html").click(function(){c.removeClass("visible"),n=0}),$(document).on("click","body",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click",".search__found li",function(){var e=$(this),t=e.find("a").text();i.val(t),c.removeClass("visible"),n=0}),$(document).on("keydown",".search__found li",function(e){switch(e.keyCode){case 13:$(this).trigger("click")}})},d=function(e){c.find(".search__found li").removeClass("active"),t.parents().hasClass("site__footer")?(38==e&&n<o?n++:40==e&&n>0&&n--,n>0?(c.find(".search__found li").eq(-1-(n-1)).addClass("active"),i.val(c.find(".search__found li").eq(-1-(n-1)).find("a").text())):i.val(r)):(40==e&&n<o?n++:38==e&&n>0&&n--,n>0?(c.find(".search__found li").eq(n-1).addClass("active"),i.val(c.find(".search__found li").eq(n-1).find("a").text())):i.val(r))},f=function(e){var e=e,t=e.categories,i=0!=t.length,a=e.products,s=0!=a.length,n=[],r=[],l=!0;if(s){var d='<div class="top-products__wrap">';$.each(a,function(){var e=this;d+='<div>                                                <div class="top-products__item">                                                    <div class="top-products__pic" style="background-image: url('+e.src+')">                                                    </div>                                                    <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                    <h3 class="top-products__item-title">'+e.name+'</h3>                                                    <a href="'+e.href+'" class="top-products__btn">view</a>                                                </div>                                            </div>',i||n.push([e.categories.mainCategory,e.categories.urlMainCategory,e.categories.subcategories,e.categories.urlSubcategories])}),d+="</div>",c.find("div").eq(1).find(".top-products").html('<h2 class="top-products__title">Top Products</h2>'+d);var f='<ul class="search__found">';if(i)$.each(t,function(){var e=this.subcategories,t=this.urlSubcategories,i="";if(void 0!=e){for(var a=0;a<=e.length-1;a++)i+='<li class="search__found-sub"><a href="'+t[a]+'">'+e[a]+"</a></li>";i+=""}f+='<li><a href="'+this.urlCategory+'">'+this.name+"</a></li>"+i});else{for(var u=0;u<=n.length-1;u++)if(l&&(r.push(n[u]),l=!1),r[r.length-1][0]!=n[u][0])r.push(n[u]);else for(var h=0;h<=n[u].length-1;h++)for(var v=0;v<=n[u][2].length-1;v++)r[r.length-1][2].indexOf(n[u][2][v])==-1&&r[r.length-1][2].push(n[u][2][v]);for(var _=0,u=0;u<=r.length-1;u++){for(var h=0;h<=r[u].length-1;h++){for(var p="",v=0;v<=r[u][2].length-1;v++)p+='<li class="search__found-sub"><a href="'+r[u][3][v]+'">'+r[u][2][v]+"</a></li>",_++;p+=""}f+='<li><a href="'+r[u][1]+'">'+r[u][0]+"</a></li>"+p}}f+="</ul>",c.find("div:first").html(f),c.find(".search__found").find("li:not(:lt(11))").remove(),o=c.find(".search__found").find("li").length,c.addClass("visible")}else c.removeClass("visible")},u=function(e,t){return a.abort(),a=$.ajax({url:s,data:{value:e.val(),action:"main_search"},dataType:"json",type:"get",success:function(e){0!=Object.keys(e).length&&f(e)},error:function(e){"abort"!=e.statusText&&console.log("Error")}}),!1},h=function(){l()};h()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5LmluZGV4LmpzIiwianF1ZXJ5LnNlYXJjaC5qcyJdLCJuYW1lcyI6WyJnbG9iYWxTY3JvbGxGbGFnIiwiTnVtYmVyIiwicHJvdG90eXBlIiwiZm9ybWF0TW9uZXkiLCJjIiwiZCIsInQiLCJuIiwidGhpcyIsImlzTmFOIiwiTWF0aCIsImFicyIsInVuZGVmaW5lZCIsInMiLCJpIiwiU3RyaW5nIiwicGFyc2VJbnQiLCJ0b0ZpeGVkIiwiaiIsImxlbmd0aCIsInN1YnN0ciIsInJlcGxhY2UiLCJzbGljZSIsIiQiLCJlYWNoIiwiU3ViTWVudSIsIk1lbnUiLCJGdWxsSGVpZ2h0IiwicGVyZmVjdFNjcm9sbGJhciIsIndoZWVsUHJvcGFnYXRpb24iLCJDaGVja291dEhlaWdodCIsIkNoYW5nZVByaWNlIiwib2JqIiwiX29iaiIsIl9pdGVtcyIsImZpbmQiLCJfYXJyb3ciLCJfd2luZG93Iiwid2luZG93IiwidGltZW91dCIsIl9zdGFydFdpbldpZHRoIiwid2lkdGgiLCJfYWRkRXZlbnRzIiwib24iLCJyZXNpemUiLCJyZW1vdmVDbGFzcyIsImpRdWVyeSIsImN1ckl0ZW0iLCJwYXJlbnQiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwiY2xpY2siLCJwYXJlbnRzIiwic3ViTWVudSIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJtb3VzZWVudGVyIiwiaW5uZXJXaWR0aCIsIm9mZnNldCIsImxlZnQiLCJjc3MiLCItd2Via2l0LXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInBvc2l0aW9uIiwiY2xlYXJUaW1lb3V0IiwiZGF0YSIsInNldFRpbWVvdXQiLCJ0ZXh0IiwibmFtZSIsImF0dHIiLCJzcmMiLCJocmVmIiwicHJpY2UiLCJvblNhbGUiLCJvbGRQcmljZSIsIl9pbml0IiwiX2xhc3RQb3MiLCJzaXRlU2Nyb2xsVG9wIiwiX3NlbGYiLCJfbWVudSIsIl9hY3Rpb24iLCJfaGVhZGVyIiwiX2hpZGRlbkJsb2NrTWVudSIsIl9oZWFkZXJIZWlnaHQiLCJpbm5lckhlaWdodCIsIl9zaG93QnRuIiwiX2Nsb3NlQnRuIiwiX3NlYXJjaCIsIl9vcGVuU2VhcmNoIiwiX2Nsb3NlU2VhcmNoIiwiX2dldEZyZWUiLCJfc2l0ZSIsIl9kb20iLCJkb2N1bWVudCIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2FuY2VsQnViYmxlIiwiX2Nsb3NlU2VhcmNoQm94IiwiX29wZW5NZW51IiwiX2Nsb3NlTWVudSIsIl9vcGVuU2VhcmNoQm94Iiwic2Nyb2xsIiwiZSIsIl9maXhlZEhlYWRlciIsInNjcm9sbFRvcCIsIkRPTU1vdXNlU2Nyb2xsIiwiZGVsdGEiLCJvcmlnaW5hbEV2ZW50IiwiZGV0YWlsIiwiZGlyZWN0aW9uIiwiX2NoZWNrU2Nyb2xsIiwibW91c2V3aGVlbCIsIndoZWVsRGVsdGEiLCJ0b3VjaG1vdmUiLCJjdXJyZW50UG9zIiwidG91Y2hlcyIsImNsaWVudFkiLCJrZXlkb3duIiwid2hpY2giLCJoZWlnaHQiLCJvdmVyZmxvdy15IiwiZWxlbSIsImZvY3Vzb3V0IiwiX2dsb2JhbFdpbldpZHRoIiwiX3NldEhlaWdodCIsIm1pbkhlaWdodCIsIl90b3RhbE9yZGVyIiwiZm9ybSIsIiR1cHNlbGxzIiwidmFyaWF0aW9uIiwidmFyaWF0aW9uQ291bnQiLCJzeW1ib2wiLCJjb3VudGVyIiwidmFsIiwidHJpbSIsInBhcnNlRmxvYXQiLCJzcGxpdCIsImpvaW4iLCJzZWxlY3QiLCJhcHBlbmQiLCJodG1sIiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJfd3JhcCIsIl9jb250ZW50cyIsIl9zY3JvbGxDb250ZWluZXIiLCJfdGltZXIiLCJfY2VudGVyV3JhcCIsInRvcCIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbEJhcldpZHRoIiwic2Nyb2xsRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicGFkZGluZ1JpZ2h0IiwiX29uRXZlbnRzIiwiX3Nob3ciLCJfc2V0UG9wdXBDb250ZW50IiwiY3VyQ29udGVudCIsImZpbHRlciIsImRpc3BsYXkiLCJNYWluU2xpZGVyIiwiX2l0ZW1zV3JhcCIsIl9wYWdpbmF0aW9uIiwiX3ByZXYiLCJfbmV4dCIsInNsaWNrIiwiY3VycmVudFNsaWRlIiwiJHNsaWRlcyIsIl9pbml0U2xpZGVyIiwiZG90cyIsImF1dG9wbGF5IiwiYXV0b3BsYXlTcGVlZCIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsImFwcGVuZERvdHMiLCJTZWFyY2giLCJfaW5wdXQiLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiX3BhdGgiLCJzdWdnZXN0U2VsZWN0ZWQiLCJjb3VudEl0ZW1zIiwidmFsdWVJbnB1dCIsIl9yZXN1bHQiLCJrZXl1cCIsIkkiLCJrZXlDb2RlIiwic3VibWl0IiwiX2FqYXhSZXF1ZXN0IiwibG9jYXRpb24iLCJyZW1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsIl9rZXlBY3RpdmF0ZSIsImN1clRleHQiLCJ0cmlnZ2VyIiwiZXEiLCJfYWRkRGF0YSIsImNhdGVnb3JpZXMiLCJjYXRlZ29yaWVzQXZhaWxhYmlsaXR5IiwicHJvZHVjdHMiLCJwcm9kdWN0c0F2YWlsYWJpbGl0eSIsImFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsInByb2R1Y3RzQ2F0ZWdvcmllc0FyciIsImZsYWciLCJwcm9kdWN0c1dyYXAiLCJwcm9kdWN0IiwicHVzaCIsIm1haW5DYXRlZ29yeSIsInVybE1haW5DYXRlZ29yeSIsInN1YmNhdGVnb3JpZXMiLCJ1cmxTdWJjYXRlZ29yaWVzIiwicmVzdWx0U3RyIiwic3ViY2F0ZWdvcmllc1dyYXAiLCJ1cmxDYXRlZ29yeSIsInoiLCJpbmRleE9mIiwiY291bnQiLCJpbnB1dCIsImFib3J0IiwiYWpheCIsInVybCIsInZhbHVlIiwiYWN0aW9uIiwiZGF0YVR5cGUiLCJ0eXBlIiwic3VjY2VzcyIsIm1zZyIsIk9iamVjdCIsImtleXMiLCJlcnJvciIsInN0YXR1c1RleHQiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUVJLEdBQUlBLElBQW1CLENBRXZCQyxRQUFPQyxVQUFVQyxZQUFjLFNBQVNDLEVBQUdDLEVBQUdDLEdBQzFDLEdBQUlDLEdBQUlDLEtBQ0pKLEVBQUlLLE1BQU1MLEVBQUlNLEtBQUtDLElBQUlQLElBQU0sRUFBSUEsRUFDakNDLEVBQVNPLFFBQUxQLEVBQWlCLElBQU1BLEVBQzNCQyxFQUFTTSxRQUFMTixFQUFpQixJQUFNQSxFQUMzQk8sRUFBSU4sRUFBSSxFQUFJLElBQU0sR0FDbEJPLEVBQUlDLE9BQU9DLFNBQVNULEVBQUlHLEtBQUtDLElBQUlWLE9BQU9NLElBQU0sR0FBR1UsUUFBUWIsS0FDekRjLEdBQUtBLEVBQUlKLEVBQUVLLFFBQVUsRUFBSUQsRUFBSSxFQUFJLENBQ3JDLE9BQU9MLElBQUtLLEVBQUlKLEVBQUVNLE9BQU8sRUFBR0YsR0FBS1osRUFBSSxJQUFNUSxFQUFFTSxPQUFPRixHQUFHRyxRQUFRLGlCQUFrQixLQUFPZixJQUFNRixFQUFJQyxFQUFJSyxLQUFLQyxJQUFJSixFQUFJTyxHQUFHRyxRQUFRYixHQUFHa0IsTUFBTSxHQUFLLEtBR2hKQyxFQUFFLFdBRUVBLEVBQUUsZUFBZUMsS0FBSyxXQUVsQixHQUFJQyxHQUFTRixFQUFFZixPQUNmLEdBQUlrQixHQUFNSCxFQUFFZixTQUloQmUsRUFBRSxjQUFjQyxLQUFLLFdBRWpCLEdBQUlHLEdBQVlKLEVBQUVmLFNBSXRCZSxFQUFFLGlCQUFpQkMsS0FBSyxXQUVwQixHQUFJRyxHQUFZSixFQUFFZixTQUl0QmUsRUFBRSxnQkFBZ0JDLEtBQUssV0FFbkJELEVBQUVmLE1BQU1vQixrQkFDSkMsa0JBQWtCLE1BSzFCTixFQUFFLGFBQWFDLEtBQUssV0FFaEIsR0FBSU0sR0FBZ0JQLEVBQUVmLFNBSTFCZSxFQUFFLG1CQUFtQkMsS0FBSyxX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VCxFQUFzQnRNLEdBQUcsR0FBSyxLQUFPc00sRUFBc0J0TSxHQUFHLEdBQUssWUFBYWdOLEdBTXZIRCxHQUFhLFFBRWI1QixFQUFROUosS0FBSyxhQUFheUcsS0FBS2lGLEdBRS9CNUIsRUFBUTlKLEtBQUssa0JBQWtCQSxLQUFLLG1CQUFtQnFLLFNBRXZEVCxFQUFhRSxFQUFROUosS0FBSyxrQkFBa0JBLEtBQUssTUFBTWhCLE9BRXZEOEssRUFBUS9JLFNBQVMsZUFJakIrSSxHQUFRcEosWUFBWSxZQUk1QnlKLEVBQWdCLFNBQVU2QixFQUFPNU4sR0F5QjdCLE1BdkJBb0wsR0FBU3lDLFFBQ1R6QyxFQUFXcEssRUFBRThNLE1BQ1RDLElBQUt6QyxFQUNMNUgsTUFDSXNLLE1BQU9KLEVBQU05RixNQUNibUcsT0FBTyxlQUVYQyxTQUFVLE9BQ1ZDLEtBQU0sTUFDTkMsUUFBUyxTQUFXQyxHQUVlLEdBQTNCQyxPQUFPQyxLQUFLRixHQUFLek4sUUFDakIyTCxFQUFVOEIsSUFJbEJHLE1BQU8sU0FBVW5ELEdBQ29CLFNBQTdCQSxFQUFlb0QsWUFDZkMsUUFBUUMsSUFBSSxhQUtqQixHQUVYdkssRUFBUSxXQUNKakMsSUFPUmlDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICB2YXIgZ2xvYmFsU2Nyb2xsRmxhZyA9IHRydWU7XHJcblxyXG4gICAgTnVtYmVyLnByb3RvdHlwZS5mb3JtYXRNb25leSA9IGZ1bmN0aW9uKGMsIGQsIHQpe1xyXG4gICAgICAgIHZhciBuID0gdGhpcyxcclxuICAgICAgICAgICAgYyA9IGlzTmFOKGMgPSBNYXRoLmFicyhjKSkgPyAyIDogYyxcclxuICAgICAgICAgICAgZCA9IGQgPT0gdW5kZWZpbmVkID8gXCIuXCIgOiBkLFxyXG4gICAgICAgICAgICB0ID0gdCA9PSB1bmRlZmluZWQgPyBcIixcIiA6IHQsXHJcbiAgICAgICAgICAgIHMgPSBuIDwgMCA/IFwiLVwiIDogXCJcIixcclxuICAgICAgICAgICAgaSA9IFN0cmluZyhwYXJzZUludChuID0gTWF0aC5hYnMoTnVtYmVyKG4pIHx8IDApLnRvRml4ZWQoYykpKSxcclxuICAgICAgICAgICAgaiA9IChqID0gaS5sZW5ndGgpID4gMyA/IGogJSAzIDogMDtcclxuICAgICAgICByZXR1cm4gcyArIChqID8gaS5zdWJzdHIoMCwgaikgKyB0IDogXCJcIikgKyBpLnN1YnN0cihqKS5yZXBsYWNlKC8oXFxkezN9KSg/PVxcZCkvZywgXCIkMVwiICsgdCkgKyAoYyA/IGQgKyBNYXRoLmFicyhuIC0gaSkudG9GaXhlZChjKS5zbGljZSgyKSA6IFwiXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgJCgnLnNpdGVfX21lbnUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBTdWJNZW51KCAkKHRoaXMpICk7XHJcbiAgICAgICAgICAgIG5ldyBNZW51KCAkKHRoaXMpICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJCgnLm5vdC1mb3VuZCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IEZ1bGxIZWlnaHQoICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkKCcuY29uZmlybWF0aW9uJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgRnVsbEhlaWdodCggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQoJyN3cHNsLXN0b3JlcycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgJCh0aGlzKS5wZXJmZWN0U2Nyb2xsYmFyKHtcclxuICAgICAgICAgICAgICAgIHdoZWVsUHJvcGFnYXRpb246IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJCgnLmNoZWNrb3V0JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBuZXcgQ2hlY2tvdXRIZWlnaHQoICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkKCcucHJvZHVjdF9faXRlbXMnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBDaGFuZ2VQcmljZSggJCh0aGlzKSApO1xyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSApO1xyXG5cclxuICAgIHZhciBTdWJNZW51ID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfaXRlbXMgPSBfb2JqLmZpbmQoJy5zaXRlX19tZW51LWl0ZW0nKSxcclxuICAgICAgICAgICAgX2Fycm93ID0gX29iai5maW5kKCcuc2l0ZV9fbWVudS1pY29uJyksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3RhcnRXaW5XaWR0aCA9IF93aW5kb3cud2lkdGgoKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zdGFydFdpbldpZHRoID4gX3dpbmRvdy53aWR0aCgpICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGFydFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF93aW5kb3cuZmluZCgnLm9wZW5lZCcpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuc2l0ZV9fbWVudS1pY29uJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBqUXVlcnkod2luZG93KS53aWR0aCgpIDwgMTAwMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0galF1ZXJ5KHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VySXRlbS5wYXJlbnQoJ2xpJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudC5oYXNDbGFzcygnb3BlbmVkJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfYXJyb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBqUXVlcnkodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudHMoJ2xpJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51ID0gcGFyZW50LmZpbmQoJy5zaXRlX19tZW51LXN1YicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudC5oYXNDbGFzcygnb3BlbmVkJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5zbGlkZVVwKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LnNsaWRlRG93bigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9pdGVtcy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJJdGVtLnBhcmVudCgndWwnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5oYXNDbGFzcygnc2l0ZV9fbWVudS1pdGVtX3N1YicpICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Yk1lbnUgPSBjdXJJdGVtLmZpbmQoJy5zaXRlX19tZW51LXN1YicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggKCBfd2luZG93LndpZHRoKCkgLSAoIHN1Yk1lbnUuaW5uZXJXaWR0aCgpICsgY3VySXRlbS5vZmZzZXQoKS5sZWZ0ICkgKSA8IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggKCAoIGN1ckl0ZW0ub2Zmc2V0KCkubGVmdCArIGN1ckl0ZW0uaW5uZXJXaWR0aCgpICkgLSBzdWJNZW51LmlubmVyV2lkdGgoKSApIDwgMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51LmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICc1MCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGVYKC01MCUpJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVgoLTUwJSknXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogY3VySXRlbS5wb3NpdGlvbigpLmxlZnQgLSBzdWJNZW51LmlubmVyV2lkdGgoKSArIGN1ckl0ZW0uaW5uZXJXaWR0aCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGN1ckl0ZW0ucG9zaXRpb24oKS5sZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgJCgnW2RhdGEtcHJvZHVjdF0nKS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZW91dCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGN1ckl0ZW0uZGF0YSgncHJvZHVjdCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoICQoJy5mZWF0dXJlZC1wcm9kdWN0X19sb2FkaW5nJykuaGFzQ2xhc3MoJ3Zpc2libGUnKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X190aXRsZScpLnRleHQoZGF0YS5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19waWMgaW1nJykuYXR0cignc3JjJywgZGF0YS5zcmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmJ0bicpLmF0dHIoJ2hyZWYnLCBkYXRhLmhyZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3ByaWNlIHNwYW4nKS50ZXh0KGRhdGEucHJpY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGRhdGEub25TYWxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19yZW1hcmsnKS5hZGRDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdCcpLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19yZW1hcmsnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggZGF0YS5vbGRQcmljZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLmZlYXR1cmVkLXByb2R1Y3QnKS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2UgZGVsJykudGV4dChkYXRhLm9sZFByaWNlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0JykuZmluZCgnLmZlYXR1cmVkLXByb2R1Y3RfX3ByaWNlIGRlbCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxNjAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmZlYXR1cmVkLXByb2R1Y3RfX2xvYWRpbmcnKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5vbiggJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5vcGVuZWQnKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ3VsJykub24oICdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcub3BlbmVkJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5maW5kKCdsaScpLm9uKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9tZW51ID0gb2JqLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCh3aW5kb3cpLFxyXG4gICAgICAgICAgICBfYWN0aW9uID0gZmFsc2UsXHJcbiAgICAgICAgICAgIF9hY3Rpb25TY3JvbGwgPSBmYWxzZSxcclxuICAgICAgICAgICAgX2xhc3RQb3MsXHJcbiAgICAgICAgICAgIF9oZWFkZXIgPSAkKCcuc2l0ZV9faGVhZGVyJyksXHJcbiAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUgPSAkKCcuc2l0ZV9faGlkZGVuLWl0ZW1zJyksXHJcbiAgICAgICAgICAgIF9oZWFkZXJIZWlnaHQgPSBfaGVhZGVyLmlubmVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgIF9zaG93QnRuID0gJCgnLnNpdGVfX2hlYWRlci1idG4nKSxcclxuICAgICAgICAgICAgX2Nsb3NlQnRuID0gJCgnLnNpdGVfX2hpZGRlbi1jbG9zZScpLFxyXG4gICAgICAgICAgICBfc2VhcmNoID0gJCgnLnNlYXJjaCcpLFxyXG4gICAgICAgICAgICBfb3BlblNlYXJjaCA9ICQoJy5zZWFyY2gtYnRuJyksXHJcbiAgICAgICAgICAgIF9jbG9zZVNlYXJjaCA9ICQoJy5zZWFyY2hfX2NhbmNlbCcpLFxyXG4gICAgICAgICAgICBfZ2V0RnJlZSA9ICQoJy5zaXRlX19oaWRkZW4tYnRuJyksXHJcbiAgICAgICAgICAgIF9zaXRlID0gJCgnLnNpdGUnKSxcclxuICAgICAgICAgICAgX2RvbSA9ICQoICdodG1sJyApLFxyXG4gICAgICAgICAgICBzaXRlU2Nyb2xsVG9wLFxyXG4gICAgICAgICAgICBfY29udGVudCA9ICQoJy5zaXRlX19jb250ZW50JyksXHJcbiAgICAgICAgICAgIF9sYXN0U2Nyb2xsVG9wID0gMDtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCIuc2VhcmNoXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJib2R5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZVNlYXJjaEJveCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9zaG93QnRuLm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCQodGhpcykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIF9jbG9zZUJ0bi5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfb3BlblNlYXJjaC5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuU2VhcmNoQm94KCQodGhpcykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIF9jbG9zZVNlYXJjaC5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZVNlYXJjaEJveCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICggZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpeGVkSGVhZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24gPSBfd2luZG93LnNjcm9sbFRvcCgpID49IF9oZWFkZXJIZWlnaHQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPT0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9oaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIERPTU1vdXNlU2Nyb2xsOiBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5vcmlnaW5hbEV2ZW50LmRldGFpbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IChkZWx0YSA+IDApID8gMSA6IC0xO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbChkaXJlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNld2hlZWw6IGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IChkZWx0YSA+IDApID8gLTEgOiAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbChkaXJlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdWNobW92ZTogZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UG9zID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UG9zID4gX2xhc3RQb3MpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBvcyA8IF9sYXN0UG9zKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2xhc3RQb3MgPSBjdXJyZW50UG9zO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS53aGljaCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKT49MTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2l0ZS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zaXRlLmhlaWdodCgpID4gX3dpbmRvdy5oZWlnaHQoKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID4gMCAmJiAhX2hlYWRlci5oYXNDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpICYmICFfc2hvd0J0bi5oYXNDbGFzcygnb3BlbmVkJykgJiYgX2FjdGlvbiApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5hZGRDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uIDwgMCAmJiBfaGVhZGVyLmhhc0NsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJykgJiYgIV9zaG93QnRuLmhhc0NsYXNzKCdvcGVuZWQnKSAmJiBfYWN0aW9uICYmIGdsb2JhbFNjcm9sbEZsYWcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5yZW1vdmVDbGFzcygnc2l0ZV9faGVhZGVyX2hpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9maXhlZEhlYWRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX3dpbmRvdy5zY3JvbGxUb3AoKSA+IF9oZWFkZXJIZWlnaHQgKyAxNTAgICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCdmaXhlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBlbGVtO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJJdGVtLmhhc0NsYXNzKCdvcGVuZWQnKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51LnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBfaGlkZGVuQmxvY2tNZW51LmFkZENsYXNzKCdvcGVuZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2l0ZVNjcm9sbFRvcCA9IF93aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggX3NpdGUuaGVpZ2h0KCkgPiBfd2luZG93LmhlaWdodCgpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZG9tLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnc2Nyb2xsJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaXRlLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29wZW5TZWFyY2hCb3ggPSBmdW5jdGlvbiAoZWxlbSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gZWxlbTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VySXRlbS5oYXNDbGFzcygnb3BlbmVkJykpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlYXJjaC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2dldEZyZWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9zZWFyY2guYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9nZXRGcmVlLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2xvc2VNZW51ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9zaG93QnRuLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuICAgICAgICAgICAgICAgIF9oaWRkZW5CbG9ja01lbnUucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgX3NlYXJjaC5maW5kKCdpbnB1dCcpLmZvY3Vzb3V0KCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIF9zaXRlLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnJ1xyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggX3NpdGUuaGVpZ2h0KCkgPiBfd2luZG93LmhlaWdodCgpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZG9tLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfd2luZG93LnNjcm9sbFRvcCggc2l0ZVNjcm9sbFRvcCApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIDEwKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jbG9zZVNlYXJjaEJveCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb3BlblNlYXJjaC5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XHJcbiAgICAgICAgICAgICAgICBfc2VhcmNoLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIF9nZXRGcmVlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX21lbnVbMF0ub2JqID0gX3NlbGY7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfZml4ZWRIZWFkZXIoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbiAgICB2YXIgRnVsbEhlaWdodCA9IGZ1bmN0aW9uIChvYmopIHtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcclxuICAgICAgICAgICAgX2dsb2JhbFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG5cclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9nbG9iYWxXaW5XaWR0aCAhPSBfd2luZG93LndpZHRoKCkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFdpbldpZHRoID0gX3dpbmRvdy53aWR0aCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogJydcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiBfd2luZG93LmhlaWdodCgpIC0gJCgnLnNpdGVfX2hlYWRlcicpLmlubmVySGVpZ2h0KCkgLSAkKCcuc2l0ZV9fZm9vdGVyJykuaW5uZXJIZWlnaHQoKSAtICQoJy5icmVhZGNydW1icycpLmlubmVySGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbiAgICB2YXIgQ2hlY2tvdXRIZWlnaHQgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF90b3RhbE9yZGVyID0gX29iai5maW5kKCcudG90YWwtb3JkZXInKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IF90b3RhbE9yZGVyLmlubmVySGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbiAgICB2YXIgQ2hhbmdlUHJpY2UgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIHZhciBmb3JtID0gb2JqLmZpbmQoJ2Zvcm0nKTtcclxuXHJcblxyXG4gICAgICAgIGZvcm0ub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdXBzZWxscyA9IG9iai5maW5kKCdmb3JtPi53ZWJzdGVycy1zZWxlY3Qgc2VsZWN0JyksXHJcbiAgICAgICAgICAgICAgICB2YXJpYXRpb24gPSBmb3JtLmZpbmQoJy52YXJpYXRpb25zIHNlbGVjdCcpLFxyXG4gICAgICAgICAgICAgICAgdmFyaWF0aW9uQ291bnQgPSB2YXJpYXRpb24ubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcHJpY2UgPSBvYmouYXR0cignZGF0YS1wcmljZScpLFxyXG4gICAgICAgICAgICAgICAgc3ltYm9sID0gJCgnLnByb2R1Y3RfX3ByaWNlPnNwYW4+c3BhbicpLnRleHQoKTtcclxuXHJcbiAgICAgICAgICAgaWYodmFyaWF0aW9uQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcclxuICAgICAgICAgICAgICAgdmFyaWF0aW9uLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgaWYoJCggdGhpcyApLnZhbCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIGlmKGNvdW50ZXIgIT09IHZhcmlhdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBpZihmb3JtLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZSAucHJpY2UnKS50ZXh0KCkudHJpbSgpICAhPT0gJycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHByaWNlID0gJCgnLnByaWNlPnNwYW4nKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sID0gJCgnLnByaWNlPnNwYW4+c3BhbicpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwcmljZSA9IHBhcnNlRmxvYXQoKHByaWNlLnNsaWNlKDEpLnNwbGl0KCcsJykpLmpvaW4oJycpKTtcclxuXHJcbiAgICAgICAgICAgICR1cHNlbGxzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdCA9ICQoIHRoaXMgKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihzZWxlY3QgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkKHRoaXMpLnZhbCgpID09PSBzZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlID0gcHJpY2UgKyArJCh0aGlzKS5kYXRhKCdwcmljZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnLnByaWNlJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygkKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2U+c3Ryb25nJykubGVuZ3RoID09PSAwKTtcclxuICAgICAgICAgICAgaWYoZm9ybS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdF9fcHJpY2U+c3Ryb25nJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZScpLmFwcGVuZCgnPHN0cm9uZyBjbGFzcz1cInByb2R1Y3RfX3ByaWNlXCI+PC9zdHJvbmc+Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qaWYocHJpY2UgPiAwKSB7ICovXHJcbiAgICAgICAgICAgICAgICBwcmljZSA9ICc8c3Bhbj4nICsgc3ltYm9sICsgJzwvc3Bhbj4nKyBwcmljZS5mb3JtYXRNb25leSgyLCAnLicsICcsJyk7XHJcbiAgICAgICAgICAgIC8qfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByaWNlID0gJ0ZSRUUnO1xyXG4gICAgICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgICAgIGZvcm0uZmluZCggJy5mZWF0dXJlZC1wcm9kdWN0X19wcmljZT5zdHJvbmcnICkuaHRtbCggcHJpY2UgKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbn0gKSgpO1xyXG5cclxuIiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICQoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IFBvcHVwKCQodGhpcykpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxyXG4gICAgICAgICAgICBfYnRuU2hvdyA9ICAkKCAnLnBvcHVwX19vcGVuJyApLFxyXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcclxuICAgICAgICAgICAgX3dyYXAgPSBfb2JqLmZpbmQoICcucG9wdXBfX3dyYXAnICksXHJcbiAgICAgICAgICAgIF9jb250ZW50cyA9IF9vYmouZmluZCggJy5wb3B1cF9fY29udGVudCcgKSxcclxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfY2VudGVyV3JhcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2hpZGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93KCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnICkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9jb250ZW50cy5maW5kKCc+ZGl2Jykub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGUgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XHJcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xyXG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbn0gKSgpO1xyXG5cclxuIiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAkKCcubWFpbi1zbGlkZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBNYWluU2xpZGVyKCAkKHRoaXMpICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIE1haW5TbGlkZXIgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgIF9pdGVtc1dyYXAgPSBfb2JqLmZpbmQoJy5tYWluLXNsaWRlcl9faXRlbXMnKSxcclxuICAgICAgICAgICAgX3BhZ2luYXRpb24gPSBfb2JqLmZpbmQoJy5zd2lwZXItcGFnaW5hdGlvbicpLFxyXG4gICAgICAgICAgICBfcHJldiA9IF9vYmouZmluZCgnLm1haW4tc2xpZGVyX19jb25zdHJvbHMgLnN3aXBlci1idXR0b24tcHJldicpLFxyXG4gICAgICAgICAgICBfbmV4dCA9IF9vYmouZmluZCgnLm1haW4tc2xpZGVyX19jb25zdHJvbHMgLnN3aXBlci1idXR0b24tbmV4dCcpLFxyXG4gICAgICAgICAgICBfZ2xvYmFsV2luV2lkdGggPSBfd2luZG93LndpZHRoKCk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9pdGVtc1dyYXAub24oJ2luaXQnLCBmdW5jdGlvbihzbGljaykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfaXRlbXNXcmFwLmZpbmQoJy5zbGljay1jdXJyZW50JykuZmluZCgnLm1haW4tc2xpZGVyX19jb250ZW50JykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2l0ZW1zV3JhcC5vbignYWZ0ZXJDaGFuZ2UnLCBmdW5jdGlvbihzbGljaywgY3VycmVudFNsaWRlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoY3VycmVudFNsaWRlLiRzbGlkZXMpLmZpbmQoJy5tYWluLXNsaWRlcl9fY29udGVudCcpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50U2xpZGUuJHNsaWRlcykuZmlsdGVyKCcuc2xpY2stY3VycmVudCcpLmZpbmQoJy5tYWluLXNsaWRlcl9fY29udGVudCcpLmFkZENsYXNzKCd2aXNpYmxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZ2xvYmFsV2luV2lkdGggPCBfd2luZG93LndpZHRoKCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsV2luV2lkdGggPSBfd2luZG93LndpZHRoKCkgLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCggJy5tYWluLXNsaWRlcl9faXRlbScgKS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCAnLm1haW4tc2xpZGVyX19pdGVtJyApLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogX2l0ZW1zV3JhcC5oZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXRTbGlkZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfaXRlbXNXcmFwLnNsaWNrKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheVNwZWVkOiA1MDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZBcnJvdzogX3ByZXYsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEFycm93OiBfbmV4dCxcclxuICAgICAgICAgICAgICAgICAgICBhcHBlbmREb3RzOiAgX3BhZ2luYXRpb25cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICcubWFpbi1zbGlkZXJfX2l0ZW0nICkuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiBfaXRlbXNXcmFwLmhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9pbml0U2xpZGVyKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbn0gKSgpO1xyXG4iLCIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICQoJy5zZWFyY2gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBTZWFyY2goICQodGhpcykgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIH0gKTtcclxuXHJcbiAgICB2YXIgU2VhcmNoID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfaW5wdXQgPSBfb2JqLmZpbmQoJ2lucHV0W3R5cGU9c2VhcmNoXScpLFxyXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxyXG4gICAgICAgICAgICBfcGF0aCA9IF9vYmouZGF0YSgncGF0aCcpLFxyXG4gICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwLFxyXG4gICAgICAgICAgICBjb3VudEl0ZW1zID0gMCxcclxuICAgICAgICAgICAgdmFsdWVJbnB1dCA9IF9pbnB1dC52YWwoKSxcclxuICAgICAgICAgICAgX3Jlc3VsdCA9IF9vYmouZmluZCgnLnNlYXJjaF9fcmVzdWx0Jyk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbihJKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goSS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVJbnB1dCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggdmFsdWVJbnB1dC5sZW5ndGggPj0gX29iai5kYXRhKCdzeW1ib2xzJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FqYXhSZXF1ZXN0KCAkKHRoaXMpLCB2YWx1ZUlucHV0Lmxlbmd0aCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS52YWwoKSA9PSAnJyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uKEkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcudG9wLXByb2R1Y3RzJykuaHRtbCgnJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICQod2luZG93KS53aWR0aCgpID49IDEwMjQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKCBJLmtleUNvZGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9vYmouZGF0YSgnYWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5maW5kKCdhJykuYXR0cignaHJlZicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY291bnRJdGVtcyA+IDAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9rZXlBY3RpdmF0ZSggSS5rZXlDb2RlICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHN1Z2dlc3RTZWxlY3RlZCA9PSBjb3VudEl0ZW1zKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5jbGljayggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJib2R5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICBcIi5zZWFyY2hfX2ZvdW5kIGxpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSBjdXJJdGVtLmZpbmQoJ2EnKS50ZXh0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKGN1clRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxyXG4gICAgICAgICAgICAgICAgICAgIFwia2V5ZG93blwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiLnNlYXJjaF9fZm91bmQgbGlcIixcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihJKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKEkua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9rZXlBY3RpdmF0ZSA9IGZ1bmN0aW9uKG4pIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBfb2JqLnBhcmVudHMoKS5oYXNDbGFzcygnc2l0ZV9fZm9vdGVyJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBuID09IDM4ICYmIHN1Z2dlc3RTZWxlY3RlZCA8IGNvdW50SXRlbXMgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbiA9PSA0MCAmJiBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkLS07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggLTEgLSAoc3VnZ2VzdFNlbGVjdGVkIC0gMSkgKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggLTEgLSAoc3VnZ2VzdFNlbGVjdGVkIC0gMSkgKS5maW5kKCdhJykudGV4dCgpICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCB2YWx1ZUlucHV0ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggbiA9PSA0MCAmJiBzdWdnZXN0U2VsZWN0ZWQgPCBjb3VudEl0ZW1zICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG4gPT0gMzggJiYgc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZC0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIHN1Z2dlc3RTZWxlY3RlZCA+IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZXEoIHN1Z2dlc3RTZWxlY3RlZCAtIDEgKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggc3VnZ2VzdFNlbGVjdGVkIC0gMSApLmZpbmQoJ2EnKS50ZXh0KCkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIHZhbHVlSW5wdXQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWRkRGF0YSA9IGZ1bmN0aW9uKCBkYXRhICkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgPSBjYXRlZ29yaWVzLmxlbmd0aCAhPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzID0gZGF0YS5wcm9kdWN0cyxcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0F2YWlsYWJpbGl0eSA9IHByb2R1Y3RzLmxlbmd0aCAhPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybFByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0F2YWlsYWJpbGl0eSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzV3JhcCA9ICc8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX193cmFwXCI+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBwcm9kdWN0cywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c1dyYXAgKz0gJzxkaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvcC1wcm9kdWN0c19faXRlbVwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19waWNcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnKyBwcm9kdWN0LnNyYyArJylcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidG9wLXByb2R1Y3RzX19wcmljZVwiPjxkZWw+JysgcHJvZHVjdC5vbGRQcmljZSArJzwvZGVsPiAnKyBwcm9kdWN0LnByaWNlICsnPC9zcGFuPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2l0ZW0tdGl0bGVcIj4nKyBwcm9kdWN0Lm5hbWUgKyc8L2gzPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJysgcHJvZHVjdC5ocmVmICsnXCIgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2J0blwiPnZpZXc8L2E+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggIWNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goIFtwcm9kdWN0LmNhdGVnb3JpZXMubWFpbkNhdGVnb3J5LCBwcm9kdWN0LmNhdGVnb3JpZXMudXJsTWFpbkNhdGVnb3J5LCBwcm9kdWN0LmNhdGVnb3JpZXMuc3ViY2F0ZWdvcmllcywgcHJvZHVjdC5jYXRlZ29yaWVzLnVybFN1YmNhdGVnb3JpZXNdICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNXcmFwICs9ICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdicpLmVxKDEpLmZpbmQoJy50b3AtcHJvZHVjdHMnKS5odG1sKCc8aDIgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3RpdGxlXCI+VG9wIFByb2R1Y3RzPC9oMj4nICsgcHJvZHVjdHNXcmFwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdFN0ciA9ICc8dWwgY2xhc3M9XCJzZWFyY2hfX2ZvdW5kXCI+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goIGNhdGVnb3JpZXMsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJjYXRlZ29yaWVzID0gdGhpcy5zdWJjYXRlZ29yaWVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybFN1YmNhdGVnb3JpZXMgPSB0aGlzLnVybFN1YmNhdGVnb3JpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgPSAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggc3ViY2F0ZWdvcmllcyAhPSB1bmRlZmluZWQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciggdmFyIGkgPSAwOyBpIDw9IHN1YmNhdGVnb3JpZXMubGVuZ3RoLTE7IGkrKyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICc8bGkgY2xhc3M9XCJzZWFyY2hfX2ZvdW5kLXN1YlwiPjxhIGhyZWY9XCInKyB1cmxTdWJjYXRlZ29yaWVzW2ldICsnXCI+JyArIHN1YmNhdGVnb3JpZXNbaV0gKyAnPC9hPjwvbGk+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzxsaT48YSBocmVmPVwiJysgdGhpcy51cmxDYXRlZ29yeSArJ1wiPicrIHRoaXMubmFtZSArJzwvYT48L2xpPicrIHN1YmNhdGVnb3JpZXNXcmFwICsnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8PSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTE7IGkrKyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggZmxhZyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVswXSAhPSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMF0gKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIHogPSAwOyB6IDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXS5sZW5ndGgtMTsgeisrICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5pbmRleE9mKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0pID09IC0xICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5wdXNoKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0gKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPD0gcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xOyBpKysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcmllc1dyYXAgPSAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKCB2YXIgeiA9IDA7IHogPD0gcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdLmxlbmd0aC0xOyB6KysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVszXVt6XSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdW3pdICsgJzwvYT48L2xpPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzxsaT48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsxXSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzBdICsgJzwvYT48L2xpPicrIHN1YmNhdGVnb3JpZXNXcmFwICsnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzwvdWw+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCdkaXY6Zmlyc3QnKS5odG1sKHJlc3VsdFN0cik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaTpub3QoOmx0KDExKSknKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRJdGVtcyA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaScpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5hZGRDbGFzcygndmlzaWJsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hamF4UmVxdWVzdCA9ICBmdW5jdGlvbiggaW5wdXQsIG4gKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBfcGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpbnB1dC52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOidtYWluX3NlYXJjaCdcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBPYmplY3Qua2V5cyhtc2cpLmxlbmd0aCAhPSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FkZERhdGEoIG1zZyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChYTUxIdHRwUmVxdWVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSBcImFib3J0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbn0gKSgpOyJdfQ==
