!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return m($(this).attr("data-popup")),!1}}),c.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},m=function(o){v(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},v=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,i,n=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=$('<span class="websters-select__item"></span>'),p=$('<div class="websters-select"></div>'),r=$(window),f=$("body"),u=!1,h=function(){var e="";o.css({opacity:0}),o.wrap(p),p=o.parent(),p.append('<div class="websters-select__arrow"></div>'),o.before(d),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),d.text(e)},v=function(){u=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),p.removeClass("websters-select_opened")},b=function(){o[0].obj=n,h(),g(),w()},w=function(){o.on("change",function(){d.text($(this).find("option:selected").text())}),1!=s||l||p.on({click:function(e){e.stopPropagation(),u?v():m()}}),f.on({click:function(){u&&v()}})},g=function(){!s||l?y():1==s&&_()},_=function(){p.addClass("websters-select_custom")},y=function(){p.addClass("websters-select_mobile")},m=function(){var e=$("select"),n=$("<ul></ul>"),s=(r.scrollTop(),p.offset(),0),l=o.find("option:selected").index(),d=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),u&&t.remove(),u=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+d+'"></div>'),o.find("option").each(function(e){var t=$(this);e==l?n.append('<li class="active">'+t.text()+"</li>"):n.append("<li>"+t.text()+"</li>")}),t.append(n),p.append(t),p.addClass("websters-select_opened"),t.css({width:p.outerWidth(),left:-2,top:p.outerHeight()-4}),s=t.outerHeight(),s>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),i=t.perfectScrollbar()),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),v()}})};n.checkOpened=function(){return u},n.close=function(){v()},b()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var i=e,t=i.find("input[type=search]"),a=new XMLHttpRequest,n=i.data("path"),s=0,o=0,r=t.val(),c=i.find(".search__result"),l=function(){t.on({keyup:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:0==c.find(".search__found li").filter(".active").length&&i.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var t=$(this).val();t.length>0?h($(this),t.length):""==$(this).val()&&(c.removeClass("visible"),s=0)}},keydown:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:return 0==c.find(".search__found li").filter(".active").length?window.location.href=i.data("action"):window.location.href=c.find(".search__found li").filter(".active").find("a").attr("href"),!1;case 27:return c.remove(),s=0,!1;case 38:case 40:e.preventDefault(),o>0&&(d(e.keyCode),s==o&&(s=0))}}}),$("html").click(function(){c.removeClass("visible"),s=0}),$(document).on("click","body",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click",".search__found li",function(){var e=$(this),i=e.find("a").text();t.val(i),c.removeClass("visible"),s=0}),$(document).on("keydown",".search__found li",function(e){switch(e.keyCode){case 13:$(this).trigger("click")}})},d=function(e){c.find(".search__found li").removeClass("active"),40==e&&s<o?s++:38==e&&s>0&&s--,s>0?(c.find(".search__found li").eq(s-1).addClass("active"),t.val(c.find(".search__found li").eq(s-1).find("a").text())):t.val(r)},f=function(e){var e=e,i=e.categories,t=0!=i.length,a=e.products,n=[],s=[],r=!0,l='<div class="top-products__wrap">';$.each(a,function(){var e=this;l+='<div>                                            <div class="top-products__item">                                                <div class="top-products__pic">                                                    <img src="'+e.src+'" width="414" height="414" alt="'+e.alt+'">                                                </div>                                                <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                <h3 class="top-products__item-title">'+e.name+'</h3>                                                <a href="'+e.href+'" class="top-products__btn">view</a>                                            </div>                                        </div>',t||n.push([e.categories.mainCategory,e.categories.urlMainCategory,e.categories.subcategories,e.categories.urlSubcategories])}),l+="</div>",c.find("div").eq(1).find(".top-products").html(l);var d='<ul class="search__found">';if(t)$.each(i,function(){var e=this.subcategories,i=this.urlSubcategories,t="";if(void 0!=e){for(var a=0;a<=e.length-1;a++)t+='<li class="search__found-sub"><a href="'+i[a]+'">'+e[a]+"</a></li>";t+=""}d+='<li><a href="'+this.urlCategory+'">'+this.name+"</a></li>"+t});else{for(var f=0;f<=n.length-1;f++)if(r&&(s.push(n[f]),r=!1),s[s.length-1][0]!=n[f][0])s.push(n[f]);else for(var h=0;h<=n[f].length-1;h++)for(var u=0;u<=n[f][2].length-1;u++)s[s.length-1][2].indexOf(n[f][2][u])==-1&&s[s.length-1][2].push(n[f][2][u]);for(var v=0,f=0;f<=s.length-1;f++){for(var h=0;h<=s[f].length-1;h++){for(var _="",u=0;u<=s[f][2].length-1;u++)_+='<li class="search__found-sub"><a href="'+s[f][3][u]+'">'+s[f][2][u]+"</a></li>",v++;_+=""}d+='<li><a href="'+s[f][1]+'">'+s[f][0]+"</a></li>"+_}}d+="</ul>",c.find("div:first").html(d),c.find(".search__found").find("li:not(:lt(11))").remove(),o=c.find(".search__found").find("li").length,c.addClass("visible")},h=function(e,i){return a.abort(),a=$.ajax({url:n,data:{value:e.val(),action:"main_search"},dataType:"json",type:"get",success:function(e){f(e)},error:function(e){"abort"!=e.statusText&&console.log("Error")}}),!1},u=function(){l()};u()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5wb3B1cC5qcyIsImpxdWVyeS53ZWJzdGVycy1zZWxlY3QuanMiLCJqcXVlcnkuc2VhcmNoLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiUG9wdXAiLCJ0aGlzIiwib2JqIiwiX3NlbGYiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfb2JqIiwiX2J0bkNsb3NlIiwiZmluZCIsIl93cmFwIiwiX2NvbnRlbnRzIiwiX3Njcm9sbENvbnRlaW5lciIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfdGltZXIiLCJzZXRUaW1lb3V0IiwiX2NlbnRlcldyYXAiLCJoZWlnaHQiLCJjc3MiLCJ0b3AiLCJfZ2V0U2Nyb2xsV2lkdGgiLCJzY3JvbGxCYXJXaWR0aCIsInNjcm9sbERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicGFkZGluZ1JpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIl9pbml0IiwiX29uRXZlbnRzIiwib24iLCJyZXNpemUiLCJjbGljayIsIl9zaG93IiwiYXR0ciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJfc2V0UG9wdXBDb250ZW50IiwiY3VyQ29udGVudCIsImZpbHRlciIsImRpc3BsYXkiLCJXZWJzdGVyc1NlbGVjdCIsIm9wdGlvblR5cGUiLCJzaG93VHlwZSIsInBhcmFtcyIsIl9wb3B1cCIsIl9zY3JvbGwiLCJfb3B0aW9uVHlwZSIsIl9zaG93VHlwZSIsIl92aXNpYmxlIiwidmlzaWJsZSIsIl9kZXZpY2UiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiX3RleHQiLCJfYm9keSIsIl9vcGVuZWQiLCJfYWRkV3JhcCIsImN1clRleHQiLCJvcGFjaXR5Iiwid3JhcCIsInBhcmVudCIsImFwcGVuZCIsImJlZm9yZSIsImN1ckl0ZW0iLCJ0ZXh0IiwiZXEiLCJfaGlkZVBvcHVwIiwic3RvcCIsInNsaWRlVXAiLCJyZW1vdmUiLCJmYWRlT3V0IiwiX2NvbnN0cnVjdG9yIiwiX3NlbGVjdFZpZXdUeXBlIiwiX3Nob3dQb3B1cCIsIl9zZXRNb2JpbGVWaWV3IiwiX3NldEN1c3RvbTEiLCJzZWxlY3RzIiwibGlzdCIsIm1heEhlaWdodCIsInNjcm9sbFRvcCIsIm9mZnNldCIsImN1ckluZGV4IiwiaW5kZXgiLCJpZCIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImNoZWNrT3BlbmVkIiwiY2xvc2UiLCJpIiwid2lkdGgiLCJvdXRlcldpZHRoIiwibGVmdCIsIm91dGVySGVpZ2h0IiwicGVyZmVjdFNjcm9sbGJhciIsInNsaWRlRG93biIsImFuaW1hdGUiLCJ2YWwiLCJ0cmlnZ2VyIiwiU2VhcmNoIiwiX2lucHV0IiwiX3JlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIl9wYXRoIiwiZGF0YSIsInN1Z2dlc3RTZWxlY3RlZCIsImNvdW50SXRlbXMiLCJ2YWx1ZUlucHV0IiwiX3Jlc3VsdCIsIl9hZGRFdmVudHMiLCJrZXl1cCIsIkkiLCJrZXlDb2RlIiwibGVuZ3RoIiwic3VibWl0IiwiX2FqYXhSZXF1ZXN0Iiwia2V5ZG93biIsImxvY2F0aW9uIiwiaHJlZiIsInByZXZlbnREZWZhdWx0IiwiX2tleUFjdGl2YXRlIiwiZXZlbnQiLCJjYW5jZWxCdWJibGUiLCJuIiwiX2FkZERhdGEiLCJjYXRlZ29yaWVzIiwiY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSIsInByb2R1Y3RzIiwiYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyIiwicHJvZHVjdHNDYXRlZ29yaWVzQXJyIiwiZmxhZyIsInByb2R1Y3RzV3JhcCIsInByb2R1Y3QiLCJzcmMiLCJhbHQiLCJvbGRQcmljZSIsInByaWNlIiwibmFtZSIsInB1c2giLCJtYWluQ2F0ZWdvcnkiLCJ1cmxNYWluQ2F0ZWdvcnkiLCJzdWJjYXRlZ29yaWVzIiwidXJsU3ViY2F0ZWdvcmllcyIsImh0bWwiLCJyZXN1bHRTdHIiLCJzdWJjYXRlZ29yaWVzV3JhcCIsInVuZGVmaW5lZCIsInVybENhdGVnb3J5IiwiaiIsInoiLCJpbmRleE9mIiwiY291bnQiLCJpbnB1dCIsImFib3J0IiwiYWpheCIsInVybCIsInZhbHVlIiwiYWN0aW9uIiwiZGF0YVR5cGUiLCJ0eXBlIiwic3VjY2VzcyIsIm1zZyIsImVycm9yIiwic3RhdHVzVGV4dCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJDQUFBLFdBRUlBLEVBQUcsV0FFQ0EsRUFBRyxVQUFXQyxLQUFLLFdBRWYsR0FBSUMsR0FBTUYsRUFBRUcsVUFNcEIsSUFBSUQsR0FBUSxTQUFVRSxHQUdsQixHQUFJQyxHQUFRRixLQUNSRyxFQUFnQixHQUNoQkMsRUFBWVAsRUFBRyxnQkFDZlEsRUFBT0osRUFDUEssRUFBWUQsRUFBS0UsS0FBTSxpQ0FDdkJDLEVBQVFILEVBQUtFLEtBQU0sZ0JBQ25CRSxFQUFZSixFQUFLRSxLQUFNLG1CQUN2QkcsRUFBbUJiLEVBQUcsUUFDdEJjLEVBQVVkLEVBQUdlLFFBQ2JDLEVBQVNDLFdBQVksYUFBYyxHQUduQ0MsRUFBYyxXQUNMSixFQUFRSyxTQUE2QixFQUFoQmIsRUFBc0JLLEVBQU1RLFNBQVcsRUFDN0RSLEVBQU1TLEtBQU9DLEtBQVNQLEVBQVFLLFNBQTZCLEVBQWhCYixFQUF3QkssRUFBTVEsVUFBYSxJQUV0RlIsRUFBTVMsS0FBT0MsSUFBSyxLQUcxQkMsRUFBa0IsV0FDZCxHQUNJQyxHQURBQyxFQUFZQyxTQUFTQyxjQUFlLE1BV3hDLE9BUkFGLEdBQVVHLFVBQVksMkJBRXRCRixTQUFTRyxLQUFLQyxZQUFhTCxHQUUzQkQsRUFBaUJDLEVBQVVNLFlBQWNOLEVBQVVPLFlBRW5ETixTQUFTRyxLQUFLSSxZQUFZUixHQUVuQkQsR0FFWFUsRUFBUSxXQUNKekIsRUFBS1ksS0FDRGMsVUFBVyxXQUVmckIsRUFBaUJPLEtBQ2JjLFVBQVcsT0FDWEMsYUFBYyxJQUdsQjNCLEVBQUs0QixZQUFhLGdCQUNsQjVCLEVBQUs2QixT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QUFhLFFBRWJwQyxFQUFROUcsS0FBSyxhQUFhaUosS0FBS0MsR0FFL0JwQyxFQUFROUcsS0FBSyxrQkFBa0JBLEtBQUssbUJBQW1CdUUsU0FFdkRxQyxFQUFhRSxFQUFROUcsS0FBSyxrQkFBa0JBLEtBQUssTUFBTW1ILE9BRXZETCxFQUFRbkYsU0FBUyxZQUdyQjBGLEVBQWdCLFNBQVVxQyxFQUFPN0IsR0F1QjdCLE1BckJBdEIsR0FBU29ELFFBQ1RwRCxFQUFXakgsRUFBRXNLLE1BQ1RDLElBQUtwRCxFQUNMQyxNQUNJb0QsTUFBT0osRUFBTXZELE1BQ2I0RCxPQUFPLGVBRVhDLFNBQVUsT0FDVkMsS0FBTSxNQUNOQyxRQUFTLFNBQVdDLEdBRWhCckMsRUFBVXFDLElBR2RDLE1BQU8sU0FBVTVELEdBQ29CLFNBQTdCQSxFQUFlNkQsWUFDZkMsUUFBUUMsSUFBSSxhQUtqQixHQUVYM0ksRUFBUSxXQUNKbUYsSUFPUm5GIiwiZmlsZSI6InVpLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJCggJy5wb3B1cCcgKS5lYWNoKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIG5ldyBQb3B1cCgkKHRoaXMpKTtcblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgdmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXG4gICAgICAgICAgICBfYnRuU2hvdyA9ICAkKCAnLnBvcHVwX19vcGVuJyApLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxuICAgICAgICAgICAgX3dyYXAgPSBfb2JqLmZpbmQoICcucG9wdXBfX3dyYXAnICksXG4gICAgICAgICAgICBfY29udGVudHMgPSBfb2JqLmZpbmQoICcucG9wdXBfX2NvbnRlbnQnICksXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe30sIDEgKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2NlbnRlcldyYXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSAtIF93cmFwLmhlaWdodCgpID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAwIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGg7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcblxuICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIHZhciBjdXJDb250ZW50ID0gX2NvbnRlbnRzLmZpbHRlciggJy5wb3B1cF9fJyArIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xuICAgICAgICAgICAgICAgIGN1ckNvbnRlbnQuY3NzKCB7IGRpc3BsYXk6ICdibG9jaycgfSApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xufSApKCk7XG5cbiIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uKCl7XG4gICAgICAgICQoICdzZWxlY3QnICkuZWFjaCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIG5ldyBXZWJzdGVyc1NlbGVjdCgge1xuICAgICAgICAgICAgICAgIG9iajogJCggdGhpcyApLFxuICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IDEsXG4gICAgICAgICAgICAgICAgc2hvd1R5cGU6IDJcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH0gKTtcblxuICAgIHZhciBXZWJzdGVyc1NlbGVjdCA9IGZ1bmN0aW9uKCBwYXJhbXMgKXtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IHBhcmFtcy5vYmosXG4gICAgICAgICAgICBfb3B0aW9uVHlwZSA9IHBhcmFtcy5vcHRpb25UeXBlIHx8IDAsXG4gICAgICAgICAgICBfc2hvd1R5cGUgPSBwYXJhbXMuc2hvd1R5cGUgfHwgMCxcbiAgICAgICAgICAgIF92aXNpYmxlID0gcGFyYW1zLnZpc2libGUgfHwgNSxcbiAgICAgICAgICAgIF9kZXZpY2UgPSAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKSxcbiAgICAgICAgICAgIF90ZXh0ID0gJCggJzxzcGFuIGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0X19pdGVtXCI+PC9zcGFuPicgKSxcbiAgICAgICAgICAgIF93cmFwID0gJCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RcIj48L2Rpdj4nICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApLFxuICAgICAgICAgICAgX29wZW5lZCA9IGZhbHNlLFxuICAgICAgICAgICAgX3BvcHVwLCBfc2Nyb2xsO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkV3JhcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIGN1clRleHQgPSAnJztcblxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLndyYXAoIF93cmFwICk7XG4gICAgICAgICAgICAgICAgX3dyYXAgPSBfb2JqLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgIF93cmFwLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2Fycm93XCI+PC9kaXY+JyApO1xuICAgICAgICAgICAgICAgIF9vYmouYmVmb3JlKCBfdGV4dCApO1xuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY3VySXRlbS5hdHRyKCAnc2VsZWN0ZWQnICkgPT0gJ3NlbGVjdGVkJyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9IGN1ckl0ZW0udGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIGN1clRleHQgPT0gJycgKXtcbiAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9ICBfb2JqLmZpbmQoICdvcHRpb24nKS5lcSggMCApLnRleHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RleHQudGV4dCggY3VyVGV4dCApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9oaWRlUG9wdXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vcGVuZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmKCAhX3Nob3dUeXBlICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5zbGlkZVVwKCAzMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAyICkge1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5mYWRlT3V0KCAzMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfd3JhcC5yZW1vdmVDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9vcGVuZWQnICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY29uc3RydWN0b3IgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcblxuICAgICAgICAgICAgICAgIF9hZGRXcmFwKCk7XG4gICAgICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlKCk7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIF90ZXh0LnRleHQoICQoIHRoaXMgKS5maW5kKCAnb3B0aW9uOnNlbGVjdGVkJyApLnRleHQoKSApO1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfb3B0aW9uVHlwZSA9PSAxICYmICFfZGV2aWNlICl7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3dQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9ib2R5Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZWxlY3RWaWV3VHlwZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICBpZiggIV9vcHRpb25UeXBlIHx8IF9kZXZpY2UgKXtcbiAgICAgICAgICAgICAgICAgICAgX3NldE1vYmlsZVZpZXcoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9vcHRpb25UeXBlID09IDEgKXtcbiAgICAgICAgICAgICAgICAgICAgX3NldEN1c3RvbTEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEN1c3RvbTEgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF93cmFwLmFkZENsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X2N1c3RvbScgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0TW9iaWxlVmlldyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3RfbW9iaWxlJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93UG9wdXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RzID0gJCggJ3NlbGVjdCcgKSxcbiAgICAgICAgICAgICAgICAgICAgbGlzdCA9ICQoICc8dWw+PC91bD4nKSxcbiAgICAgICAgICAgICAgICAgICAgY3VyU2Nyb2xsID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gX3dyYXAub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gX29iai5maW5kKCAnb3B0aW9uOnNlbGVjdGVkJyApLmluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgIGlkID0gTWF0aC5yb3VuZCggTWF0aC5yYW5kb20oKSAqIDEwMDAgKTtcblxuICAgICAgICAgICAgICAgIHNlbGVjdHMuZWFjaCggZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoIHRoaXMgIT09IF9vYmpbIDAgXSAmJiB0aGlzLm9iai5jaGVja09wZW5lZCgpICl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfb3BlbmVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIF9wb3B1cCA9ICQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0X19wb3B1cFwiIGlkPVwid2Vic3RlcnMtc2VsZWN0X19wb3B1cCcgKyBpZCArICdcIj48L2Rpdj4nICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICdvcHRpb24nICkuZWFjaCggZnVuY3Rpb24oIGkgKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKCB0aGlzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGkgPT0gY3VySW5kZXggKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKCAnPGxpIGNsYXNzPVwiYWN0aXZlXCI+JyArIGN1ckl0ZW0udGV4dCgpICsgJzwvbGk+JyApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5hcHBlbmQoICc8bGk+JyArIGN1ckl0ZW0udGV4dCgpICsgJzwvbGk+JyApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfcG9wdXAuYXBwZW5kKCBsaXN0ICk7XG4gICAgICAgICAgICAgICAgX3dyYXAuYXBwZW5kKCBfcG9wdXAgKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9vcGVuZWQnICk7XG5cbiAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBfd3JhcC5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IC0yLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IF93cmFwLm91dGVySGVpZ2h0KCkgLSA0XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gX3BvcHVwLm91dGVySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaWYoIG1heEhlaWdodCA+IF9wb3B1cC5maW5kKCAnbGknICkuZXEoIDAgKS5vdXRlckhlaWdodCgpICogX3Zpc2libGUgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmhlaWdodCggX3BvcHVwLmZpbmQoICdsaScgKS5lcSggMCApLm91dGVySGVpZ2h0KCkgKiBfdmlzaWJsZSApO1xuICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsID0gX3BvcHVwLnBlcmZlY3RTY3JvbGxiYXIoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggX3Nob3dUeXBlID09IDEgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnNsaWRlRG93biggMzAwICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMiApIHtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC4xXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmFuaW1hdGUoIHsgb3BhY2l0eTogMSB9LCAzMDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9wb3B1cC5maW5kKCAnbGknICkub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oIGUgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICQoIHRoaXMgKS5pbmRleCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnZhbCggX29iai5maW5kKCAnb3B0aW9uJyApLmVxKCBpbmRleCApLmF0dHIoICd2YWx1ZScgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai50cmlnZ2VyKCAnY2hhbmdlJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG4gICAgICAgIF9zZWxmLmNoZWNrT3BlbmVkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiBfb3BlbmVkO1xuICAgICAgICB9O1xuICAgICAgICBfc2VsZi5jbG9zZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgIH07XG5cblxuICAgICAgICBfY29uc3RydWN0b3IoKTtcblxuICAgIH07XG5cbn0gKSgpOyIsIiggZnVuY3Rpb24oKXtcblxuICAgICQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJy5zZWFyY2gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFNlYXJjaCggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcblxuICAgIHZhciBTZWFyY2ggPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfaW5wdXQgPSBfb2JqLmZpbmQoJ2lucHV0W3R5cGU9c2VhcmNoXScpLFxuICAgICAgICAgICAgX3JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgICAgIF9wYXRoID0gX29iai5kYXRhKCdwYXRoJyksXG4gICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwLFxuICAgICAgICAgICAgY291bnRJdGVtcyA9IDAsXG4gICAgICAgICAgICB2YWx1ZUlucHV0ID0gX2lucHV0LnZhbCgpLFxuICAgICAgICAgICAgX3Jlc3VsdCA9IF9vYmouZmluZCgnLnNlYXJjaF9fcmVzdWx0Jyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9pbnB1dC5vbigge1xuICAgICAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24oSSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChJLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5sZW5ndGggPT0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlSW5wdXQgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHZhbHVlSW5wdXQubGVuZ3RoID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hamF4UmVxdWVzdCggJCh0aGlzKSwgdmFsdWVJbnB1dC5sZW5ndGgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS52YWwoKSA9PSAnJyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAga2V5ZG93bjogZnVuY3Rpb24oSSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCh3aW5kb3cpLndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCggSS5rZXlDb2RlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmZpbHRlcignLmFjdGl2ZScpLmxlbmd0aCA9PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX29iai5kYXRhKCdhY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykuZmluZCgnYScpLmF0dHIoJ2hyZWYnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGNvdW50SXRlbXMgPiAwICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2tleUFjdGl2YXRlKCBJLmtleUNvZGUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzdWdnZXN0U2VsZWN0ZWQgPT0gY291bnRJdGVtcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5jbGljayggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgXCJib2R5XCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBldmVudCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgXCIuc2VhcmNoX19mb3VuZCBsaVwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJUZXh0ID0gY3VySXRlbS5maW5kKCdhJykudGV4dCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKGN1clRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXG4gICAgICAgICAgICAgICAgICAgIFwia2V5ZG93blwiLFxuICAgICAgICAgICAgICAgICAgICBcIi5zZWFyY2hfX2ZvdW5kIGxpXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKEkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKEkua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfa2V5QWN0aXZhdGUgPSBmdW5jdGlvbihuKSB7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgaWYoIG4gPT0gNDAgJiYgc3VnZ2VzdFNlbGVjdGVkIDwgY291bnRJdGVtcyApIHtcblxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQrKztcblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG4gPT0gMzggJiYgc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQtLTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggc3VnZ2VzdFNlbGVjdGVkID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZXEoIHN1Z2dlc3RTZWxlY3RlZCAtIDEgKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggc3VnZ2VzdFNlbGVjdGVkIC0gMSApLmZpbmQoJ2EnKS50ZXh0KCkgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggdmFsdWVJbnB1dCApO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGREYXRhID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXMsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgPSBjYXRlZ29yaWVzLmxlbmd0aCAhPSAwLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0cyA9IGRhdGEucHJvZHVjdHMsXG4gICAgICAgICAgICAgICAgICAgIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgdXJsUHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzV3JhcCA9ICc8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX193cmFwXCI+JztcblxuICAgICAgICAgICAgICAgICQuZWFjaCggcHJvZHVjdHMsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c1dyYXAgKz0gJzxkaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvcC1wcm9kdWN0c19faXRlbVwiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19waWNcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJysgcHJvZHVjdC5zcmMgKydcIiB3aWR0aD1cIjQxNFwiIGhlaWdodD1cIjQxNFwiIGFsdD1cIicrIHByb2R1Y3QuYWx0ICsnXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRvcC1wcm9kdWN0c19fcHJpY2VcIj48ZGVsPicrIHByb2R1Y3Qub2xkUHJpY2UgKyc8L2RlbD4gJysgcHJvZHVjdC5wcmljZSArJzwvc3Bhbj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidG9wLXByb2R1Y3RzX19pdGVtLXRpdGxlXCI+JysgcHJvZHVjdC5uYW1lICsnPC9oMz5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIicrIHByb2R1Y3QuaHJlZiArJ1wiIGNsYXNzPVwidG9wLXByb2R1Y3RzX19idG5cIj52aWV3PC9hPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgaWYoICFjYXRlZ29yaWVzQXZhaWxhYmlsaXR5ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaCggW3Byb2R1Y3QuY2F0ZWdvcmllcy5tYWluQ2F0ZWdvcnksIHByb2R1Y3QuY2F0ZWdvcmllcy51cmxNYWluQ2F0ZWdvcnksIHByb2R1Y3QuY2F0ZWdvcmllcy5zdWJjYXRlZ29yaWVzLCBwcm9kdWN0LmNhdGVnb3JpZXMudXJsU3ViY2F0ZWdvcmllc10gKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBwcm9kdWN0c1dyYXAgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdicpLmVxKDEpLmZpbmQoJy50b3AtcHJvZHVjdHMnKS5odG1sKHByb2R1Y3RzV3JhcCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0U3RyID0gJzx1bCBjbGFzcz1cInNlYXJjaF9fZm91bmRcIj4nO1xuXG4gICAgICAgICAgICAgICAgaWYoIGNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCBjYXRlZ29yaWVzLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YmNhdGVnb3JpZXMgPSB0aGlzLnN1YmNhdGVnb3JpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsU3ViY2F0ZWdvcmllcyA9IHRoaXMudXJsU3ViY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggc3ViY2F0ZWdvcmllcyAhPSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciBpID0gMDsgaSA8PSBzdWJjYXRlZ29yaWVzLmxlbmd0aC0xOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJzxsaSBjbGFzcz1cInNlYXJjaF9fZm91bmQtc3ViXCI+PGEgaHJlZj1cIicrIHVybFN1YmNhdGVnb3JpZXNbaV0gKydcIj4nICsgc3ViY2F0ZWdvcmllc1tpXSArICc8L2E+PC9saT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0ciArPSAnPGxpPjxhIGhyZWY9XCInKyB0aGlzLnVybENhdGVnb3J5ICsnXCI+JysgdGhpcy5uYW1lICsnPC9hPjwvbGk+Jysgc3ViY2F0ZWdvcmllc1dyYXAgKycnO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMTsgaSsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggZmxhZyApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggcHJvZHVjdHNDYXRlZ29yaWVzQXJyW3Byb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMV1bMF0gIT0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzBdICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBqID0gMDsgaiA8PSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0ubGVuZ3RoLTE7IGorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgeiA9IDA7IHogPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdLmxlbmd0aC0xOyB6KysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5pbmRleE9mKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0pID09IC0xICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW3Byb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMV1bMl0ucHVzaCggYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdW3pdIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTE7IGkrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YmNhdGVnb3JpZXNXcmFwID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciB6ID0gMDsgeiA8PSBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl0ubGVuZ3RoLTE7IHorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVszXVt6XSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzJdW3pdICsgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ICsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyICs9ICc8bGk+PGEgaHJlZj1cIicgKyBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMV0gKyAnXCI+JyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVswXSArICc8L2E+PC9saT4nKyBzdWJjYXRlZ29yaWVzV3JhcCArJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0U3RyICs9ICc8L3VsPic7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmZpbmQoJ2RpdjpmaXJzdCcpLmh0bWwocmVzdWx0U3RyKTtcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaTpub3QoOmx0KDExKSknKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIGNvdW50SXRlbXMgPSBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kJykuZmluZCgnbGknKS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBfcmVzdWx0LmFkZENsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWpheFJlcXVlc3QgPSAgZnVuY3Rpb24oIGlucHV0LCBuICkge1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IF9wYXRoLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaW5wdXQudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246J21haW5fc2VhcmNoJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZERhdGEoIG1zZyApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyJdfQ==
