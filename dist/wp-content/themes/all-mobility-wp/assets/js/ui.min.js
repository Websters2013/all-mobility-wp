!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),s.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return m($(this).attr("data-popup")),!1}}),c.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},m=function(o){v(o),s.css({overflowY:"hidden",paddingRight:r()}),e.addClass("popup_opened"),f()},v=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,i,n=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=$('<span class="websters-select__item"></span>'),p=$('<div class="websters-select"></div>'),r=$(window),f=$("body"),u=!1,h=function(){var e="";o.css({opacity:0}),o.wrap(p),p=o.parent(),p.append('<div class="websters-select__arrow"></div>'),o.before(d),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),d.text(e)},v=function(){u=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),p.removeClass("websters-select_opened")},b=function(){o[0].obj=n,h(),g(),w()},w=function(){o.on("change",function(){d.text($(this).find("option:selected").text())}),1!=s||l||p.on({click:function(e){e.stopPropagation(),u?v():m()}}),f.on({click:function(){u&&v()}})},g=function(){!s||l?y():1==s&&_()},_=function(){p.addClass("websters-select_custom")},y=function(){p.addClass("websters-select_mobile")},m=function(){var e=$("select"),n=$("<ul></ul>"),s=(r.scrollTop(),p.offset(),0),l=o.find("option:selected").index(),d=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),u&&t.remove(),u=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+d+'"></div>'),o.find("option").each(function(e){var t=$(this);e==l?n.append('<li class="active">'+t.text()+"</li>"):n.append("<li>"+t.text()+"</li>")}),t.append(n),p.append(t),p.addClass("websters-select_opened"),t.css({width:p.outerWidth(),left:-2,top:p.outerHeight()-4}),s=t.outerHeight(),s>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),i=t.perfectScrollbar()),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),v()}})};n.checkOpened=function(){return u},n.close=function(){v()},b()}}();
!function(){$(function(){$(".search").each(function(){new e($(this))})});var e=function(e){var i=e,t=i.find("input[type=search]"),a=new XMLHttpRequest,n=i.data("path"),s=0,o=0,r=t.val(),c=i.find(".search__result"),l=function(){t.on({keyup:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:0==c.find(".search__found li").filter(".active").length&&i.find("form").submit();break;case 32:case 27:case 37:case 38:case 39:case 40:break;default:var t=$(this).val();t.length>0?u($(this),t.length):""==$(this).val()&&(c.removeClass("visible"),s=0)}},keydown:function(e){if($(window).width()>=1024)switch(e.keyCode){case 13:return 0==c.find(".search__found li").filter(".active").length?window.location.href=i.data("action"):window.location.href=c.find(".search__found li").filter(".active").find("a").attr("href"),!1;case 27:return c.remove(),s=0,!1;case 38:case 40:e.preventDefault(),o>0&&(d(e.keyCode),s==o&&(s=0))}}}),$("html").click(function(){c.removeClass("visible"),s=0}),$(document).on("click","body",function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),$(document).on("click",".search__found li",function(){var e=$(this),i=e.find("a").text();t.val(i),c.removeClass("visible"),s=0}),$(document).on("keydown",".search__found li",function(e){switch(e.keyCode){case 13:$(this).trigger("click")}})},d=function(e){c.find(".search__found li").removeClass("active"),40==e&&s<o?s++:38==e&&s>0&&s--,s>0?(c.find(".search__found li").eq(s-1).addClass("active"),t.val(c.find(".search__found li").eq(s-1).find("a").text())):t.val(r)},f=function(e){var e=e,i=e.categories,t=0!=i.length,a=e.products,n=[],s=[],r=!0,l='<div class="top-products__wrap">';$.each(a,function(){var e=this;l+='<div>                                            <div class="top-products__item">                                                <div class="top-products__pic">                                                    <img src="'+e.src+'" width="414" height="414" alt="'+e.alt+'">                                                </div>                                                <span class="top-products__price"><del>'+e.oldPrice+"</del> "+e.price+'</span>                                                <h3 class="top-products__item-title">'+e.name+'</h3>                                                <a href="'+e.href+'" class="top-products__btn">view</a>                                            </div>                                        </div>',t||n.push([e.categories.mainCategory,e.categories.urlMainCategory,e.categories.subcategories,e.categories.urlSubcategories])}),l+="</div>",c.find("div").eq(1).find(".top-products").html(l);var d='<ul class="search__found">';if(t)$.each(i,function(){var e=this.subcategories,i=this.urlSubcategories,t="";if(void 0!=e){for(var a=0;a<=e.length-1;a++)t+='<li class="search__found-sub"><a href="'+i[a]+'">'+e[a]+"</a></li>";t+=""}d+='<li><a href="'+this.urlCategory+'">'+this.name+"</a></li>"+t});else{for(var f=0;f<=n.length-1;f++)if(r&&(s.push(n[f]),r=!1),s[s.length-1][0]!=n[f][0])s.push(n[f]);else for(var u=0;u<=n[f].length-1;u++)for(var h=0;h<=n[f][2].length-1;h++)s[s.length-1][2].indexOf(n[f][2][h])==-1&&s[s.length-1][2].push(n[f][2][h]);for(var v=0,f=0;f<=s.length-1;f++){for(var u=0;u<=s[f].length-1;u++){for(var _="",h=0;h<=s[f][2].length-1;h++)_+='<li class="search__found-sub"><a href="'+s[f][3][h]+'">'+s[f][2][h]+"</a></li>",v++;_+=""}d+='<li><a href="'+s[f][1]+'">'+s[f][0]+"</a></li>"+_}}d+="</ul>",c.find("div:first").html(d),c.find(".search__found").find("li:not(:lt(11))").remove(),o=c.find(".search__found").find("li").length,c.addClass("visible")},u=function(e,i){return a.abort(),a=$.ajax({url:n,data:{value:e.val()},dataType:"json",type:"get",success:function(e){f(e)},error:function(e){"abort"!=e.statusText&&console.log("Error")}}),!1},h=function(){l()};h()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5wb3B1cC5qcyIsImpxdWVyeS53ZWJzdGVycy1zZWxlY3QuanMiLCJqcXVlcnkuc2VhcmNoLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiUG9wdXAiLCJ0aGlzIiwib2JqIiwiX3NlbGYiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfb2JqIiwiX2J0bkNsb3NlIiwiZmluZCIsIl93cmFwIiwiX2NvbnRlbnRzIiwiX3Njcm9sbENvbnRlaW5lciIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfdGltZXIiLCJzZXRUaW1lb3V0IiwiX2NlbnRlcldyYXAiLCJoZWlnaHQiLCJjc3MiLCJ0b3AiLCJfZ2V0U2Nyb2xsV2lkdGgiLCJzY3JvbGxCYXJXaWR0aCIsInNjcm9sbERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicGFkZGluZ1JpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIl9pbml0IiwiX29uRXZlbnRzIiwib24iLCJyZXNpemUiLCJjbGljayIsIl9zaG93IiwiYXR0ciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJfc2V0UG9wdXBDb250ZW50IiwiY3VyQ29udGVudCIsImZpbHRlciIsImRpc3BsYXkiLCJXZWJzdGVyc1NlbGVjdCIsIm9wdGlvblR5cGUiLCJzaG93VHlwZSIsInBhcmFtcyIsIl9wb3B1cCIsIl9zY3JvbGwiLCJfb3B0aW9uVHlwZSIsIl9zaG93VHlwZSIsIl92aXNpYmxlIiwidmlzaWJsZSIsIl9kZXZpY2UiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiX3RleHQiLCJfYm9keSIsIl9vcGVuZWQiLCJfYWRkV3JhcCIsImN1clRleHQiLCJvcGFjaXR5Iiwid3JhcCIsInBhcmVudCIsImFwcGVuZCIsImJlZm9yZSIsImN1ckl0ZW0iLCJ0ZXh0IiwiZXEiLCJfaGlkZVBvcHVwIiwic3RvcCIsInNsaWRlVXAiLCJyZW1vdmUiLCJmYWRlT3V0IiwiX2NvbnN0cnVjdG9yIiwiX3NlbGVjdFZpZXdUeXBlIiwiX3Nob3dQb3B1cCIsIl9zZXRNb2JpbGVWaWV3IiwiX3NldEN1c3RvbTEiLCJzZWxlY3RzIiwibGlzdCIsIm1heEhlaWdodCIsInNjcm9sbFRvcCIsIm9mZnNldCIsImN1ckluZGV4IiwiaW5kZXgiLCJpZCIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImNoZWNrT3BlbmVkIiwiY2xvc2UiLCJpIiwid2lkdGgiLCJvdXRlcldpZHRoIiwibGVmdCIsIm91dGVySGVpZ2h0IiwicGVyZmVjdFNjcm9sbGJhciIsInNsaWRlRG93biIsImFuaW1hdGUiLCJ2YWwiLCJ0cmlnZ2VyIiwiU2VhcmNoIiwiX2lucHV0IiwiX3JlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIl9wYXRoIiwiZGF0YSIsInN1Z2dlc3RTZWxlY3RlZCIsImNvdW50SXRlbXMiLCJ2YWx1ZUlucHV0IiwiX3Jlc3VsdCIsIl9hZGRFdmVudHMiLCJrZXl1cCIsIkkiLCJrZXlDb2RlIiwibGVuZ3RoIiwic3VibWl0IiwiX2FqYXhSZXF1ZXN0Iiwia2V5ZG93biIsImxvY2F0aW9uIiwiaHJlZiIsInByZXZlbnREZWZhdWx0IiwiX2tleUFjdGl2YXRlIiwiZXZlbnQiLCJjYW5jZWxCdWJibGUiLCJuIiwiX2FkZERhdGEiLCJjYXRlZ29yaWVzIiwiY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSIsInByb2R1Y3RzIiwiYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyIiwicHJvZHVjdHNDYXRlZ29yaWVzQXJyIiwiZmxhZyIsInByb2R1Y3RzV3JhcCIsInByb2R1Y3QiLCJzcmMiLCJhbHQiLCJvbGRQcmljZSIsInByaWNlIiwibmFtZSIsInB1c2giLCJtYWluQ2F0ZWdvcnkiLCJ1cmxNYWluQ2F0ZWdvcnkiLCJzdWJjYXRlZ29yaWVzIiwidXJsU3ViY2F0ZWdvcmllcyIsImh0bWwiLCJyZXN1bHRTdHIiLCJzdWJjYXRlZ29yaWVzV3JhcCIsInVuZGVmaW5lZCIsInVybENhdGVnb3J5IiwiaiIsInoiLCJpbmRleE9mIiwiY291bnQiLCJpbnB1dCIsImFib3J0IiwiYWpheCIsInVybCIsInZhbHVlIiwiZGF0YVR5cGUiLCJ0eXBlIiwic3VjY2VzcyIsIm1zZyIsImVycm9yIiwic3RhdHVzVGV4dCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJDQUFBLFdBRUlBLEVBQUcsV0FFQ0EsRUFBRyxVQUFXQyxLQUFLLFdBRWYsR0FBSUMsR0FBTUYsRUFBRUcsVUFNcEIsSUFBSUQsR0FBUSxTQUFVRSxHQUdsQixHQUFJQyxHQUFRRixLQUNSRyxFQUFnQixHQUNoQkMsRUFBWVAsRUFBRyxnQkFDZlEsRUFBT0osRUFDUEssRUFBWUQsRUFBS0UsS0FBTSxpQ0FDdkJDLEVBQVFILEVBQUtFLEtBQU0sZ0JBQ25CRSxFQUFZSixFQUFLRSxLQUFNLG1CQUN2QkcsRUFBbUJiLEVBQUcsUUFDdEJjLEVBQVVkLEVBQUdlLFFBQ2JDLEVBQVNDLFdBQVksYUFBYyxHQUduQ0MsRUFBYyxXQUNMSixFQUFRSyxTQUE2QixFQUFoQmIsRUFBc0JLLEVBQU1RLFNBQVcsRUFDN0RSLEVBQU1TLEtBQU9DLEtBQVNQLEVBQVFLLFNBQTZCLEVBQWhCYixFQUF3QkssRUFBTVEsVUFBYSxJQUV0RlIsRUFBTVMsS0FBT0MsSUFBSyxLQUcxQkMsRUFBa0IsV0FDZCxHQUNJQyxHQURBQyxFQUFZQyxTQUFTQyxjQUFlLE1BV3hDLE9BUkFGLEdBQVVHLFVBQVksMkJBRXRCRixTQUFTRyxLQUFLQyxZQUFhTCxHQUUzQkQsRUFBaUJDLEVBQVVNLFlBQWNOLEVBQVVPLFlBRW5ETixTQUFTRyxLQUFLSSxZQUFZUixHQUVuQkQsR0FFWFUsRUFBUSxXQUNKekIsRUFBS1ksS0FDRGMsVUFBVyxXQUVmckIsRUFBaUJPLEtBQ2JjLFVBQVcsT0FDWEMsYUFBYyxJQUdsQjNCLEVBQUs0QixZQUFhLGdCQUNsQjVCLEVBQUs2QixTQUFVLGNBRWZy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QyxFQUFROUcsS0FBSyxhQUFhaUosS0FBS0MsR0FFL0JwQyxFQUFROUcsS0FBSyxrQkFBa0JBLEtBQUssbUJBQW1CdUUsU0FFdkRxQyxFQUFhRSxFQUFROUcsS0FBSyxrQkFBa0JBLEtBQUssTUFBTW1ILE9BRXZETCxFQUFRbkYsU0FBUyxZQUdyQjBGLEVBQWdCLFNBQVVxQyxFQUFPN0IsR0FzQjdCLE1BcEJBdEIsR0FBU29ELFFBQ1RwRCxFQUFXakgsRUFBRXNLLE1BQ1RDLElBQUtwRCxFQUNMQyxNQUNJb0QsTUFBT0osRUFBTXZELE9BRWpCNEQsU0FBVSxPQUNWQyxLQUFNLE1BQ05DLFFBQVMsU0FBV0MsR0FFaEJwQyxFQUFVb0MsSUFHZEMsTUFBTyxTQUFVM0QsR0FDb0IsU0FBN0JBLEVBQWU0RCxZQUNmQyxRQUFRQyxJQUFJLGFBS2pCLEdBRVgxSSxFQUFRLFdBQ0ptRixJQU9SbkYiLCJmaWxlIjoidWkubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24oKXtcblxuICAgICAgICAkKCAnLnBvcHVwJyApLmVhY2goZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgbmV3IFBvcHVwKCQodGhpcykpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9wb3B1cFBhZGRpbmcgPSA0MCxcbiAgICAgICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2J0bkNsb3NlID0gX29iai5maW5kKCAnLnBvcHVwX19jbG9zZSwgLnBvcHVwX19jYW5jZWwnICksXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcbiAgICAgICAgICAgIF9jb250ZW50cyA9IF9vYmouZmluZCggJy5wb3B1cF9fY29udGVudCcgKSxcbiAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIgPSAkKCAnaHRtbCcgKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfY2VudGVyV3JhcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApIC0gX3dyYXAuaGVpZ2h0KCkgPiAwICkge1xuICAgICAgICAgICAgICAgICAgICBfd3JhcC5jc3MoIHsgdG9wOiAoICggX3dpbmRvdy5oZWlnaHQoKSAtICggX3BvcHVwUGFkZGluZyAqIDIgKSApIC0gX3dyYXAuaGVpZ2h0KCkgKSAvIDIgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6IDAgfSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aDtcblxuICAgICAgICAgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAncG9wdXBfX3Njcm9sbGJhci1tZWFzdXJlJztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNjcm9sbERpdiApO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcm9sbERpdik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2hpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG5cbiAgICAgICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouY3NzICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0blNob3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3dyYXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgX3NldFBvcHVwQ29udGVudCggY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IF9nZXRTY3JvbGxXaWR0aCgpXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XG4gICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG59ICkoKTtcblxuIiwiKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24oKXtcbiAgICAgICAgJCggJ3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgbmV3IFdlYnN0ZXJzU2VsZWN0KCB7XG4gICAgICAgICAgICAgICAgb2JqOiAkKCB0aGlzICksXG4gICAgICAgICAgICAgICAgb3B0aW9uVHlwZTogMSxcbiAgICAgICAgICAgICAgICBzaG93VHlwZTogMlxuICAgICAgICAgICAgfSApO1xuICAgICAgICB9ICk7XG4gICAgfSApO1xuXG4gICAgdmFyIFdlYnN0ZXJzU2VsZWN0ID0gZnVuY3Rpb24oIHBhcmFtcyApe1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gcGFyYW1zLm9iaixcbiAgICAgICAgICAgIF9vcHRpb25UeXBlID0gcGFyYW1zLm9wdGlvblR5cGUgfHwgMCxcbiAgICAgICAgICAgIF9zaG93VHlwZSA9IHBhcmFtcy5zaG93VHlwZSB8fCAwLFxuICAgICAgICAgICAgX3Zpc2libGUgPSBwYXJhbXMudmlzaWJsZSB8fCA1LFxuICAgICAgICAgICAgX2RldmljZSA9IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApLFxuICAgICAgICAgICAgX3RleHQgPSAkKCAnPHNwYW4gY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2l0ZW1cIj48L3NwYW4+JyApLFxuICAgICAgICAgICAgX3dyYXAgPSAkKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdFwiPjwvZGl2PicgKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICksXG4gICAgICAgICAgICBfb3BlbmVkID0gZmFsc2UsXG4gICAgICAgICAgICBfcG9wdXAsIF9zY3JvbGw7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2YXIgY3VyVGV4dCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9vYmoud3JhcCggX3dyYXAgKTtcbiAgICAgICAgICAgICAgICBfd3JhcCA9IF9vYmoucGFyZW50KCk7XG4gICAgICAgICAgICAgICAgX3dyYXAuYXBwZW5kKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9fYXJyb3dcIj48L2Rpdj4nICk7XG4gICAgICAgICAgICAgICAgX29iai5iZWZvcmUoIF90ZXh0ICk7XG4gICAgICAgICAgICAgICAgX29iai5maW5kKCAnb3B0aW9uJyApLmVhY2goIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmF0dHIoICdzZWxlY3RlZCcgKSA9PSAnc2VsZWN0ZWQnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUZXh0ID0gY3VySXRlbS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggY3VyVGV4dCA9PSAnJyApe1xuICAgICAgICAgICAgICAgICAgICBjdXJUZXh0ID0gIF9vYmouZmluZCggJ29wdGlvbicpLmVxKCAwICkudGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGV4dC50ZXh0KCBjdXJUZXh0ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2hpZGVQb3B1cCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29wZW5lZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYoICFfc2hvd1R5cGUgKXtcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAxICl7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5zdG9wKCB0cnVlLCBmYWxzZSApLnNsaWRlVXAoIDMwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX3Nob3dUeXBlID09IDIgKSB7XG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5zdG9wKCB0cnVlLCBmYWxzZSApLmZhZGVPdXQoIDMwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF93cmFwLnJlbW92ZUNsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X29wZW5lZCcgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuXG4gICAgICAgICAgICAgICAgX2FkZFdyYXAoKTtcbiAgICAgICAgICAgICAgICBfc2VsZWN0Vmlld1R5cGUoKTtcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9vYmoub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RleHQudGV4dCggJCggdGhpcyApLmZpbmQoICdvcHRpb246c2VsZWN0ZWQnICkudGV4dCgpICk7XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgaWYoIF9vcHRpb25UeXBlID09IDEgJiYgIV9kZXZpY2UgKXtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAub24oIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCBlICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1BvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX2JvZHkub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIGlmKCAhX29wdGlvblR5cGUgfHwgX2RldmljZSApe1xuICAgICAgICAgICAgICAgICAgICBfc2V0TW9iaWxlVmlldygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX29wdGlvblR5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfc2V0Q3VzdG9tMSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0Q3VzdG9tMSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3RfY3VzdG9tJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRNb2JpbGVWaWV3ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9tb2JpbGUnICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3dQb3B1cCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdHMgPSAkKCAnc2VsZWN0JyApLFxuICAgICAgICAgICAgICAgICAgICBsaXN0ID0gJCggJzx1bD48L3VsPicpLFxuICAgICAgICAgICAgICAgICAgICBjdXJTY3JvbGwgPSBfd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBfd3JhcC5vZmZzZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgY3VySW5kZXggPSBfb2JqLmZpbmQoICdvcHRpb246c2VsZWN0ZWQnICkuaW5kZXgoKSxcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBNYXRoLnJvdW5kKCBNYXRoLnJhbmRvbSgpICogMTAwMCApO1xuXG4gICAgICAgICAgICAgICAgc2VsZWN0cy5lYWNoKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBpZiggdGhpcyAhPT0gX29ialsgMCBdICYmIHRoaXMub2JqLmNoZWNrT3BlbmVkKCkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9vcGVuZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgX3BvcHVwID0gJCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX3BvcHVwXCIgaWQ9XCJ3ZWJzdGVycy1zZWxlY3RfX3BvcHVwJyArIGlkICsgJ1wiPjwvZGl2PicgKTtcblxuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbiggaSApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggaSA9PSBjdXJJbmRleCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5hcHBlbmQoICc8bGkgY2xhc3M9XCJhY3RpdmVcIj4nICsgY3VySXRlbS50ZXh0KCkgKyAnPC9saT4nICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaT4nICsgY3VySXRlbS50ZXh0KCkgKyAnPC9saT4nICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF9wb3B1cC5hcHBlbmQoIGxpc3QgKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5hcHBlbmQoIF9wb3B1cCApO1xuICAgICAgICAgICAgICAgIF93cmFwLmFkZENsYXNzKCAnd2Vic3RlcnMtc2VsZWN0X29wZW5lZCcgKTtcblxuICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IF93cmFwLm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogLTIsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogX3dyYXAub3V0ZXJIZWlnaHQoKSAtIDRcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSBfcG9wdXAub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBpZiggbWF4SGVpZ2h0ID4gX3BvcHVwLmZpbmQoICdsaScgKS5lcSggMCApLm91dGVySGVpZ2h0KCkgKiBfdmlzaWJsZSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuaGVpZ2h0KCBfcG9wdXAuZmluZCggJ2xpJyApLmVxKCAwICkub3V0ZXJIZWlnaHQoKSAqIF92aXNpYmxlICk7XG4gICAgICAgICAgICAgICAgICAgIF9zY3JvbGwgPSBfcG9wdXAucGVyZmVjdFNjcm9sbGJhcigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBfc2hvd1R5cGUgPT0gMSApe1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc2xpZGVEb3duKCAzMDAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAyICkge1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjFcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuYW5pbWF0ZSggeyBvcGFjaXR5OiAxIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX3BvcHVwLmZpbmQoICdsaScgKS5vbigge1xuICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gJCggdGhpcyApLmluZGV4KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudmFsKCBfb2JqLmZpbmQoICdvcHRpb24nICkuZXEoIGluZGV4ICkuYXR0ciggJ3ZhbHVlJyApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnRyaWdnZXIoICdjaGFuZ2UnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcbiAgICAgICAgX3NlbGYuY2hlY2tPcGVuZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIF9vcGVuZWQ7XG4gICAgICAgIH07XG4gICAgICAgIF9zZWxmLmNsb3NlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIF9jb25zdHJ1Y3RvcigpO1xuXG4gICAgfTtcblxufSApKCk7IiwiKCBmdW5jdGlvbigpe1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLnNlYXJjaCcpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgU2VhcmNoKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIFNlYXJjaCA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pbnB1dCA9IF9vYmouZmluZCgnaW5wdXRbdHlwZT1zZWFyY2hdJyksXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgX3BhdGggPSBfb2JqLmRhdGEoJ3BhdGgnKSxcbiAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDAsXG4gICAgICAgICAgICBjb3VudEl0ZW1zID0gMCxcbiAgICAgICAgICAgIHZhbHVlSW5wdXQgPSBfaW5wdXQudmFsKCksXG4gICAgICAgICAgICBfcmVzdWx0ID0gX29iai5maW5kKCcuc2VhcmNoX19yZXN1bHQnKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX2lucHV0Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbihJKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHdpbmRvdykud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKEkua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmZpbHRlcignLmFjdGl2ZScpLmxlbmd0aCA9PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnZm9ybScpLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVJbnB1dCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggdmFsdWVJbnB1dC5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FqYXhSZXF1ZXN0KCAkKHRoaXMpLCB2YWx1ZUlucHV0Lmxlbmd0aCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLnZhbCgpID09ICcnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZXN1bHQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBrZXlkb3duOiBmdW5jdGlvbihJKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKHdpbmRvdykud2lkdGgoKSA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKCBJLmtleUNvZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfcmVzdWx0LmZpbmQoJy5zZWFyY2hfX2ZvdW5kIGxpJykuZmlsdGVyKCcuYWN0aXZlJykubGVuZ3RoID09IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBfb2JqLmRhdGEoJ2FjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5maWx0ZXIoJy5hY3RpdmUnKS5maW5kKCdhJykuYXR0cignaHJlZicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3VsdC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggY291bnRJdGVtcyA+IDAgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfa2V5QWN0aXZhdGUoIEkua2V5Q29kZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHN1Z2dlc3RTZWxlY3RlZCA9PSBjb3VudEl0ZW1zKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgJCgnaHRtbCcpLmNsaWNrKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdFNlbGVjdGVkID0gMDtcblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgICAgICBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50ICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgICAgICBcIi5zZWFyY2hfX2ZvdW5kIGxpXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSBjdXJJdGVtLmZpbmQoJ2EnKS50ZXh0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dC52YWwoY3VyVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVzdWx0LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0U2VsZWN0ZWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcbiAgICAgICAgICAgICAgICAgICAgXCJrZXlkb3duXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLnNlYXJjaF9fZm91bmQgbGlcIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oSSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goSS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9rZXlBY3RpdmF0ZSA9IGZ1bmN0aW9uKG4pIHtcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBpZiggbiA9PSA0MCAmJiBzdWdnZXN0U2VsZWN0ZWQgPCBjb3VudEl0ZW1zICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZCsrO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbiA9PSAzOCAmJiBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RTZWxlY3RlZC0tO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCBzdWdnZXN0U2VsZWN0ZWQgPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQgbGknKS5lcSggc3VnZ2VzdFNlbGVjdGVkIC0gMSApLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgX2lucHV0LnZhbCggX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCBsaScpLmVxKCBzdWdnZXN0U2VsZWN0ZWQgLSAxICkuZmluZCgnYScpLnRleHQoKSApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBfaW5wdXQudmFsKCB2YWx1ZUlucHV0ICk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZERhdGEgPSBmdW5jdGlvbiggZGF0YSApIHtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllcyA9IGRhdGEuY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSA9IGNhdGVnb3JpZXMubGVuZ3RoICE9IDAsXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzID0gZGF0YS5wcm9kdWN0cyxcbiAgICAgICAgICAgICAgICAgICAgYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyID0gW10sXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzQ2F0ZWdvcmllc0FyciA9IFtdLFxuICAgICAgICAgICAgICAgICAgICB1cmxQcm9kdWN0c0NhdGVnb3JpZXNBcnIgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHNXcmFwID0gJzxkaXYgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3dyYXBcIj4nO1xuXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBwcm9kdWN0cywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzV3JhcCArPSAnPGRpdj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9wLXByb2R1Y3RzX19pdGVtXCI+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX3BpY1wiPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCInKyBwcm9kdWN0LnNyYyArJ1wiIHdpZHRoPVwiNDE0XCIgaGVpZ2h0PVwiNDE0XCIgYWx0PVwiJysgcHJvZHVjdC5hbHQgKydcIj5cXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidG9wLXByb2R1Y3RzX19wcmljZVwiPjxkZWw+JysgcHJvZHVjdC5vbGRQcmljZSArJzwvZGVsPiAnKyBwcm9kdWN0LnByaWNlICsnPC9zcGFuPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2l0ZW0tdGl0bGVcIj4nKyBwcm9kdWN0Lm5hbWUgKyc8L2gzPlxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJysgcHJvZHVjdC5ocmVmICsnXCIgY2xhc3M9XCJ0b3AtcHJvZHVjdHNfX2J0blwiPnZpZXc8L2E+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBpZiggIWNhdGVnb3JpZXNBdmFpbGFiaWxpdHkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5wdXNoKCBbcHJvZHVjdC5jYXRlZ29yaWVzLm1haW5DYXRlZ29yeSwgcHJvZHVjdC5jYXRlZ29yaWVzLnVybE1haW5DYXRlZ29yeSwgcHJvZHVjdC5jYXRlZ29yaWVzLnN1YmNhdGVnb3JpZXMsIHByb2R1Y3QuY2F0ZWdvcmllcy51cmxTdWJjYXRlZ29yaWVzXSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIHByb2R1Y3RzV3JhcCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnZGl2JykuZXEoMSkuZmluZCgnLnRvcC1wcm9kdWN0cycpLmh0bWwocHJvZHVjdHNXcmFwKTtcblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRTdHIgPSAnPHVsIGNsYXNzPVwic2VhcmNoX19mb3VuZFwiPic7XG5cbiAgICAgICAgICAgICAgICBpZiggY2F0ZWdvcmllc0F2YWlsYWJpbGl0eSApIHtcblxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goIGNhdGVnb3JpZXMsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcmllcyA9IHRoaXMuc3ViY2F0ZWdvcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxTdWJjYXRlZ29yaWVzID0gdGhpcy51cmxTdWJjYXRlZ29yaWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzdWJjYXRlZ29yaWVzICE9IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciggdmFyIGkgPSAwOyBpIDw9IHN1YmNhdGVnb3JpZXMubGVuZ3RoLTE7IGkrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnPGxpIGNsYXNzPVwic2VhcmNoX19mb3VuZC1zdWJcIj48YSBocmVmPVwiJysgdXJsU3ViY2F0ZWdvcmllc1tpXSArJ1wiPicgKyBzdWJjYXRlZ29yaWVzW2ldICsgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllc1dyYXAgKz0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyICs9ICc8bGk+PGEgaHJlZj1cIicrIHRoaXMudXJsQ2F0ZWdvcnkgKydcIj4nKyB0aGlzLm5hbWUgKyc8L2E+PC9saT4nKyBzdWJjYXRlZ29yaWVzV3JhcCArJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPD0gYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBmbGFnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHNDYXRlZ29yaWVzQXJyLnB1c2goYWxsUHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVswXSAhPSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMF0gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnIucHVzaChhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDw9IGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXS5sZW5ndGgtMTsgaisrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciB6ID0gMDsgeiA8PSBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl0ubGVuZ3RoLTE7IHorKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHByb2R1Y3RzQ2F0ZWdvcmllc0Fycltwcm9kdWN0c0NhdGVnb3JpZXNBcnIubGVuZ3RoLTFdWzJdLmluZGV4T2YoIGFsbFByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXVt6XSkgPT0gLTEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbcHJvZHVjdHNDYXRlZ29yaWVzQXJyLmxlbmd0aC0xXVsyXS5wdXNoKCBhbGxQcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0gKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0Fyci5sZW5ndGgtMTsgaSsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDA7IGogPD0gcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldLmxlbmd0aC0xOyBqKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcmllc1dyYXAgPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciggdmFyIHogPSAwOyB6IDw9IHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsyXS5sZW5ndGgtMTsgeisrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNhdGVnb3JpZXNXcmFwICs9ICc8bGkgY2xhc3M9XCJzZWFyY2hfX2ZvdW5kLXN1YlwiPjxhIGhyZWY9XCInICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzNdW3pdICsgJ1wiPicgKyBwcm9kdWN0c0NhdGVnb3JpZXNBcnJbaV1bMl1bel0gKyAnPC9hPjwvbGk+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yaWVzV3JhcCArPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzxsaT48YSBocmVmPVwiJyArIHByb2R1Y3RzQ2F0ZWdvcmllc0FycltpXVsxXSArICdcIj4nICsgcHJvZHVjdHNDYXRlZ29yaWVzQXJyW2ldWzBdICsgJzwvYT48L2xpPicrIHN1YmNhdGVnb3JpZXNXcmFwICsnJztcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXN1bHRTdHIgKz0gJzwvdWw+JztcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuZmluZCgnZGl2OmZpcnN0JykuaHRtbChyZXN1bHRTdHIpO1xuXG4gICAgICAgICAgICAgICAgX3Jlc3VsdC5maW5kKCcuc2VhcmNoX19mb3VuZCcpLmZpbmQoJ2xpOm5vdCg6bHQoMTEpKScpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgY291bnRJdGVtcyA9IF9yZXN1bHQuZmluZCgnLnNlYXJjaF9fZm91bmQnKS5maW5kKCdsaScpLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIF9yZXN1bHQuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hamF4UmVxdWVzdCA9ICBmdW5jdGlvbiggaW5wdXQsIG4gKSB7XG5cbiAgICAgICAgICAgICAgICBfcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogX3BhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpbnB1dC52YWwoKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZERhdGEoIG1zZyApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0gKSgpOyJdfQ==
